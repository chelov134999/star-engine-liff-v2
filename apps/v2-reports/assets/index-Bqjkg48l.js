import"/star-engine-liff-v2/config.runtime.js";function zm(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var oh={exports:{}},$o={},ah={exports:{}},M={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var es=Symbol.for("react.element"),Hm=Symbol.for("react.portal"),Km=Symbol.for("react.fragment"),qm=Symbol.for("react.strict_mode"),Gm=Symbol.for("react.profiler"),Jm=Symbol.for("react.provider"),Qm=Symbol.for("react.context"),Ym=Symbol.for("react.forward_ref"),Xm=Symbol.for("react.suspense"),Zm=Symbol.for("react.memo"),ey=Symbol.for("react.lazy"),qc=Symbol.iterator;function ty(t){return t===null||typeof t!="object"?null:(t=qc&&t[qc]||t["@@iterator"],typeof t=="function"?t:null)}var lh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uh=Object.assign,ch={};function Hn(t,e,r){this.props=t,this.context=e,this.refs=ch,this.updater=r||lh}Hn.prototype.isReactComponent={};Hn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dh(){}dh.prototype=Hn.prototype;function bu(t,e,r){this.props=t,this.context=e,this.refs=ch,this.updater=r||lh}var Su=bu.prototype=new dh;Su.constructor=bu;uh(Su,Hn.prototype);Su.isPureReactComponent=!0;var Gc=Array.isArray,fh=Object.prototype.hasOwnProperty,Eu={current:null},hh={key:!0,ref:!0,__self:!0,__source:!0};function ph(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fh.call(e,n)&&!hh.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:es,type:t,key:s,ref:o,props:i,_owner:Eu.current}}function ry(t,e){return{$$typeof:es,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ku(t){return typeof t=="object"&&t!==null&&t.$$typeof===es}function ny(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Jc=/\/+/g;function la(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ny(""+t.key):e.toString(36)}function Ms(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case es:case Hm:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+la(o,0):n,Gc(i)?(r="",t!=null&&(r=t.replace(Jc,"$&/")+"/"),Ms(i,e,r,"",function(u){return u})):i!=null&&(ku(i)&&(i=ry(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Jc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Gc(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+la(s,a);o+=Ms(s,e,r,l,i)}else if(l=ty(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+la(s,a++),o+=Ms(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ds(t,e,r){if(t==null)return t;var n=[],i=0;return Ms(t,n,"","",function(s){return e.call(r,s,i++)}),n}function iy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var He={current:null},zs={transition:null},sy={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:zs,ReactCurrentOwner:Eu};function gh(){throw Error("act(...) is not supported in production builds of React.")}M.Children={map:ds,forEach:function(t,e,r){ds(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ds(t,function(){e++}),e},toArray:function(t){return ds(t,function(e){return e})||[]},only:function(t){if(!ku(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};M.Component=Hn;M.Fragment=Km;M.Profiler=Gm;M.PureComponent=bu;M.StrictMode=qm;M.Suspense=Xm;M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sy;M.act=gh;M.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=uh({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Eu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fh.call(e,l)&&!hh.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:es,type:t.type,key:i,ref:s,props:n,_owner:o}};M.createContext=function(t){return t={$$typeof:Qm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jm,_context:t},t.Consumer=t};M.createElement=ph;M.createFactory=function(t){var e=ph.bind(null,t);return e.type=t,e};M.createRef=function(){return{current:null}};M.forwardRef=function(t){return{$$typeof:Ym,render:t}};M.isValidElement=ku;M.lazy=function(t){return{$$typeof:ey,_payload:{_status:-1,_result:t},_init:iy}};M.memo=function(t,e){return{$$typeof:Zm,type:t,compare:e===void 0?null:e}};M.startTransition=function(t){var e=zs.transition;zs.transition={};try{t()}finally{zs.transition=e}};M.unstable_act=gh;M.useCallback=function(t,e){return He.current.useCallback(t,e)};M.useContext=function(t){return He.current.useContext(t)};M.useDebugValue=function(){};M.useDeferredValue=function(t){return He.current.useDeferredValue(t)};M.useEffect=function(t,e){return He.current.useEffect(t,e)};M.useId=function(){return He.current.useId()};M.useImperativeHandle=function(t,e,r){return He.current.useImperativeHandle(t,e,r)};M.useInsertionEffect=function(t,e){return He.current.useInsertionEffect(t,e)};M.useLayoutEffect=function(t,e){return He.current.useLayoutEffect(t,e)};M.useMemo=function(t,e){return He.current.useMemo(t,e)};M.useReducer=function(t,e,r){return He.current.useReducer(t,e,r)};M.useRef=function(t){return He.current.useRef(t)};M.useState=function(t){return He.current.useState(t)};M.useSyncExternalStore=function(t,e,r){return He.current.useSyncExternalStore(t,e,r)};M.useTransition=function(){return He.current.useTransition()};M.version="18.3.1";ah.exports=M;var et=ah.exports;const oy=sh(et);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay=et,ly=Symbol.for("react.element"),uy=Symbol.for("react.fragment"),cy=Object.prototype.hasOwnProperty,dy=ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fy={key:!0,ref:!0,__self:!0,__source:!0};function vh(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)cy.call(e,n)&&!fy.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:ly,type:t,key:s,ref:o,props:i,_owner:dy.current}}$o.Fragment=uy;$o.jsx=vh;$o.jsxs=vh;oh.exports=$o;var I=oh.exports,el={},mh={exports:{}},lt={},yh={exports:{}},wh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,L){var D=R.length;R.push(L);e:for(;0<D;){var ce=D-1>>>1,Ee=R[ce];if(0<i(Ee,L))R[ce]=L,R[D]=Ee,D=ce;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var L=R[0],D=R.pop();if(D!==L){R[0]=D;e:for(var ce=0,Ee=R.length,us=Ee>>>1;ce<us;){var Pr=2*(ce+1)-1,aa=R[Pr],Ir=Pr+1,cs=R[Ir];if(0>i(aa,D))Ir<Ee&&0>i(cs,aa)?(R[ce]=cs,R[Ir]=D,ce=Ir):(R[ce]=aa,R[Pr]=D,ce=Pr);else if(Ir<Ee&&0>i(cs,D))R[ce]=cs,R[Ir]=D,ce=Ir;else break e}}return L}function i(R,L){var D=R.sortIndex-L.sortIndex;return D!==0?D:R.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=R)n(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=r(u)}}function _(R){if(y=!1,v(R),!m)if(r(l)!==null)m=!0,sa(k);else{var L=r(u);L!==null&&oa(_,L.startTime-R)}}function k(R,L){m=!1,y&&(y=!1,g(P),P=-1),p=!0;var D=f;try{for(v(L),d=r(l);d!==null&&(!(d.expirationTime>L)||R&&!me());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,f=d.priorityLevel;var Ee=ce(d.expirationTime<=L);L=t.unstable_now(),typeof Ee=="function"?d.callback=Ee:d===r(l)&&n(l),v(L)}else n(l);d=r(l)}if(d!==null)var us=!0;else{var Pr=r(u);Pr!==null&&oa(_,Pr.startTime-L),us=!1}return us}finally{d=null,f=D,p=!1}}var E=!1,O=null,P=-1,$=5,j=-1;function me(){return!(t.unstable_now()-j<$)}function rr(){if(O!==null){var R=t.unstable_now();j=R;var L=!0;try{L=O(!0,R)}finally{L?ei():(E=!1,O=null)}}else E=!1}var ei;if(typeof h=="function")ei=function(){h(rr)};else if(typeof MessageChannel<"u"){var Kc=new MessageChannel,Mm=Kc.port2;Kc.port1.onmessage=rr,ei=function(){Mm.postMessage(null)}}else ei=function(){w(rr,0)};function sa(R){O=R,E||(E=!0,ei())}function oa(R,L){P=w(function(){R(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,sa(k))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var D=f;f=L;try{return R()}finally{f=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,L){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=f;f=R;try{return L()}finally{f=D}},t.unstable_scheduleCallback=function(R,L,D){var ce=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?ce+D:ce):D=ce,R){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=D+Ee,R={id:c++,callback:L,priorityLevel:R,startTime:D,expirationTime:Ee,sortIndex:-1},D>ce?(R.sortIndex=D,e(u,R),r(l)===null&&R===r(u)&&(y?(g(P),P=-1):y=!0,oa(_,D-ce))):(R.sortIndex=Ee,e(l,R),m||p||(m=!0,sa(k))),R},t.unstable_shouldYield=me,t.unstable_wrapCallback=function(R){var L=f;return function(){var D=f;f=L;try{return R.apply(this,arguments)}finally{f=D}}}})(wh);yh.exports=wh;var hy=yh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py=et,at=hy;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _h=new Set,Ai={};function en(t,e){Nn(t,e),Nn(t+"Capture",e)}function Nn(t,e){for(Ai[t]=e,t=0;t<e.length;t++)_h.add(e[t])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=Object.prototype.hasOwnProperty,gy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qc={},Yc={};function vy(t){return tl.call(Yc,t)?!0:tl.call(Qc,t)?!1:gy.test(t)?Yc[t]=!0:(Qc[t]=!0,!1)}function my(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yy(t,e,r,n){if(e===null||typeof e>"u"||my(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ae[t]=new Ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ae[e]=new Ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ae[t]=new Ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ae[t]=new Ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ae[t]=new Ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ae[t]=new Ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ae[t]=new Ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ae[t]=new Ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ae[t]=new Ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tu=/[\-:]([a-z])/g;function Ou(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tu,Ou);Ae[e]=new Ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tu,Ou);Ae[e]=new Ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tu,Ou);Ae[e]=new Ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ae[t]=new Ke(t,1,!1,t.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ae[t]=new Ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cu(t,e,r,n){var i=Ae.hasOwnProperty(e)?Ae[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yy(e,r,i,n)&&(r=null),n||i===null?vy(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var tr=py.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fs=Symbol.for("react.element"),pn=Symbol.for("react.portal"),gn=Symbol.for("react.fragment"),Pu=Symbol.for("react.strict_mode"),rl=Symbol.for("react.profiler"),bh=Symbol.for("react.provider"),Sh=Symbol.for("react.context"),Iu=Symbol.for("react.forward_ref"),nl=Symbol.for("react.suspense"),il=Symbol.for("react.suspense_list"),xu=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Eh=Symbol.for("react.offscreen"),Xc=Symbol.iterator;function ti(t){return t===null||typeof t!="object"?null:(t=Xc&&t[Xc]||t["@@iterator"],typeof t=="function"?t:null)}var oe=Object.assign,ua;function di(t){if(ua===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ua=e&&e[1]||""}return`
`+ua+t}var ca=!1;function da(t,e){if(!t||ca)return"";ca=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ca=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?di(t):""}function wy(t){switch(t.tag){case 5:return di(t.type);case 16:return di("Lazy");case 13:return di("Suspense");case 19:return di("SuspenseList");case 0:case 2:case 15:return t=da(t.type,!1),t;case 11:return t=da(t.type.render,!1),t;case 1:return t=da(t.type,!0),t;default:return""}}function sl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gn:return"Fragment";case pn:return"Portal";case rl:return"Profiler";case Pu:return"StrictMode";case nl:return"Suspense";case il:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sh:return(t.displayName||"Context")+".Consumer";case bh:return(t._context.displayName||"Context")+".Provider";case Iu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xu:return e=t.displayName||null,e!==null?e:sl(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return sl(t(e))}catch{}}return null}function _y(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sl(e);case 8:return e===Pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function by(t){var e=kh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hs(t){t._valueTracker||(t._valueTracker=by(t))}function Th(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=kh(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ro(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ol(t,e){var r=e.checked;return oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Zc(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Sr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Oh(t,e){e=e.checked,e!=null&&Cu(t,"checked",e,!1)}function al(t,e){Oh(t,e);var r=Sr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ll(t,e.type,r):e.hasOwnProperty("defaultValue")&&ll(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ed(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ll(t,e,r){(e!=="number"||ro(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var fi=Array.isArray;function On(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Sr(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ul(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function td(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(T(92));if(fi(r)){if(1<r.length)throw Error(T(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Sr(r)}}function Ch(t,e){var r=Sr(e.value),n=Sr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function rd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ph(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ph(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ps,Ih=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ps=ps||document.createElement("div"),ps.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ps.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ji(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sy=["Webkit","ms","Moz","O"];Object.keys(vi).forEach(function(t){Sy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vi[e]=vi[t]})});function xh(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||vi.hasOwnProperty(t)&&vi[t]?(""+e).trim():e+"px"}function Rh(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=xh(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Ey=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(t,e){if(e){if(Ey[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function fl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=null;function Ru(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pl=null,Cn=null,Pn=null;function nd(t){if(t=ns(t)){if(typeof pl!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Fo(e),pl(t.stateNode,t.type,e))}}function Ah(t){Cn?Pn?Pn.push(t):Pn=[t]:Cn=t}function jh(){if(Cn){var t=Cn,e=Pn;if(Pn=Cn=null,nd(t),e)for(t=0;t<e.length;t++)nd(e[t])}}function $h(t,e){return t(e)}function Nh(){}var fa=!1;function Lh(t,e,r){if(fa)return t(e,r);fa=!0;try{return $h(t,e,r)}finally{fa=!1,(Cn!==null||Pn!==null)&&(Nh(),jh())}}function $i(t,e){var r=t.stateNode;if(r===null)return null;var n=Fo(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(T(231,e,typeof r));return r}var gl=!1;if(Qt)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){gl=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{gl=!1}function ky(t,e,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var mi=!1,no=null,io=!1,vl=null,Ty={onError:function(t){mi=!0,no=t}};function Oy(t,e,r,n,i,s,o,a,l){mi=!1,no=null,ky.apply(Ty,arguments)}function Cy(t,e,r,n,i,s,o,a,l){if(Oy.apply(this,arguments),mi){if(mi){var u=no;mi=!1,no=null}else throw Error(T(198));io||(io=!0,vl=u)}}function tn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Uh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function id(t){if(tn(t)!==t)throw Error(T(188))}function Py(t){var e=t.alternate;if(!e){if(e=tn(t),e===null)throw Error(T(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return id(i),t;if(s===n)return id(i),e;s=s.sibling}throw Error(T(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(T(189))}}if(r.alternate!==n)throw Error(T(190))}if(r.tag!==3)throw Error(T(188));return r.stateNode.current===r?t:e}function Dh(t){return t=Py(t),t!==null?Fh(t):null}function Fh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fh(t);if(e!==null)return e;t=t.sibling}return null}var Bh=at.unstable_scheduleCallback,sd=at.unstable_cancelCallback,Iy=at.unstable_shouldYield,xy=at.unstable_requestPaint,fe=at.unstable_now,Ry=at.unstable_getCurrentPriorityLevel,Au=at.unstable_ImmediatePriority,Mh=at.unstable_UserBlockingPriority,so=at.unstable_NormalPriority,Ay=at.unstable_LowPriority,zh=at.unstable_IdlePriority,No=null,Ut=null;function jy(t){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(No,t,void 0,(t.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Ly,$y=Math.log,Ny=Math.LN2;function Ly(t){return t>>>=0,t===0?32:31-($y(t)/Ny|0)|0}var gs=64,vs=4194304;function hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oo(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=hi(a):(s&=o,s!==0&&(n=hi(s)))}else o=r&~i,o!==0?n=hi(o):s!==0&&(n=hi(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Pt(e),i=1<<r,n|=t[r],e&=~i;return n}function Uy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dy(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pt(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=Uy(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ml(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wh(){var t=gs;return gs<<=1,!(gs&4194240)&&(gs=64),t}function ha(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ts(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pt(e),t[e]=r}function Fy(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Pt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function ju(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Pt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var q=0;function Vh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hh,$u,Kh,qh,Gh,yl=!1,ms=[],hr=null,pr=null,gr=null,Ni=new Map,Li=new Map,ar=[],By="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function od(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Ni.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(e.pointerId)}}function ni(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ns(e),e!==null&&$u(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function My(t,e,r,n,i){switch(e){case"focusin":return hr=ni(hr,t,e,r,n,i),!0;case"dragenter":return pr=ni(pr,t,e,r,n,i),!0;case"mouseover":return gr=ni(gr,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Ni.set(s,ni(Ni.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Li.set(s,ni(Li.get(s)||null,t,e,r,n,i)),!0}return!1}function Jh(t){var e=Br(t.target);if(e!==null){var r=tn(e);if(r!==null){if(e=r.tag,e===13){if(e=Uh(r),e!==null){t.blockedOn=e,Gh(t.priority,function(){Kh(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ws(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=wl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);hl=n,r.target.dispatchEvent(n),hl=null}else return e=ns(r),e!==null&&$u(e),t.blockedOn=r,!1;e.shift()}return!0}function ad(t,e,r){Ws(t)&&r.delete(e)}function zy(){yl=!1,hr!==null&&Ws(hr)&&(hr=null),pr!==null&&Ws(pr)&&(pr=null),gr!==null&&Ws(gr)&&(gr=null),Ni.forEach(ad),Li.forEach(ad)}function ii(t,e){t.blockedOn===e&&(t.blockedOn=null,yl||(yl=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,zy)))}function Ui(t){function e(i){return ii(i,t)}if(0<ms.length){ii(ms[0],t);for(var r=1;r<ms.length;r++){var n=ms[r];n.blockedOn===t&&(n.blockedOn=null)}}for(hr!==null&&ii(hr,t),pr!==null&&ii(pr,t),gr!==null&&ii(gr,t),Ni.forEach(e),Li.forEach(e),r=0;r<ar.length;r++)n=ar[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ar.length&&(r=ar[0],r.blockedOn===null);)Jh(r),r.blockedOn===null&&ar.shift()}var In=tr.ReactCurrentBatchConfig,ao=!0;function Wy(t,e,r,n){var i=q,s=In.transition;In.transition=null;try{q=1,Nu(t,e,r,n)}finally{q=i,In.transition=s}}function Vy(t,e,r,n){var i=q,s=In.transition;In.transition=null;try{q=4,Nu(t,e,r,n)}finally{q=i,In.transition=s}}function Nu(t,e,r,n){if(ao){var i=wl(t,e,r,n);if(i===null)Ea(t,e,n,lo,r),od(t,n);else if(My(i,t,e,r,n))n.stopPropagation();else if(od(t,n),e&4&&-1<By.indexOf(t)){for(;i!==null;){var s=ns(i);if(s!==null&&Hh(s),s=wl(t,e,r,n),s===null&&Ea(t,e,n,lo,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Ea(t,e,n,null,r)}}var lo=null;function wl(t,e,r,n){if(lo=null,t=Ru(n),t=Br(t),t!==null)if(e=tn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Uh(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lo=t,null}function Qh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ry()){case Au:return 1;case Mh:return 4;case so:case Ay:return 16;case zh:return 536870912;default:return 16}default:return 16}}var cr=null,Lu=null,Vs=null;function Yh(){if(Vs)return Vs;var t,e=Lu,r=e.length,n,i="value"in cr?cr.value:cr.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Vs=i.slice(t,1<n?1-n:void 0)}function Hs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ys(){return!0}function ld(){return!1}function ut(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ys:ld,this.isPropagationStopped=ld,this}return oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),e}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=ut(Kn),rs=oe({},Kn,{view:0,detail:0}),Hy=ut(rs),pa,ga,si,Lo=oe({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Du,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(pa=t.screenX-si.screenX,ga=t.screenY-si.screenY):ga=pa=0,si=t),pa)},movementY:function(t){return"movementY"in t?t.movementY:ga}}),ud=ut(Lo),Ky=oe({},Lo,{dataTransfer:0}),qy=ut(Ky),Gy=oe({},rs,{relatedTarget:0}),va=ut(Gy),Jy=oe({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qy=ut(Jy),Yy=oe({},Kn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xy=ut(Yy),Zy=oe({},Kn,{data:0}),cd=ut(Zy),ew={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rw[t])?!!e[t]:!1}function Du(){return nw}var iw=oe({},rs,{key:function(t){if(t.key){var e=ew[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Du,charCode:function(t){return t.type==="keypress"?Hs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sw=ut(iw),ow=oe({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=ut(ow),aw=oe({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Du}),lw=ut(aw),uw=oe({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),cw=ut(uw),dw=oe({},Lo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fw=ut(dw),hw=[9,13,27,32],Fu=Qt&&"CompositionEvent"in window,yi=null;Qt&&"documentMode"in document&&(yi=document.documentMode);var pw=Qt&&"TextEvent"in window&&!yi,Xh=Qt&&(!Fu||yi&&8<yi&&11>=yi),fd=" ",hd=!1;function Zh(t,e){switch(t){case"keyup":return hw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vn=!1;function gw(t,e){switch(t){case"compositionend":return ep(e);case"keypress":return e.which!==32?null:(hd=!0,fd);case"textInput":return t=e.data,t===fd&&hd?null:t;default:return null}}function vw(t,e){if(vn)return t==="compositionend"||!Fu&&Zh(t,e)?(t=Yh(),Vs=Lu=cr=null,vn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xh&&e.locale!=="ko"?null:e.data;default:return null}}var mw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mw[t.type]:e==="textarea"}function tp(t,e,r,n){Ah(n),e=uo(e,"onChange"),0<e.length&&(r=new Uu("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var wi=null,Di=null;function yw(t){fp(t,0)}function Uo(t){var e=wn(t);if(Th(e))return t}function ww(t,e){if(t==="change")return e}var rp=!1;if(Qt){var ma;if(Qt){var ya="oninput"in document;if(!ya){var gd=document.createElement("div");gd.setAttribute("oninput","return;"),ya=typeof gd.oninput=="function"}ma=ya}else ma=!1;rp=ma&&(!document.documentMode||9<document.documentMode)}function vd(){wi&&(wi.detachEvent("onpropertychange",np),Di=wi=null)}function np(t){if(t.propertyName==="value"&&Uo(Di)){var e=[];tp(e,Di,t,Ru(t)),Lh(yw,e)}}function _w(t,e,r){t==="focusin"?(vd(),wi=e,Di=r,wi.attachEvent("onpropertychange",np)):t==="focusout"&&vd()}function bw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uo(Di)}function Sw(t,e){if(t==="click")return Uo(e)}function Ew(t,e){if(t==="input"||t==="change")return Uo(e)}function kw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xt=typeof Object.is=="function"?Object.is:kw;function Fi(t,e){if(xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!tl.call(e,i)||!xt(t[i],e[i]))return!1}return!0}function md(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yd(t,e){var r=md(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=md(r)}}function ip(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ip(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sp(){for(var t=window,e=ro();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ro(t.document)}return e}function Bu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Tw(t){var e=sp(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&ip(r.ownerDocument.documentElement,r)){if(n!==null&&Bu(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=yd(r,s);var o=yd(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ow=Qt&&"documentMode"in document&&11>=document.documentMode,mn=null,_l=null,_i=null,bl=!1;function wd(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bl||mn==null||mn!==ro(n)||(n=mn,"selectionStart"in n&&Bu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_i&&Fi(_i,n)||(_i=n,n=uo(_l,"onSelect"),0<n.length&&(e=new Uu("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=mn)))}function ws(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var yn={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},wa={},op={};Qt&&(op=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function Do(t){if(wa[t])return wa[t];if(!yn[t])return t;var e=yn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in op)return wa[t]=e[r];return t}var ap=Do("animationend"),lp=Do("animationiteration"),up=Do("animationstart"),cp=Do("transitionend"),dp=new Map,_d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(t,e){dp.set(t,e),en(e,[t])}for(var _a=0;_a<_d.length;_a++){var ba=_d[_a],Cw=ba.toLowerCase(),Pw=ba[0].toUpperCase()+ba.slice(1);kr(Cw,"on"+Pw)}kr(ap,"onAnimationEnd");kr(lp,"onAnimationIteration");kr(up,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr(cp,"onTransitionEnd");Nn("onMouseEnter",["mouseout","mouseover"]);Nn("onMouseLeave",["mouseout","mouseover"]);Nn("onPointerEnter",["pointerout","pointerover"]);Nn("onPointerLeave",["pointerout","pointerover"]);en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));en("onBeforeInput",["compositionend","keypress","textInput","paste"]);en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iw=new Set("cancel close invalid load scroll toggle".split(" ").concat(pi));function bd(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Cy(n,e,void 0,t),t.currentTarget=null}function fp(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;bd(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;bd(i,a,u),s=l}}}if(io)throw t=vl,io=!1,vl=null,t}function X(t,e){var r=e[Ol];r===void 0&&(r=e[Ol]=new Set);var n=t+"__bubble";r.has(n)||(hp(e,t,2,!1),r.add(n))}function Sa(t,e,r){var n=0;e&&(n|=4),hp(r,t,n,e)}var _s="_reactListening"+Math.random().toString(36).slice(2);function Bi(t){if(!t[_s]){t[_s]=!0,_h.forEach(function(r){r!=="selectionchange"&&(Iw.has(r)||Sa(r,!1,t),Sa(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_s]||(e[_s]=!0,Sa("selectionchange",!1,e))}}function hp(t,e,r,n){switch(Qh(e)){case 1:var i=Wy;break;case 4:i=Vy;break;default:i=Nu}r=i.bind(null,e,r,t),i=void 0,!gl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Ea(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Br(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}Lh(function(){var u=s,c=Ru(r),d=[];e:{var f=dp.get(t);if(f!==void 0){var p=Uu,m=t;switch(t){case"keypress":if(Hs(r)===0)break e;case"keydown":case"keyup":p=sw;break;case"focusin":m="focus",p=va;break;case"focusout":m="blur",p=va;break;case"beforeblur":case"afterblur":p=va;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=qy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=lw;break;case ap:case lp:case up:p=Qy;break;case cp:p=cw;break;case"scroll":p=Hy;break;case"wheel":p=fw;break;case"copy":case"cut":case"paste":p=Xy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=dd}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var h=u,v;h!==null;){v=h;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,g!==null&&(_=$i(h,g),_!=null&&y.push(Mi(h,_,v)))),w)break;h=h.return}0<y.length&&(f=new p(f,m,null,r,c),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==hl&&(m=r.relatedTarget||r.fromElement)&&(Br(m)||m[Yt]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?Br(m):null,m!==null&&(w=tn(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=ud,_="onMouseLeave",g="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(y=dd,_="onPointerLeave",g="onPointerEnter",h="pointer"),w=p==null?f:wn(p),v=m==null?f:wn(m),f=new y(_,h+"leave",p,r,c),f.target=w,f.relatedTarget=v,_=null,Br(c)===u&&(y=new y(g,h+"enter",m,r,c),y.target=v,y.relatedTarget=w,_=y),w=_,p&&m)t:{for(y=p,g=m,h=0,v=y;v;v=nn(v))h++;for(v=0,_=g;_;_=nn(_))v++;for(;0<h-v;)y=nn(y),h--;for(;0<v-h;)g=nn(g),v--;for(;h--;){if(y===g||g!==null&&y===g.alternate)break t;y=nn(y),g=nn(g)}y=null}else y=null;p!==null&&Sd(d,f,p,y,!1),m!==null&&w!==null&&Sd(d,w,m,y,!0)}}e:{if(f=u?wn(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=ww;else if(pd(f))if(rp)k=Ew;else{k=bw;var E=_w}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Sw);if(k&&(k=k(t,u))){tp(d,k,r,c);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&ll(f,"number",f.value)}switch(E=u?wn(u):window,t){case"focusin":(pd(E)||E.contentEditable==="true")&&(mn=E,_l=u,_i=null);break;case"focusout":_i=_l=mn=null;break;case"mousedown":bl=!0;break;case"contextmenu":case"mouseup":case"dragend":bl=!1,wd(d,r,c);break;case"selectionchange":if(Ow)break;case"keydown":case"keyup":wd(d,r,c)}var O;if(Fu)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else vn?Zh(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Xh&&r.locale!=="ko"&&(vn||P!=="onCompositionStart"?P==="onCompositionEnd"&&vn&&(O=Yh()):(cr=c,Lu="value"in cr?cr.value:cr.textContent,vn=!0)),E=uo(u,P),0<E.length&&(P=new cd(P,t,null,r,c),d.push({event:P,listeners:E}),O?P.data=O:(O=ep(r),O!==null&&(P.data=O)))),(O=pw?gw(t,r):vw(t,r))&&(u=uo(u,"onBeforeInput"),0<u.length&&(c=new cd("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=O))}fp(d,e)})}function Mi(t,e,r){return{instance:t,listener:e,currentTarget:r}}function uo(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$i(t,r),s!=null&&n.unshift(Mi(t,s,i)),s=$i(t,e),s!=null&&n.push(Mi(t,s,i))),t=t.return}return n}function nn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sd(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=$i(r,s),l!=null&&o.unshift(Mi(r,l,a))):i||(l=$i(r,s),l!=null&&o.push(Mi(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var xw=/\r\n?/g,Rw=/\u0000|\uFFFD/g;function Ed(t){return(typeof t=="string"?t:""+t).replace(xw,`
`).replace(Rw,"")}function bs(t,e,r){if(e=Ed(e),Ed(t)!==e&&r)throw Error(T(425))}function co(){}var Sl=null,El=null;function kl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tl=typeof setTimeout=="function"?setTimeout:void 0,Aw=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(t){return kd.resolve(null).then(t).catch($w)}:Tl;function $w(t){setTimeout(function(){throw t})}function ka(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Ui(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ui(e)}function vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Td(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var qn=Math.random().toString(36).slice(2),$t="__reactFiber$"+qn,zi="__reactProps$"+qn,Yt="__reactContainer$"+qn,Ol="__reactEvents$"+qn,Nw="__reactListeners$"+qn,Lw="__reactHandles$"+qn;function Br(t){var e=t[$t];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Yt]||r[$t]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Td(t);t!==null;){if(r=t[$t])return r;t=Td(t)}return e}t=r,r=t.parentNode}return null}function ns(t){return t=t[$t]||t[Yt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Fo(t){return t[zi]||null}var Cl=[],_n=-1;function Tr(t){return{current:t}}function Z(t){0>_n||(t.current=Cl[_n],Cl[_n]=null,_n--)}function Y(t,e){_n++,Cl[_n]=t.current,t.current=e}var Er={},Be=Tr(Er),Je=Tr(!1),qr=Er;function Ln(t,e){var r=t.type.contextTypes;if(!r)return Er;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qe(t){return t=t.childContextTypes,t!=null}function fo(){Z(Je),Z(Be)}function Od(t,e,r){if(Be.current!==Er)throw Error(T(168));Y(Be,e),Y(Je,r)}function pp(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(T(108,_y(t)||"Unknown",i));return oe({},r,n)}function ho(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,qr=Be.current,Y(Be,t),Y(Je,Je.current),!0}function Cd(t,e,r){var n=t.stateNode;if(!n)throw Error(T(169));r?(t=pp(t,e,qr),n.__reactInternalMemoizedMergedChildContext=t,Z(Je),Z(Be),Y(Be,t)):Z(Je),Y(Je,r)}var Ht=null,Bo=!1,Ta=!1;function gp(t){Ht===null?Ht=[t]:Ht.push(t)}function Uw(t){Bo=!0,gp(t)}function Or(){if(!Ta&&Ht!==null){Ta=!0;var t=0,e=q;try{var r=Ht;for(q=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ht=null,Bo=!1}catch(i){throw Ht!==null&&(Ht=Ht.slice(t+1)),Bh(Au,Or),i}finally{q=e,Ta=!1}}return null}var bn=[],Sn=0,po=null,go=0,ht=[],pt=0,Gr=null,Kt=1,qt="";function jr(t,e){bn[Sn++]=go,bn[Sn++]=po,po=t,go=e}function vp(t,e,r){ht[pt++]=Kt,ht[pt++]=qt,ht[pt++]=Gr,Gr=t;var n=Kt;t=qt;var i=32-Pt(n)-1;n&=~(1<<i),r+=1;var s=32-Pt(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Kt=1<<32-Pt(e)+i|r<<i|n,qt=s+t}else Kt=1<<s|r<<i|n,qt=t}function Mu(t){t.return!==null&&(jr(t,1),vp(t,1,0))}function zu(t){for(;t===po;)po=bn[--Sn],bn[Sn]=null,go=bn[--Sn],bn[Sn]=null;for(;t===Gr;)Gr=ht[--pt],ht[pt]=null,qt=ht[--pt],ht[pt]=null,Kt=ht[--pt],ht[pt]=null}var ot=null,st=null,ee=!1,Ct=null;function mp(t,e){var r=gt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Pd(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,st=vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Gr!==null?{id:Kt,overflow:qt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=gt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ot=t,st=null,!0):!1;default:return!1}}function Pl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Il(t){if(ee){var e=st;if(e){var r=e;if(!Pd(t,e)){if(Pl(t))throw Error(T(418));e=vr(r.nextSibling);var n=ot;e&&Pd(t,e)?mp(n,r):(t.flags=t.flags&-4097|2,ee=!1,ot=t)}}else{if(Pl(t))throw Error(T(418));t.flags=t.flags&-4097|2,ee=!1,ot=t}}}function Id(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function Ss(t){if(t!==ot)return!1;if(!ee)return Id(t),ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kl(t.type,t.memoizedProps)),e&&(e=st)){if(Pl(t))throw yp(),Error(T(418));for(;e;)mp(t,e),e=vr(e.nextSibling)}if(Id(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){st=vr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}st=null}}else st=ot?vr(t.stateNode.nextSibling):null;return!0}function yp(){for(var t=st;t;)t=vr(t.nextSibling)}function Un(){st=ot=null,ee=!1}function Wu(t){Ct===null?Ct=[t]:Ct.push(t)}var Dw=tr.ReactCurrentBatchConfig;function oi(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(T(309));var n=r.stateNode}if(!n)throw Error(T(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(T(284));if(!r._owner)throw Error(T(290,t))}return t}function Es(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xd(t){var e=t._init;return e(t._payload)}function wp(t){function e(g,h){if(t){var v=g.deletions;v===null?(g.deletions=[h],g.flags|=16):v.push(h)}}function r(g,h){if(!t)return null;for(;h!==null;)e(g,h),h=h.sibling;return null}function n(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function i(g,h){return g=_r(g,h),g.index=0,g.sibling=null,g}function s(g,h,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<h?(g.flags|=2,h):v):(g.flags|=2,h)):(g.flags|=1048576,h)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,h,v,_){return h===null||h.tag!==6?(h=Aa(v,g.mode,_),h.return=g,h):(h=i(h,v),h.return=g,h)}function l(g,h,v,_){var k=v.type;return k===gn?c(g,h,v.props.children,_,v.key):h!==null&&(h.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sr&&xd(k)===h.type)?(_=i(h,v.props),_.ref=oi(g,h,v),_.return=g,_):(_=Xs(v.type,v.key,v.props,null,g.mode,_),_.ref=oi(g,h,v),_.return=g,_)}function u(g,h,v,_){return h===null||h.tag!==4||h.stateNode.containerInfo!==v.containerInfo||h.stateNode.implementation!==v.implementation?(h=ja(v,g.mode,_),h.return=g,h):(h=i(h,v.children||[]),h.return=g,h)}function c(g,h,v,_,k){return h===null||h.tag!==7?(h=Kr(v,g.mode,_,k),h.return=g,h):(h=i(h,v),h.return=g,h)}function d(g,h,v){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Aa(""+h,g.mode,v),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case fs:return v=Xs(h.type,h.key,h.props,null,g.mode,v),v.ref=oi(g,null,h),v.return=g,v;case pn:return h=ja(h,g.mode,v),h.return=g,h;case sr:var _=h._init;return d(g,_(h._payload),v)}if(fi(h)||ti(h))return h=Kr(h,g.mode,v,null),h.return=g,h;Es(g,h)}return null}function f(g,h,v,_){var k=h!==null?h.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(g,h,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fs:return v.key===k?l(g,h,v,_):null;case pn:return v.key===k?u(g,h,v,_):null;case sr:return k=v._init,f(g,h,k(v._payload),_)}if(fi(v)||ti(v))return k!==null?null:c(g,h,v,_,null);Es(g,v)}return null}function p(g,h,v,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(v)||null,a(h,g,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fs:return g=g.get(_.key===null?v:_.key)||null,l(h,g,_,k);case pn:return g=g.get(_.key===null?v:_.key)||null,u(h,g,_,k);case sr:var E=_._init;return p(g,h,v,E(_._payload),k)}if(fi(_)||ti(_))return g=g.get(v)||null,c(h,g,_,k,null);Es(h,_)}return null}function m(g,h,v,_){for(var k=null,E=null,O=h,P=h=0,$=null;O!==null&&P<v.length;P++){O.index>P?($=O,O=null):$=O.sibling;var j=f(g,O,v[P],_);if(j===null){O===null&&(O=$);break}t&&O&&j.alternate===null&&e(g,O),h=s(j,h,P),E===null?k=j:E.sibling=j,E=j,O=$}if(P===v.length)return r(g,O),ee&&jr(g,P),k;if(O===null){for(;P<v.length;P++)O=d(g,v[P],_),O!==null&&(h=s(O,h,P),E===null?k=O:E.sibling=O,E=O);return ee&&jr(g,P),k}for(O=n(g,O);P<v.length;P++)$=p(O,g,P,v[P],_),$!==null&&(t&&$.alternate!==null&&O.delete($.key===null?P:$.key),h=s($,h,P),E===null?k=$:E.sibling=$,E=$);return t&&O.forEach(function(me){return e(g,me)}),ee&&jr(g,P),k}function y(g,h,v,_){var k=ti(v);if(typeof k!="function")throw Error(T(150));if(v=k.call(v),v==null)throw Error(T(151));for(var E=k=null,O=h,P=h=0,$=null,j=v.next();O!==null&&!j.done;P++,j=v.next()){O.index>P?($=O,O=null):$=O.sibling;var me=f(g,O,j.value,_);if(me===null){O===null&&(O=$);break}t&&O&&me.alternate===null&&e(g,O),h=s(me,h,P),E===null?k=me:E.sibling=me,E=me,O=$}if(j.done)return r(g,O),ee&&jr(g,P),k;if(O===null){for(;!j.done;P++,j=v.next())j=d(g,j.value,_),j!==null&&(h=s(j,h,P),E===null?k=j:E.sibling=j,E=j);return ee&&jr(g,P),k}for(O=n(g,O);!j.done;P++,j=v.next())j=p(O,g,P,j.value,_),j!==null&&(t&&j.alternate!==null&&O.delete(j.key===null?P:j.key),h=s(j,h,P),E===null?k=j:E.sibling=j,E=j);return t&&O.forEach(function(rr){return e(g,rr)}),ee&&jr(g,P),k}function w(g,h,v,_){if(typeof v=="object"&&v!==null&&v.type===gn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case fs:e:{for(var k=v.key,E=h;E!==null;){if(E.key===k){if(k=v.type,k===gn){if(E.tag===7){r(g,E.sibling),h=i(E,v.props.children),h.return=g,g=h;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sr&&xd(k)===E.type){r(g,E.sibling),h=i(E,v.props),h.ref=oi(g,E,v),h.return=g,g=h;break e}r(g,E);break}else e(g,E);E=E.sibling}v.type===gn?(h=Kr(v.props.children,g.mode,_,v.key),h.return=g,g=h):(_=Xs(v.type,v.key,v.props,null,g.mode,_),_.ref=oi(g,h,v),_.return=g,g=_)}return o(g);case pn:e:{for(E=v.key;h!==null;){if(h.key===E)if(h.tag===4&&h.stateNode.containerInfo===v.containerInfo&&h.stateNode.implementation===v.implementation){r(g,h.sibling),h=i(h,v.children||[]),h.return=g,g=h;break e}else{r(g,h);break}else e(g,h);h=h.sibling}h=ja(v,g.mode,_),h.return=g,g=h}return o(g);case sr:return E=v._init,w(g,h,E(v._payload),_)}if(fi(v))return m(g,h,v,_);if(ti(v))return y(g,h,v,_);Es(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,h!==null&&h.tag===6?(r(g,h.sibling),h=i(h,v),h.return=g,g=h):(r(g,h),h=Aa(v,g.mode,_),h.return=g,g=h),o(g)):r(g,h)}return w}var Dn=wp(!0),_p=wp(!1),vo=Tr(null),mo=null,En=null,Vu=null;function Hu(){Vu=En=mo=null}function Ku(t){var e=vo.current;Z(vo),t._currentValue=e}function xl(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function xn(t,e){mo=t,Vu=En=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ge=!0),t.firstContext=null)}function yt(t){var e=t._currentValue;if(Vu!==t)if(t={context:t,memoizedValue:e,next:null},En===null){if(mo===null)throw Error(T(308));En=t,mo.dependencies={lanes:0,firstContext:t}}else En=En.next=t;return e}var Mr=null;function qu(t){Mr===null?Mr=[t]:Mr.push(t)}function bp(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,qu(e)):(r.next=i.next,i.next=r),e.interleaved=r,Xt(t,n)}function Xt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var or=!1;function Gu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,W&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Xt(t,r)}return i=n.interleaved,i===null?(e.next=e,qu(n)):(e.next=i.next,i.next=e),n.interleaved=e,Xt(t,r)}function Ks(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ju(t,r)}}function Rd(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function yo(t,e,r,n){var i=t.updateQueue;or=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(f=e,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=oe({},d,f);break e;case 2:or=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qr|=o,t.lanes=o,t.memoizedState=d}}function Ad(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(T(191,i));i.call(n)}}}var is={},Dt=Tr(is),Wi=Tr(is),Vi=Tr(is);function zr(t){if(t===is)throw Error(T(174));return t}function Ju(t,e){switch(Y(Vi,e),Y(Wi,t),Y(Dt,is),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cl(e,t)}Z(Dt),Y(Dt,e)}function Fn(){Z(Dt),Z(Wi),Z(Vi)}function Ep(t){zr(Vi.current);var e=zr(Dt.current),r=cl(e,t.type);e!==r&&(Y(Wi,t),Y(Dt,r))}function Qu(t){Wi.current===t&&(Z(Dt),Z(Wi))}var ne=Tr(0);function wo(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oa=[];function Yu(){for(var t=0;t<Oa.length;t++)Oa[t]._workInProgressVersionPrimary=null;Oa.length=0}var qs=tr.ReactCurrentDispatcher,Ca=tr.ReactCurrentBatchConfig,Jr=0,se=null,we=null,ke=null,_o=!1,bi=!1,Hi=0,Fw=0;function je(){throw Error(T(321))}function Xu(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!xt(t[r],e[r]))return!1;return!0}function Zu(t,e,r,n,i,s){if(Jr=s,se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qs.current=t===null||t.memoizedState===null?Ww:Vw,t=r(n,i),bi){s=0;do{if(bi=!1,Hi=0,25<=s)throw Error(T(301));s+=1,ke=we=null,e.updateQueue=null,qs.current=Hw,t=r(n,i)}while(bi)}if(qs.current=bo,e=we!==null&&we.next!==null,Jr=0,ke=we=se=null,_o=!1,e)throw Error(T(300));return t}function ec(){var t=Hi!==0;return Hi=0,t}function jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?se.memoizedState=ke=t:ke=ke.next=t,ke}function wt(){if(we===null){var t=se.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=ke===null?se.memoizedState:ke.next;if(e!==null)ke=e,we=t;else{if(t===null)throw Error(T(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},ke===null?se.memoizedState=ke=t:ke=ke.next=t}return ke}function Ki(t,e){return typeof e=="function"?e(t):e}function Pa(t){var e=wt(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=we,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Jr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,se.lanes|=c,Qr|=c}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,xt(n,e.memoizedState)||(Ge=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,se.lanes|=s,Qr|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ia(t){var e=wt(),r=e.queue;if(r===null)throw Error(T(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xt(s,e.memoizedState)||(Ge=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function kp(){}function Tp(t,e){var r=se,n=wt(),i=e(),s=!xt(n.memoizedState,i);if(s&&(n.memoizedState=i,Ge=!0),n=n.queue,tc(Pp.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(r.flags|=2048,qi(9,Cp.bind(null,r,n,i,e),void 0,null),Te===null)throw Error(T(349));Jr&30||Op(r,e,i)}return i}function Op(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Cp(t,e,r,n){e.value=r,e.getSnapshot=n,Ip(e)&&xp(t)}function Pp(t,e,r){return r(function(){Ip(e)&&xp(t)})}function Ip(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!xt(t,r)}catch{return!0}}function xp(t){var e=Xt(t,1);e!==null&&It(e,t,1,-1)}function jd(t){var e=jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:t},e.queue=t,t=t.dispatch=zw.bind(null,se,t),[e.memoizedState,t]}function qi(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=se.updateQueue,e===null?(e={lastEffect:null,stores:null},se.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Rp(){return wt().memoizedState}function Gs(t,e,r,n){var i=jt();se.flags|=t,i.memoizedState=qi(1|e,r,void 0,n===void 0?null:n)}function Mo(t,e,r,n){var i=wt();n=n===void 0?null:n;var s=void 0;if(we!==null){var o=we.memoizedState;if(s=o.destroy,n!==null&&Xu(n,o.deps)){i.memoizedState=qi(e,r,s,n);return}}se.flags|=t,i.memoizedState=qi(1|e,r,s,n)}function $d(t,e){return Gs(8390656,8,t,e)}function tc(t,e){return Mo(2048,8,t,e)}function Ap(t,e){return Mo(4,2,t,e)}function jp(t,e){return Mo(4,4,t,e)}function $p(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Np(t,e,r){return r=r!=null?r.concat([t]):null,Mo(4,4,$p.bind(null,e,t),r)}function rc(){}function Lp(t,e){var r=wt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Xu(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Up(t,e){var r=wt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Xu(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Dp(t,e,r){return Jr&21?(xt(r,e)||(r=Wh(),se.lanes|=r,Qr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ge=!0),t.memoizedState=r)}function Bw(t,e){var r=q;q=r!==0&&4>r?r:4,t(!0);var n=Ca.transition;Ca.transition={};try{t(!1),e()}finally{q=r,Ca.transition=n}}function Fp(){return wt().memoizedState}function Mw(t,e,r){var n=wr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Bp(t))Mp(e,r);else if(r=bp(t,e,r,n),r!==null){var i=Ve();It(r,t,n,i),zp(r,e,n)}}function zw(t,e,r){var n=wr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bp(t))Mp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,xt(a,o)){var l=e.interleaved;l===null?(i.next=i,qu(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=bp(t,e,i,n),r!==null&&(i=Ve(),It(r,t,n,i),zp(r,e,n))}}function Bp(t){var e=t.alternate;return t===se||e!==null&&e===se}function Mp(t,e){bi=_o=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function zp(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ju(t,r)}}var bo={readContext:yt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},Ww={readContext:yt,useCallback:function(t,e){return jt().memoizedState=[t,e===void 0?null:e],t},useContext:yt,useEffect:$d,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Gs(4194308,4,$p.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Gs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gs(4,2,t,e)},useMemo:function(t,e){var r=jt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=jt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Mw.bind(null,se,t),[n.memoizedState,t]},useRef:function(t){var e=jt();return t={current:t},e.memoizedState=t},useState:jd,useDebugValue:rc,useDeferredValue:function(t){return jt().memoizedState=t},useTransition:function(){var t=jd(!1),e=t[0];return t=Bw.bind(null,t[1]),jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=se,i=jt();if(ee){if(r===void 0)throw Error(T(407));r=r()}else{if(r=e(),Te===null)throw Error(T(349));Jr&30||Op(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,$d(Pp.bind(null,n,s,t),[t]),n.flags|=2048,qi(9,Cp.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=jt(),e=Te.identifierPrefix;if(ee){var r=qt,n=Kt;r=(n&~(1<<32-Pt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Hi++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Fw++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Vw={readContext:yt,useCallback:Lp,useContext:yt,useEffect:tc,useImperativeHandle:Np,useInsertionEffect:Ap,useLayoutEffect:jp,useMemo:Up,useReducer:Pa,useRef:Rp,useState:function(){return Pa(Ki)},useDebugValue:rc,useDeferredValue:function(t){var e=wt();return Dp(e,we.memoizedState,t)},useTransition:function(){var t=Pa(Ki)[0],e=wt().memoizedState;return[t,e]},useMutableSource:kp,useSyncExternalStore:Tp,useId:Fp,unstable_isNewReconciler:!1},Hw={readContext:yt,useCallback:Lp,useContext:yt,useEffect:tc,useImperativeHandle:Np,useInsertionEffect:Ap,useLayoutEffect:jp,useMemo:Up,useReducer:Ia,useRef:Rp,useState:function(){return Ia(Ki)},useDebugValue:rc,useDeferredValue:function(t){var e=wt();return we===null?e.memoizedState=t:Dp(e,we.memoizedState,t)},useTransition:function(){var t=Ia(Ki)[0],e=wt().memoizedState;return[t,e]},useMutableSource:kp,useSyncExternalStore:Tp,useId:Fp,unstable_isNewReconciler:!1};function Et(t,e){if(t&&t.defaultProps){e=oe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Rl(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:oe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var zo={isMounted:function(t){return(t=t._reactInternals)?tn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ve(),i=wr(t),s=Gt(n,i);s.payload=e,r!=null&&(s.callback=r),e=mr(t,s,i),e!==null&&(It(e,t,i,n),Ks(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ve(),i=wr(t),s=Gt(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=mr(t,s,i),e!==null&&(It(e,t,i,n),Ks(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ve(),n=wr(t),i=Gt(r,n);i.tag=2,e!=null&&(i.callback=e),e=mr(t,i,n),e!==null&&(It(e,t,n,r),Ks(e,t,n))}};function Nd(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fi(r,n)||!Fi(i,s):!0}function Wp(t,e,r){var n=!1,i=Er,s=e.contextType;return typeof s=="object"&&s!==null?s=yt(s):(i=Qe(e)?qr:Be.current,n=e.contextTypes,s=(n=n!=null)?Ln(t,i):Er),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ld(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&zo.enqueueReplaceState(e,e.state,null)}function Al(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Gu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yt(s):(s=Qe(e)?qr:Be.current,i.context=Ln(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rl(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zo.enqueueReplaceState(i,i.state,null),yo(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bn(t,e){try{var r="",n=e;do r+=wy(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function xa(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function jl(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Kw=typeof WeakMap=="function"?WeakMap:Map;function Vp(t,e,r){r=Gt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Eo||(Eo=!0,Wl=n),jl(t,e)},r}function Hp(t,e,r){r=Gt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){jl(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){jl(t,e),typeof n!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Ud(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Kw;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=o0.bind(null,t,e,r),e.then(t,t))}function Dd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fd(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Gt(-1,1),e.tag=2,mr(r,e,1))),r.lanes|=1),t)}var qw=tr.ReactCurrentOwner,Ge=!1;function ze(t,e,r,n){e.child=t===null?_p(e,null,r,n):Dn(e,t.child,r,n)}function Bd(t,e,r,n,i){r=r.render;var s=e.ref;return xn(e,i),n=Zu(t,e,r,n,s,i),r=ec(),t!==null&&!Ge?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zt(t,e,i)):(ee&&r&&Mu(e),e.flags|=1,ze(t,e,n,i),e.child)}function Md(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!cc(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Kp(t,e,s,n,i)):(t=Xs(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Fi,r(o,n)&&t.ref===e.ref)return Zt(t,e,i)}return e.flags|=1,t=_r(s,n),t.ref=e.ref,t.return=e,e.child=t}function Kp(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Fi(s,n)&&t.ref===e.ref)if(Ge=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Ge=!0);else return e.lanes=t.lanes,Zt(t,e,i)}return $l(t,e,r,n,i)}function qp(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Tn,tt),tt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(Tn,tt),tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Y(Tn,tt),tt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Y(Tn,tt),tt|=n;return ze(t,e,i,r),e.child}function Gp(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function $l(t,e,r,n,i){var s=Qe(r)?qr:Be.current;return s=Ln(e,s),xn(e,i),r=Zu(t,e,r,n,s,i),n=ec(),t!==null&&!Ge?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zt(t,e,i)):(ee&&n&&Mu(e),e.flags|=1,ze(t,e,r,i),e.child)}function zd(t,e,r,n,i){if(Qe(r)){var s=!0;ho(e)}else s=!1;if(xn(e,i),e.stateNode===null)Js(t,e),Wp(e,r,n),Al(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=Qe(r)?qr:Be.current,u=Ln(e,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Ld(e,o,n,u),or=!1;var f=e.memoizedState;o.state=f,yo(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Je.current||or?(typeof c=="function"&&(Rl(e,r,c,n),l=e.memoizedState),(a=or||Nd(e,r,a,n,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Sp(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Et(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=yt(l):(l=Qe(r)?qr:Be.current,l=Ln(e,l));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Ld(e,o,n,l),or=!1,f=e.memoizedState,o.state=f,yo(e,n,o,i);var m=e.memoizedState;a!==d||f!==m||Je.current||or?(typeof p=="function"&&(Rl(e,r,p,n),m=e.memoizedState),(u=or||Nd(e,r,u,n,f,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Nl(t,e,r,n,s,i)}function Nl(t,e,r,n,i,s){Gp(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Cd(e,r,!1),Zt(t,e,s);n=e.stateNode,qw.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Dn(e,t.child,null,s),e.child=Dn(e,null,a,s)):ze(t,e,a,s),e.memoizedState=n.state,i&&Cd(e,r,!0),e.child}function Jp(t){var e=t.stateNode;e.pendingContext?Od(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Od(t,e.context,!1),Ju(t,e.containerInfo)}function Wd(t,e,r,n,i){return Un(),Wu(i),e.flags|=256,ze(t,e,r,n),e.child}var Ll={dehydrated:null,treeContext:null,retryLane:0};function Ul(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qp(t,e,r){var n=e.pendingProps,i=ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Y(ne,i&1),t===null)return Il(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ho(o,n,0,null),t=Kr(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ul(r),e.memoizedState=Ll,t):nc(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Gw(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=_r(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=_r(a,s):(s=Kr(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Ul(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Ll,n}return s=t.child,t=s.sibling,n=_r(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function nc(t,e){return e=Ho({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ks(t,e,r,n){return n!==null&&Wu(n),Dn(e,t.child,null,r),t=nc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gw(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=xa(Error(T(422))),ks(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Ho({mode:"visible",children:n.children},i,0,null),s=Kr(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Dn(e,t.child,null,o),e.child.memoizedState=Ul(o),e.memoizedState=Ll,s);if(!(e.mode&1))return ks(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(T(419)),n=xa(s,n,void 0),ks(t,e,o,n)}if(a=(o&t.childLanes)!==0,Ge||a){if(n=Te,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xt(t,i),It(n,t,i,-1))}return uc(),n=xa(Error(T(421))),ks(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=a0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,st=vr(i.nextSibling),ot=e,ee=!0,Ct=null,t!==null&&(ht[pt++]=Kt,ht[pt++]=qt,ht[pt++]=Gr,Kt=t.id,qt=t.overflow,Gr=e),e=nc(e,n.children),e.flags|=4096,e)}function Vd(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),xl(t.return,e,r)}function Ra(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Yp(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(ze(t,e,n.children,r),n=ne.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vd(t,r,e);else if(t.tag===19)Vd(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Y(ne,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&wo(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Ra(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wo(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Ra(e,!0,r,null,s);break;case"together":Ra(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Js(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Qr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,r=_r(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=_r(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Jw(t,e,r){switch(e.tag){case 3:Jp(e),Un();break;case 5:Ep(e);break;case 1:Qe(e.type)&&ho(e);break;case 4:Ju(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Y(vo,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Y(ne,ne.current&1),e.flags|=128,null):r&e.child.childLanes?Qp(t,e,r):(Y(ne,ne.current&1),t=Zt(t,e,r),t!==null?t.sibling:null);Y(ne,ne.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Yp(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(ne,ne.current),n)break;return null;case 22:case 23:return e.lanes=0,qp(t,e,r)}return Zt(t,e,r)}var Xp,Dl,Zp,eg;Xp=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Dl=function(){};Zp=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,zr(Dt.current);var s=null;switch(r){case"input":i=ol(t,i),n=ol(t,n),s=[];break;case"select":i=oe({},i,{value:void 0}),n=oe({},n,{value:void 0}),s=[];break;case"textarea":i=ul(t,i),n=ul(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=co)}dl(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ai.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&X("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};eg=function(t,e,r,n){r!==n&&(e.flags|=4)};function ai(t,e){if(!ee)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function $e(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Qw(t,e,r){var n=e.pendingProps;switch(zu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(e),null;case 1:return Qe(e.type)&&fo(),$e(e),null;case 3:return n=e.stateNode,Fn(),Z(Je),Z(Be),Yu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ss(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ct!==null&&(Kl(Ct),Ct=null))),Dl(t,e),$e(e),null;case 5:Qu(e);var i=zr(Vi.current);if(r=e.type,t!==null&&e.stateNode!=null)Zp(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(T(166));return $e(e),null}if(t=zr(Dt.current),Ss(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[$t]=e,n[zi]=s,t=(e.mode&1)!==0,r){case"dialog":X("cancel",n),X("close",n);break;case"iframe":case"object":case"embed":X("load",n);break;case"video":case"audio":for(i=0;i<pi.length;i++)X(pi[i],n);break;case"source":X("error",n);break;case"img":case"image":case"link":X("error",n),X("load",n);break;case"details":X("toggle",n);break;case"input":Zc(n,s),X("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},X("invalid",n);break;case"textarea":td(n,s),X("invalid",n)}dl(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&bs(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bs(n.textContent,a,t),i=["children",""+a]):Ai.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&X("scroll",n)}switch(r){case"input":hs(n),ed(n,s,!0);break;case"textarea":hs(n),rd(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=co)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ph(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[$t]=e,t[zi]=n,Xp(t,e,!1,!1),e.stateNode=t;e:{switch(o=fl(r,n),r){case"dialog":X("cancel",t),X("close",t),i=n;break;case"iframe":case"object":case"embed":X("load",t),i=n;break;case"video":case"audio":for(i=0;i<pi.length;i++)X(pi[i],t);i=n;break;case"source":X("error",t),i=n;break;case"img":case"image":case"link":X("error",t),X("load",t),i=n;break;case"details":X("toggle",t),i=n;break;case"input":Zc(t,n),i=ol(t,n),X("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=oe({},n,{value:void 0}),X("invalid",t);break;case"textarea":td(t,n),i=ul(t,n),X("invalid",t);break;default:i=n}dl(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Rh(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ih(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&ji(t,l):typeof l=="number"&&ji(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ai.hasOwnProperty(s)?l!=null&&s==="onScroll"&&X("scroll",t):l!=null&&Cu(t,s,l,o))}switch(r){case"input":hs(t),ed(t,n,!1);break;case"textarea":hs(t),rd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Sr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?On(t,!!n.multiple,s,!1):n.defaultValue!=null&&On(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=co)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $e(e),null;case 6:if(t&&e.stateNode!=null)eg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(T(166));if(r=zr(Vi.current),zr(Dt.current),Ss(e)){if(n=e.stateNode,r=e.memoizedProps,n[$t]=e,(s=n.nodeValue!==r)&&(t=ot,t!==null))switch(t.tag){case 3:bs(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bs(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$t]=e,e.stateNode=n}return $e(e),null;case 13:if(Z(ne),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ee&&st!==null&&e.mode&1&&!(e.flags&128))yp(),Un(),e.flags|=98560,s=!1;else if(s=Ss(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(T(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(T(317));s[$t]=e}else Un(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$e(e),s=!1}else Ct!==null&&(Kl(Ct),Ct=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ne.current&1?be===0&&(be=3):uc())),e.updateQueue!==null&&(e.flags|=4),$e(e),null);case 4:return Fn(),Dl(t,e),t===null&&Bi(e.stateNode.containerInfo),$e(e),null;case 10:return Ku(e.type._context),$e(e),null;case 17:return Qe(e.type)&&fo(),$e(e),null;case 19:if(Z(ne),s=e.memoizedState,s===null)return $e(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)ai(s,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wo(t),o!==null){for(e.flags|=128,ai(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Y(ne,ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&fe()>Mn&&(e.flags|=128,n=!0,ai(s,!1),e.lanes=4194304)}else{if(!n)if(t=wo(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ai(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ee)return $e(e),null}else 2*fe()-s.renderingStartTime>Mn&&r!==1073741824&&(e.flags|=128,n=!0,ai(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fe(),e.sibling=null,r=ne.current,Y(ne,n?r&1|2:r&1),e):($e(e),null);case 22:case 23:return lc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?tt&1073741824&&($e(e),e.subtreeFlags&6&&(e.flags|=8192)):$e(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function Yw(t,e){switch(zu(e),e.tag){case 1:return Qe(e.type)&&fo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fn(),Z(Je),Z(Be),Yu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qu(e),null;case 13:if(Z(ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));Un()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(ne),null;case 4:return Fn(),null;case 10:return Ku(e.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var Ts=!1,Ue=!1,Xw=typeof WeakSet=="function"?WeakSet:Set,x=null;function kn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ae(t,e,n)}else r.current=null}function Fl(t,e,r){try{r()}catch(n){ae(t,e,n)}}var Hd=!1;function Zw(t,e){if(Sl=ao,t=sp(),Bu(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===r&&++u===i&&(a=o),f===s&&++c===n&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(El={focusedElem:t,selectionRange:r},ao=!1,x=e;x!==null;)if(e=x,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,x=t;else for(;x!==null;){e=x;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,g=e.stateNode,h=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Et(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(_){ae(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,x=t;break}x=e.return}return m=Hd,Hd=!1,m}function Si(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fl(e,r,s)}i=i.next}while(i!==n)}}function Wo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Bl(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function tg(t){var e=t.alternate;e!==null&&(t.alternate=null,tg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$t],delete e[zi],delete e[Ol],delete e[Nw],delete e[Lw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rg(t){return t.tag===5||t.tag===3||t.tag===4}function Kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ml(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=co));else if(n!==4&&(t=t.child,t!==null))for(Ml(t,e,r),t=t.sibling;t!==null;)Ml(t,e,r),t=t.sibling}function zl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(zl(t,e,r),t=t.sibling;t!==null;)zl(t,e,r),t=t.sibling}var Ce=null,Tt=!1;function nr(t,e,r){for(r=r.child;r!==null;)ng(t,e,r),r=r.sibling}function ng(t,e,r){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(No,r)}catch{}switch(r.tag){case 5:Ue||kn(r,e);case 6:var n=Ce,i=Tt;Ce=null,nr(t,e,r),Ce=n,Tt=i,Ce!==null&&(Tt?(t=Ce,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ce.removeChild(r.stateNode));break;case 18:Ce!==null&&(Tt?(t=Ce,r=r.stateNode,t.nodeType===8?ka(t.parentNode,r):t.nodeType===1&&ka(t,r),Ui(t)):ka(Ce,r.stateNode));break;case 4:n=Ce,i=Tt,Ce=r.stateNode.containerInfo,Tt=!0,nr(t,e,r),Ce=n,Tt=i;break;case 0:case 11:case 14:case 15:if(!Ue&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fl(r,e,o),i=i.next}while(i!==n)}nr(t,e,r);break;case 1:if(!Ue&&(kn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ae(r,e,a)}nr(t,e,r);break;case 21:nr(t,e,r);break;case 22:r.mode&1?(Ue=(n=Ue)||r.memoizedState!==null,nr(t,e,r),Ue=n):nr(t,e,r);break;default:nr(t,e,r)}}function qd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Xw),e.forEach(function(n){var i=l0.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function _t(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ce=a.stateNode,Tt=!1;break e;case 3:Ce=a.stateNode.containerInfo,Tt=!0;break e;case 4:Ce=a.stateNode.containerInfo,Tt=!0;break e}a=a.return}if(Ce===null)throw Error(T(160));ng(s,o,i),Ce=null,Tt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ae(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ig(e,t),e=e.sibling}function ig(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_t(e,t),At(t),n&4){try{Si(3,t,t.return),Wo(3,t)}catch(y){ae(t,t.return,y)}try{Si(5,t,t.return)}catch(y){ae(t,t.return,y)}}break;case 1:_t(e,t),At(t),n&512&&r!==null&&kn(r,r.return);break;case 5:if(_t(e,t),At(t),n&512&&r!==null&&kn(r,r.return),t.flags&32){var i=t.stateNode;try{ji(i,"")}catch(y){ae(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Oh(i,s),fl(a,o);var u=fl(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Rh(i,d):c==="dangerouslySetInnerHTML"?Ih(i,d):c==="children"?ji(i,d):Cu(i,c,d,u)}switch(a){case"input":al(i,s);break;case"textarea":Ch(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?On(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?On(i,!!s.multiple,s.defaultValue,!0):On(i,!!s.multiple,s.multiple?[]:"",!1))}i[zi]=s}catch(y){ae(t,t.return,y)}}break;case 6:if(_t(e,t),At(t),n&4){if(t.stateNode===null)throw Error(T(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){ae(t,t.return,y)}}break;case 3:if(_t(e,t),At(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ui(e.containerInfo)}catch(y){ae(t,t.return,y)}break;case 4:_t(e,t),At(t);break;case 13:_t(e,t),At(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(oc=fe())),n&4&&qd(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Ue=(u=Ue)||c,_t(e,t),Ue=u):_t(e,t),At(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(x=t,c=t.child;c!==null;){for(d=x=c;x!==null;){switch(f=x,p=f.child,f.tag){case 0:case 11:case 14:case 15:Si(4,f,f.return);break;case 1:kn(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){ae(n,r,y)}}break;case 5:kn(f,f.return);break;case 22:if(f.memoizedState!==null){Jd(d);continue}}p!==null?(p.return=f,x=p):Jd(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xh("display",o))}catch(y){ae(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){ae(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_t(e,t),At(t),n&4&&qd(t);break;case 21:break;default:_t(e,t),At(t)}}function At(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(rg(r)){var n=r;break e}r=r.return}throw Error(T(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ji(i,""),n.flags&=-33);var s=Kd(t);zl(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Kd(t);Ml(t,a,o);break;default:throw Error(T(161))}}catch(l){ae(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function e0(t,e,r){x=t,sg(t)}function sg(t,e,r){for(var n=(t.mode&1)!==0;x!==null;){var i=x,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Ts;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ue;a=Ts;var u=Ue;if(Ts=o,(Ue=l)&&!u)for(x=i;x!==null;)o=x,l=o.child,o.tag===22&&o.memoizedState!==null?Qd(i):l!==null?(l.return=o,x=l):Qd(i);for(;s!==null;)x=s,sg(s),s=s.sibling;x=i,Ts=a,Ue=u}Gd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,x=s):Gd(t)}}function Gd(t){for(;x!==null;){var e=x;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||Wo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ue)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Et(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ad(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ad(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ui(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ue||e.flags&512&&Bl(e)}catch(f){ae(e,e.return,f)}}if(e===t){x=null;break}if(r=e.sibling,r!==null){r.return=e.return,x=r;break}x=e.return}}function Jd(t){for(;x!==null;){var e=x;if(e===t){x=null;break}var r=e.sibling;if(r!==null){r.return=e.return,x=r;break}x=e.return}}function Qd(t){for(;x!==null;){var e=x;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Wo(4,e)}catch(l){ae(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ae(e,i,l)}}var s=e.return;try{Bl(e)}catch(l){ae(e,s,l)}break;case 5:var o=e.return;try{Bl(e)}catch(l){ae(e,o,l)}}}catch(l){ae(e,e.return,l)}if(e===t){x=null;break}var a=e.sibling;if(a!==null){a.return=e.return,x=a;break}x=e.return}}var t0=Math.ceil,So=tr.ReactCurrentDispatcher,ic=tr.ReactCurrentOwner,vt=tr.ReactCurrentBatchConfig,W=0,Te=null,ge=null,Re=0,tt=0,Tn=Tr(0),be=0,Gi=null,Qr=0,Vo=0,sc=0,Ei=null,qe=null,oc=0,Mn=1/0,Wt=null,Eo=!1,Wl=null,yr=null,Os=!1,dr=null,ko=0,ki=0,Vl=null,Qs=-1,Ys=0;function Ve(){return W&6?fe():Qs!==-1?Qs:Qs=fe()}function wr(t){return t.mode&1?W&2&&Re!==0?Re&-Re:Dw.transition!==null?(Ys===0&&(Ys=Wh()),Ys):(t=q,t!==0||(t=window.event,t=t===void 0?16:Qh(t.type)),t):1}function It(t,e,r,n){if(50<ki)throw ki=0,Vl=null,Error(T(185));ts(t,r,n),(!(W&2)||t!==Te)&&(t===Te&&(!(W&2)&&(Vo|=r),be===4&&lr(t,Re)),Ye(t,n),r===1&&W===0&&!(e.mode&1)&&(Mn=fe()+500,Bo&&Or()))}function Ye(t,e){var r=t.callbackNode;Dy(t,e);var n=oo(t,t===Te?Re:0);if(n===0)r!==null&&sd(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&sd(r),e===1)t.tag===0?Uw(Yd.bind(null,t)):gp(Yd.bind(null,t)),jw(function(){!(W&6)&&Or()}),r=null;else{switch(Vh(n)){case 1:r=Au;break;case 4:r=Mh;break;case 16:r=so;break;case 536870912:r=zh;break;default:r=so}r=hg(r,og.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function og(t,e){if(Qs=-1,Ys=0,W&6)throw Error(T(327));var r=t.callbackNode;if(Rn()&&t.callbackNode!==r)return null;var n=oo(t,t===Te?Re:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=To(t,n);else{e=n;var i=W;W|=2;var s=lg();(Te!==t||Re!==e)&&(Wt=null,Mn=fe()+500,Hr(t,e));do try{i0();break}catch(a){ag(t,a)}while(!0);Hu(),So.current=s,W=i,ge!==null?e=0:(Te=null,Re=0,e=be)}if(e!==0){if(e===2&&(i=ml(t),i!==0&&(n=i,e=Hl(t,i))),e===1)throw r=Gi,Hr(t,0),lr(t,n),Ye(t,fe()),r;if(e===6)lr(t,n);else{if(i=t.current.alternate,!(n&30)&&!r0(i)&&(e=To(t,n),e===2&&(s=ml(t),s!==0&&(n=s,e=Hl(t,s))),e===1))throw r=Gi,Hr(t,0),lr(t,n),Ye(t,fe()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(T(345));case 2:$r(t,qe,Wt);break;case 3:if(lr(t,n),(n&130023424)===n&&(e=oc+500-fe(),10<e)){if(oo(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Ve(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tl($r.bind(null,t,qe,Wt),e);break}$r(t,qe,Wt);break;case 4:if(lr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Pt(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*t0(n/1960))-n,10<n){t.timeoutHandle=Tl($r.bind(null,t,qe,Wt),n);break}$r(t,qe,Wt);break;case 5:$r(t,qe,Wt);break;default:throw Error(T(329))}}}return Ye(t,fe()),t.callbackNode===r?og.bind(null,t):null}function Hl(t,e){var r=Ei;return t.current.memoizedState.isDehydrated&&(Hr(t,e).flags|=256),t=To(t,e),t!==2&&(e=qe,qe=r,e!==null&&Kl(e)),t}function Kl(t){qe===null?qe=t:qe.push.apply(qe,t)}function r0(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!xt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~sc,e&=~Vo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Pt(e),n=1<<r;t[r]=-1,e&=~n}}function Yd(t){if(W&6)throw Error(T(327));Rn();var e=oo(t,0);if(!(e&1))return Ye(t,fe()),null;var r=To(t,e);if(t.tag!==0&&r===2){var n=ml(t);n!==0&&(e=n,r=Hl(t,n))}if(r===1)throw r=Gi,Hr(t,0),lr(t,e),Ye(t,fe()),r;if(r===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$r(t,qe,Wt),Ye(t,fe()),null}function ac(t,e){var r=W;W|=1;try{return t(e)}finally{W=r,W===0&&(Mn=fe()+500,Bo&&Or())}}function Yr(t){dr!==null&&dr.tag===0&&!(W&6)&&Rn();var e=W;W|=1;var r=vt.transition,n=q;try{if(vt.transition=null,q=1,t)return t()}finally{q=n,vt.transition=r,W=e,!(W&6)&&Or()}}function lc(){tt=Tn.current,Z(Tn)}function Hr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Aw(r)),ge!==null)for(r=ge.return;r!==null;){var n=r;switch(zu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fo();break;case 3:Fn(),Z(Je),Z(Be),Yu();break;case 5:Qu(n);break;case 4:Fn();break;case 13:Z(ne);break;case 19:Z(ne);break;case 10:Ku(n.type._context);break;case 22:case 23:lc()}r=r.return}if(Te=t,ge=t=_r(t.current,null),Re=tt=e,be=0,Gi=null,sc=Vo=Qr=0,qe=Ei=null,Mr!==null){for(e=0;e<Mr.length;e++)if(r=Mr[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Mr=null}return t}function ag(t,e){do{var r=ge;try{if(Hu(),qs.current=bo,_o){for(var n=se.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}_o=!1}if(Jr=0,ke=we=se=null,bi=!1,Hi=0,ic.current=null,r===null||r.return===null){be=1,Gi=e,ge=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=Re,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Dd(o);if(p!==null){p.flags&=-257,Fd(p,o,a,s,e),p.mode&1&&Ud(s,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){Ud(s,u,e),uc();break e}l=Error(T(426))}}else if(ee&&a.mode&1){var w=Dd(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Fd(w,o,a,s,e),Wu(Bn(l,a));break e}}s=l=Bn(l,a),be!==4&&(be=2),Ei===null?Ei=[s]:Ei.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Vp(s,l,e);Rd(s,g);break e;case 1:a=l;var h=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(yr===null||!yr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=Hp(s,a,e);Rd(s,_);break e}}s=s.return}while(s!==null)}cg(r)}catch(k){e=k,ge===r&&r!==null&&(ge=r=r.return);continue}break}while(!0)}function lg(){var t=So.current;return So.current=bo,t===null?bo:t}function uc(){(be===0||be===3||be===2)&&(be=4),Te===null||!(Qr&268435455)&&!(Vo&268435455)||lr(Te,Re)}function To(t,e){var r=W;W|=2;var n=lg();(Te!==t||Re!==e)&&(Wt=null,Hr(t,e));do try{n0();break}catch(i){ag(t,i)}while(!0);if(Hu(),W=r,So.current=n,ge!==null)throw Error(T(261));return Te=null,Re=0,be}function n0(){for(;ge!==null;)ug(ge)}function i0(){for(;ge!==null&&!Iy();)ug(ge)}function ug(t){var e=fg(t.alternate,t,tt);t.memoizedProps=t.pendingProps,e===null?cg(t):ge=e,ic.current=null}function cg(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Yw(r,e),r!==null){r.flags&=32767,ge=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,ge=null;return}}else if(r=Qw(r,e,tt),r!==null){ge=r;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);be===0&&(be=5)}function $r(t,e,r){var n=q,i=vt.transition;try{vt.transition=null,q=1,s0(t,e,r,n)}finally{vt.transition=i,q=n}return null}function s0(t,e,r,n){do Rn();while(dr!==null);if(W&6)throw Error(T(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Fy(t,s),t===Te&&(ge=Te=null,Re=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Os||(Os=!0,hg(so,function(){return Rn(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=vt.transition,vt.transition=null;var o=q;q=1;var a=W;W|=4,ic.current=null,Zw(t,r),ig(r,t),Tw(El),ao=!!Sl,El=Sl=null,t.current=r,e0(r),xy(),W=a,q=o,vt.transition=s}else t.current=r;if(Os&&(Os=!1,dr=t,ko=i),s=t.pendingLanes,s===0&&(yr=null),jy(r.stateNode),Ye(t,fe()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Eo)throw Eo=!1,t=Wl,Wl=null,t;return ko&1&&t.tag!==0&&Rn(),s=t.pendingLanes,s&1?t===Vl?ki++:(ki=0,Vl=t):ki=0,Or(),null}function Rn(){if(dr!==null){var t=Vh(ko),e=vt.transition,r=q;try{if(vt.transition=null,q=16>t?16:t,dr===null)var n=!1;else{if(t=dr,dr=null,ko=0,W&6)throw Error(T(331));var i=W;for(W|=4,x=t.current;x!==null;){var s=x,o=s.child;if(x.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(x=u;x!==null;){var c=x;switch(c.tag){case 0:case 11:case 15:Si(8,c,s)}var d=c.child;if(d!==null)d.return=c,x=d;else for(;x!==null;){c=x;var f=c.sibling,p=c.return;if(tg(c),c===u){x=null;break}if(f!==null){f.return=p,x=f;break}x=p}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}x=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,x=o;else e:for(;x!==null;){if(s=x,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Si(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,x=g;break e}x=s.return}}var h=t.current;for(x=h;x!==null;){o=x;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,x=v;else e:for(o=h;x!==null;){if(a=x,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wo(9,a)}}catch(k){ae(a,a.return,k)}if(a===o){x=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,x=_;break e}x=a.return}}if(W=i,Or(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(No,t)}catch{}n=!0}return n}finally{q=r,vt.transition=e}}return!1}function Xd(t,e,r){e=Bn(r,e),e=Vp(t,e,1),t=mr(t,e,1),e=Ve(),t!==null&&(ts(t,1,e),Ye(t,e))}function ae(t,e,r){if(t.tag===3)Xd(t,t,r);else for(;e!==null;){if(e.tag===3){Xd(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yr===null||!yr.has(n))){t=Bn(r,t),t=Hp(e,t,1),e=mr(e,t,1),t=Ve(),e!==null&&(ts(e,1,t),Ye(e,t));break}}e=e.return}}function o0(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&r,Te===t&&(Re&r)===r&&(be===4||be===3&&(Re&130023424)===Re&&500>fe()-oc?Hr(t,0):sc|=r),Ye(t,e)}function dg(t,e){e===0&&(t.mode&1?(e=vs,vs<<=1,!(vs&130023424)&&(vs=4194304)):e=1);var r=Ve();t=Xt(t,e),t!==null&&(ts(t,e,r),Ye(t,r))}function a0(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),dg(t,r)}function l0(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(T(314))}n!==null&&n.delete(e),dg(t,r)}var fg;fg=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)Ge=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ge=!1,Jw(t,e,r);Ge=!!(t.flags&131072)}else Ge=!1,ee&&e.flags&1048576&&vp(e,go,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Js(t,e),t=e.pendingProps;var i=Ln(e,Be.current);xn(e,r),i=Zu(null,e,n,t,i,r);var s=ec();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qe(n)?(s=!0,ho(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gu(e),i.updater=zo,e.stateNode=i,i._reactInternals=e,Al(e,n,t,r),e=Nl(null,e,n,!0,s,r)):(e.tag=0,ee&&s&&Mu(e),ze(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Js(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=c0(n),t=Et(n,t),i){case 0:e=$l(null,e,n,t,r);break e;case 1:e=zd(null,e,n,t,r);break e;case 11:e=Bd(null,e,n,t,r);break e;case 14:e=Md(null,e,n,Et(n.type,t),r);break e}throw Error(T(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Et(n,i),$l(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Et(n,i),zd(t,e,n,i,r);case 3:e:{if(Jp(e),t===null)throw Error(T(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Sp(t,e),yo(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bn(Error(T(423)),e),e=Wd(t,e,n,r,i);break e}else if(n!==i){i=Bn(Error(T(424)),e),e=Wd(t,e,n,r,i);break e}else for(st=vr(e.stateNode.containerInfo.firstChild),ot=e,ee=!0,Ct=null,r=_p(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Un(),n===i){e=Zt(t,e,r);break e}ze(t,e,n,r)}e=e.child}return e;case 5:return Ep(e),t===null&&Il(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,kl(n,i)?o=null:s!==null&&kl(n,s)&&(e.flags|=32),Gp(t,e),ze(t,e,o,r),e.child;case 6:return t===null&&Il(e),null;case 13:return Qp(t,e,r);case 4:return Ju(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Dn(e,null,n,r):ze(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Et(n,i),Bd(t,e,n,i,r);case 7:return ze(t,e,e.pendingProps,r),e.child;case 8:return ze(t,e,e.pendingProps.children,r),e.child;case 12:return ze(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Y(vo,n._currentValue),n._currentValue=o,s!==null)if(xt(s.value,o)){if(s.children===i.children&&!Je.current){e=Zt(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Gt(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),xl(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(T(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),xl(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ze(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,xn(e,r),i=yt(i),n=n(i),e.flags|=1,ze(t,e,n,r),e.child;case 14:return n=e.type,i=Et(n,e.pendingProps),i=Et(n.type,i),Md(t,e,n,i,r);case 15:return Kp(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Et(n,i),Js(t,e),e.tag=1,Qe(n)?(t=!0,ho(e)):t=!1,xn(e,r),Wp(e,n,i),Al(e,n,i,r),Nl(null,e,n,!0,t,r);case 19:return Yp(t,e,r);case 22:return qp(t,e,r)}throw Error(T(156,e.tag))};function hg(t,e){return Bh(t,e)}function u0(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(t,e,r,n){return new u0(t,e,r,n)}function cc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function c0(t){if(typeof t=="function")return cc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Iu)return 11;if(t===xu)return 14}return 2}function _r(t,e){var r=t.alternate;return r===null?(r=gt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Xs(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")cc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gn:return Kr(r.children,i,s,e);case Pu:o=8,i|=8;break;case rl:return t=gt(12,r,e,i|2),t.elementType=rl,t.lanes=s,t;case nl:return t=gt(13,r,e,i),t.elementType=nl,t.lanes=s,t;case il:return t=gt(19,r,e,i),t.elementType=il,t.lanes=s,t;case Eh:return Ho(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bh:o=10;break e;case Sh:o=9;break e;case Iu:o=11;break e;case xu:o=14;break e;case sr:o=16,n=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=gt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Kr(t,e,r,n){return t=gt(7,t,n,e),t.lanes=r,t}function Ho(t,e,r,n){return t=gt(22,t,n,e),t.elementType=Eh,t.lanes=r,t.stateNode={isHidden:!1},t}function Aa(t,e,r){return t=gt(6,t,null,e),t.lanes=r,t}function ja(t,e,r){return e=gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function d0(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dc(t,e,r,n,i,s,o,a,l){return t=new d0(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gu(s),t}function f0(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function pg(t){if(!t)return Er;t=t._reactInternals;e:{if(tn(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var r=t.type;if(Qe(r))return pp(t,r,e)}return e}function gg(t,e,r,n,i,s,o,a,l){return t=dc(r,n,!0,t,i,s,o,a,l),t.context=pg(null),r=t.current,n=Ve(),i=wr(r),s=Gt(n,i),s.callback=e??null,mr(r,s,i),t.current.lanes=i,ts(t,i,n),Ye(t,n),t}function Ko(t,e,r,n){var i=e.current,s=Ve(),o=wr(i);return r=pg(r),e.context===null?e.context=r:e.pendingContext=r,e=Gt(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=mr(i,e,o),t!==null&&(It(t,i,o,s),Ks(t,i,o)),o}function Oo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function fc(t,e){Zd(t,e),(t=t.alternate)&&Zd(t,e)}function h0(){return null}var vg=typeof reportError=="function"?reportError:function(t){console.error(t)};function hc(t){this._internalRoot=t}qo.prototype.render=hc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));Ko(t,e,null,null)};qo.prototype.unmount=hc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yr(function(){Ko(null,t,null,null)}),e[Yt]=null}};function qo(t){this._internalRoot=t}qo.prototype.unstable_scheduleHydration=function(t){if(t){var e=qh();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ar.length&&e!==0&&e<ar[r].priority;r++);ar.splice(r,0,t),r===0&&Jh(t)}};function pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Go(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ef(){}function p0(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Oo(o);s.call(u)}}var o=gg(e,n,t,0,null,!1,!1,"",ef);return t._reactRootContainer=o,t[Yt]=o.current,Bi(t.nodeType===8?t.parentNode:t),Yr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=Oo(l);a.call(u)}}var l=dc(t,0,!1,null,null,!1,!1,"",ef);return t._reactRootContainer=l,t[Yt]=l.current,Bi(t.nodeType===8?t.parentNode:t),Yr(function(){Ko(e,l,r,n)}),l}function Jo(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Oo(o);a.call(l)}}Ko(e,o,t,i)}else o=p0(r,e,t,i,n);return Oo(o)}Hh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=hi(e.pendingLanes);r!==0&&(ju(e,r|1),Ye(e,fe()),!(W&6)&&(Mn=fe()+500,Or()))}break;case 13:Yr(function(){var n=Xt(t,1);if(n!==null){var i=Ve();It(n,t,1,i)}}),fc(t,1)}};$u=function(t){if(t.tag===13){var e=Xt(t,134217728);if(e!==null){var r=Ve();It(e,t,134217728,r)}fc(t,134217728)}};Kh=function(t){if(t.tag===13){var e=wr(t),r=Xt(t,e);if(r!==null){var n=Ve();It(r,t,e,n)}fc(t,e)}};qh=function(){return q};Gh=function(t,e){var r=q;try{return q=t,e()}finally{q=r}};pl=function(t,e,r){switch(e){case"input":if(al(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Fo(n);if(!i)throw Error(T(90));Th(n),al(n,i)}}}break;case"textarea":Ch(t,r);break;case"select":e=r.value,e!=null&&On(t,!!r.multiple,e,!1)}};$h=ac;Nh=Yr;var g0={usingClientEntryPoint:!1,Events:[ns,wn,Fo,Ah,jh,ac]},li={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v0={bundleType:li.bundleType,version:li.version,rendererPackageName:li.rendererPackageName,rendererConfig:li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dh(t),t===null?null:t.stateNode},findFiberByHostInstance:li.findFiberByHostInstance||h0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cs.isDisabled&&Cs.supportsFiber)try{No=Cs.inject(v0),Ut=Cs}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g0;lt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pc(e))throw Error(T(200));return f0(t,e,null,r)};lt.createRoot=function(t,e){if(!pc(t))throw Error(T(299));var r=!1,n="",i=vg;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dc(t,1,!1,null,null,r,!1,n,i),t[Yt]=e.current,Bi(t.nodeType===8?t.parentNode:t),new hc(e)};lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Dh(e),t=t===null?null:t.stateNode,t};lt.flushSync=function(t){return Yr(t)};lt.hydrate=function(t,e,r){if(!Go(e))throw Error(T(200));return Jo(null,t,e,!0,r)};lt.hydrateRoot=function(t,e,r){if(!pc(t))throw Error(T(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=vg;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=gg(e,null,t,1,r??null,i,!1,s,o),t[Yt]=e.current,Bi(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new qo(e)};lt.render=function(t,e,r){if(!Go(e))throw Error(T(200));return Jo(null,t,e,!1,r)};lt.unmountComponentAtNode=function(t){if(!Go(t))throw Error(T(40));return t._reactRootContainer?(Yr(function(){Jo(null,null,t,!1,function(){t._reactRootContainer=null,t[Yt]=null})}),!0):!1};lt.unstable_batchedUpdates=ac;lt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Go(r))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return Jo(t,e,r,!1,n)};lt.version="18.3.1-next-f1338f8080-20240426";function mg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mg)}catch(t){console.error(t)}}mg(),mh.exports=lt;var m0=mh.exports,tf=m0;el.createRoot=tf.createRoot,el.hydrateRoot=tf.hydrateRoot;const y0=({logoText:t="Guardian V2",navItems:e=[],rightSlot:r})=>I.jsxs("header",{className:"guardian-header",children:[I.jsx("div",{className:"guardian-logo",children:t}),e.length>0&&I.jsx("nav",{className:"guardian-nav",children:e.map(n=>I.jsx("button",{type:"button",className:`guardian-nav__item${n.active?" guardian-nav__item--active":""}`,onClick:n.onClick,children:n.label},n.label))}),r]}),w0=({value:t,options:e,onChange:r})=>I.jsx("div",{className:"guardian-toggle",children:e.map(n=>I.jsx("button",{type:"button",className:`guardian-toggle__option${t===n.value?" is-active":""}`,onClick:()=>r(n.value),children:n.label},String(n.value)))}),_0=({title:t,meta:e,metrics:r=[],actions:n=[],children:i,className:s=""})=>I.jsxs("section",{className:`guardian-section guardian-hero-card ${s}`.trim(),children:[I.jsxs("div",{className:"guardian-hero",children:[I.jsxs("div",{children:[I.jsx("h2",{children:t}),e&&I.jsx("p",{className:"guardian-hero__meta",children:e})]}),I.jsxs("div",{className:"guardian-hero__metrics",children:[r.length>0&&I.jsx(b0,{metrics:r}),n.length>0&&I.jsx("div",{className:"guardian-hero__actions",children:n.map(o=>I.jsx(ql,{...o},o.label))})]})]}),i]}),b0=({metrics:t})=>I.jsx("div",{className:"guardian-metric-grid",children:t.map(e=>I.jsxs("div",{className:"guardian-metric",children:[I.jsx("span",{className:"guardian-metric__label",children:e.label}),I.jsx("span",{className:"guardian-metric__value",children:e.value}),e.description&&I.jsx("span",{className:"guardian-metric__description",children:e.description})]},e.label))}),ql=({label:t,variant:e="secondary",onClick:r,disabled:n})=>I.jsx("button",{type:"button",className:`guardian-btn guardian-btn--${e}`,onClick:r,disabled:n,children:t}),S0=[{id:"insight-001",type:"time_anomaly",title:" 3.2",highlight:" 19:00-20:00 ",severity:"warning",metricValue:3.2,metricUnit:"",trend:"up",ctaLabel:"",ctaAction:"open:time_anomaly:insight-001",actions:[{label:"",action:"open:time_anomaly:insight-001",variant:"secondary"}]},{id:"insight-002",type:"dish_issue",title:" TF-IDF 2.1",highlight:" 7  12  -0.45",severity:"critical",metricValue:2.1,metricUnit:"tfidf",trend:"up",ctaLabel:"",ctaAction:"action:create_task:dish_issue:insight-002",actions:[{label:"",action:"action:create_task:dish_issue:insight-002"},{label:"",action:"open:reviews:dish_issue:insight-002",variant:"ghost"}]},{id:"insight-003",type:"competitor_win_time",title:"",highlight:" +68% -15%",severity:"warning",metricValue:68,metricUnit:"%",trend:"up",ctaLabel:"",ctaAction:"nav:/apps/v2-competitors?focus=insight-003",actions:[{label:"",action:"nav:/apps/v2-competitors?focus=insight-003",variant:"primary"}]}],E0=[{id:"event-20241030-01",timestamp:"2024-10-30T03:20:00Z",summary:"",linkedInsightType:"dish_issue",recommendedAction:""},{id:"event-20241029-02",timestamp:"2024-10-29T11:05:00Z",summary:"",linkedInsightType:"competitor_win_time"}],k0=[{reportId:"rpt-20241030-a1",reportDate:"2024-10-30",generatedAt:"2024-10-30T03:30:00Z",accountName:" ",coverageScore:89,aiSpendUsd:2.45,planTier:"pro",insights:S0}],T0={data:k0,timeline:E0,pagination:{cursor:null,hasNext:!1,total:1},meta:{generatedAt:"2024-10-30T03:30:10Z",requestId:"mock-request-guardian-reports"}},O0=async(t={})=>Promise.resolve(T0);var Gl=function(t,e){return Gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Gl(t,e)};function U(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var J=function(){return J=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},J.apply(this,arguments)};function Gn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function yg(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function wg(t,e){return function(r,n){e(r,n,t)}}function _g(t,e,r,n,i,s){function o(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,f=!1,p=r.length-1;p>=0;p--){var m={};for(var y in n)m[y]=y==="access"?{}:n[y];for(var y in n.access)m.access[y]=n.access[y];m.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(g||null))};var w=(0,r[p])(a==="accessor"?{get:c.get,set:c.set}:c[l],m);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=o(w.get))&&(c.get=d),(d=o(w.set))&&(c.set=d),(d=o(w.init))&&i.unshift(d)}else(d=o(w))&&(a==="field"?i.unshift(d):c[l]=d)}u&&Object.defineProperty(u,n.name,c),f=!0}function bg(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function Sg(t){return typeof t=="symbol"?t:"".concat(t)}function Eg(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function kg(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function b(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})}function C(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Qo=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Tg(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Qo(e,t,r)}function er(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Og(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(F(arguments[e]));return t}function Cg(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function ie(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function zn(t){return this instanceof zn?(this.v=t,this):new zn(t)}function Pg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(m){return Promise.resolve(m).then(p,d)}}function a(p,m){n[p]&&(i[p]=function(y){return new Promise(function(w,g){s.push([p,y,w,g])>1||l(p,y)})},m&&(i[p]=m(i[p])))}function l(p,m){try{u(n[p](m))}catch(y){f(s[0][3],y)}}function u(p){p.value instanceof zn?Promise.resolve(p.value.v).then(c,d):f(s[0][2],p)}function c(p){l("next",p)}function d(p){l("throw",p)}function f(p,m){p(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Ig(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:zn(t[i](o)),done:!1}:s?s(o):o}:s}}function xg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof er=="function"?er(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}function gc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var C0=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Jl=function(t){return Jl=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Jl(t)};function Rg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Jl(t),n=0;n<r.length;n++)r[n]!=="default"&&Qo(e,t,r[n]);return C0(e,t),e}function Ag(t){return t&&t.__esModule?t:{default:t}}function jg(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function $g(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function Ng(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Lg(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var P0=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Ug(t){function e(s){t.error=t.hasError?new P0(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Dg(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):t}const I0={__extends:U,__assign:J,__rest:Gn,__decorate:yg,__param:wg,__esDecorate:_g,__runInitializers:bg,__propKey:Sg,__setFunctionName:Eg,__metadata:kg,__awaiter:b,__generator:C,__createBinding:Qo,__exportStar:Tg,__values:er,__read:F,__spread:Og,__spreadArrays:Cg,__spreadArray:ie,__await:zn,__asyncGenerator:Pg,__asyncDelegator:Ig,__asyncValues:xg,__makeTemplateObject:gc,__importStar:Rg,__importDefault:Ag,__classPrivateFieldGet:jg,__classPrivateFieldSet:$g,__classPrivateFieldIn:Ng,__addDisposableResource:Lg,__disposeResources:Ug,__rewriteRelativeImportExtension:Dg},x0=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Lg,get __assign(){return J},__asyncDelegator:Ig,__asyncGenerator:Pg,__asyncValues:xg,__await:zn,__awaiter:b,__classPrivateFieldGet:jg,__classPrivateFieldIn:Ng,__classPrivateFieldSet:$g,__createBinding:Qo,__decorate:yg,__disposeResources:Ug,__esDecorate:_g,__exportStar:Tg,__extends:U,__generator:C,__importDefault:Ag,__importStar:Rg,__makeTemplateObject:gc,__metadata:kg,__param:wg,__propKey:Sg,__read:F,__rest:Gn,__rewriteRelativeImportExtension:Dg,__runInitializers:bg,__setFunctionName:Eg,__spread:Og,__spreadArray:ie,__spreadArrays:Cg,__values:er,default:I0},Symbol.toStringTag,{value:"Module"})),R0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class vc extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class rf extends vc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nf extends vc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class sf extends vc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ql;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ql||(Ql={}));class A0{constructor(e,{headers:r={},customFetch:n,region:i=Ql.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=R0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return b(this,arguments,void 0,function*(r,n={}){var i;try{const{headers:s,method:o,body:a,signal:l}=n;let u={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${r}`);c&&c!=="any"&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(u["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(u["Content-Type"]="application/json",f=JSON.stringify(a)):f=a;const p=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:f,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new rf(g)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new nf(p);if(!p.ok)throw new sf(p);let y=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield p.json():y==="application/octet-stream"||y==="application/pdf"?w=yield p.blob():y==="text/event-stream"?w=p:y==="multipart/form-data"?w=yield p.formData():w=yield p.text(),{data:w,error:null,response:p}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new rf(s)}:{data:null,error:s,response:s instanceof sf||s instanceof nf?s.context:void 0}}})}}var We={};const Jn=Vm(x0);var Ps={},Is={},xs={},Rs={},As={},js={},of;function Fg(){if(of)return js;of=1,Object.defineProperty(js,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return js.default=t,js}var af;function Bg(){if(af)return As;af=1,Object.defineProperty(As,"__esModule",{value:!0});const e=Jn.__importDefault(Fg());class r{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,c,d,f;let p=null,m=null,y=null,w=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const k=await l.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?m=k:m=JSON.parse(k))}const v=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),_=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");v&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,y=null,w=406,g="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const v=await l.text();try{p=JSON.parse(v),Array.isArray(p)&&l.status===404&&(m=[],p=null,w=200,g="OK")}catch{l.status===404&&v===""?(w=204,g="No Content"):p={message:v}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,w=200,g="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:m,count:y,status:w,statusText:g}});return this.shouldThrowOnError||(a=a.catch(l=>{var u,c,d;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(c=l==null?void 0:l.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(d=l==null?void 0:l.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(i,s)}returns(){return this}overrideTypes(){return this}}return As.default=r,As}var lf;function Mg(){if(lf)return Rs;lf=1,Object.defineProperty(Rs,"__esModule",{value:!0});const e=Jn.__importDefault(Bg());class r extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const d=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Rs.default=r,Rs}var uf;function mc(){if(uf)return xs;uf=1,Object.defineProperty(xs,"__esModule",{value:!0});const e=Jn.__importDefault(Mg()),r=new RegExp("[,()]");class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${u}fts${c}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}}return xs.default=n,xs}var cf;function zg(){if(cf)return Is;cf=1,Object.defineProperty(Is,"__esModule",{value:!0});const e=Jn.__importDefault(mc());class r{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",c),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Is.default=r,Is}var df;function j0(){if(df)return Ps;df=1,Object.defineProperty(Ps,"__esModule",{value:!0});const t=Jn,e=t.__importDefault(zg()),r=t.__importDefault(mc());class n{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new n(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:u}={}){var c;let d;const f=new URL(`${this.url}/rpc/${s}`);let p;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{f.searchParams.append(y,w)})):(d="POST",p=o);const m=new Headers(this.headers);return u&&m.set("Prefer",`count=${u}`),new r.default({method:d,url:f,headers:m,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Ps.default=n,Ps}Object.defineProperty(We,"__esModule",{value:!0});var Wg=We.PostgrestError=Zg=We.PostgrestBuilder=Yg=We.PostgrestTransformBuilder=Jg=We.PostgrestFilterBuilder=qg=We.PostgrestQueryBuilder=Hg=We.PostgrestClient=void 0;const Qn=Jn,Vg=Qn.__importDefault(j0());var Hg=We.PostgrestClient=Vg.default;const Kg=Qn.__importDefault(zg());var qg=We.PostgrestQueryBuilder=Kg.default;const Gg=Qn.__importDefault(mc());var Jg=We.PostgrestFilterBuilder=Gg.default;const Qg=Qn.__importDefault(Mg());var Yg=We.PostgrestTransformBuilder=Qg.default;const Xg=Qn.__importDefault(Bg());var Zg=We.PostgrestBuilder=Xg.default;const ev=Qn.__importDefault(Fg());Wg=We.PostgrestError=ev.default;var tv=We.default={PostgrestClient:Vg.default,PostgrestQueryBuilder:Kg.default,PostgrestFilterBuilder:Gg.default,PostgrestTransformBuilder:Qg.default,PostgrestBuilder:Xg.default,PostgrestError:ev.default};const $0=zm({__proto__:null,get PostgrestBuilder(){return Zg},get PostgrestClient(){return Hg},get PostgrestError(){return Wg},get PostgrestFilterBuilder(){return Jg},get PostgrestQueryBuilder(){return qg},get PostgrestTransformBuilder(){return Yg},default:tv},[We]),{PostgrestClient:N0,PostgrestQueryBuilder:Gk,PostgrestFilterBuilder:Jk,PostgrestTransformBuilder:Qk,PostgrestBuilder:Yk,PostgrestError:Xk}=tv||$0;class L0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const U0="2.80.0",D0=`realtime-js/${U0}`,F0="1.0.0",Yl=1e4,B0=1e3,M0=100;var Ti;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ti||(Ti={}));var ye;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ye||(ye={}));var Ot;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ot||(Ot={}));var Xl;(function(t){t.websocket="websocket"})(Xl||(Xl={}));var Lr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Lr||(Lr={}));class z0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class rv{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Q||(Q={}));const ff=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=W0(o,t,e,i),s),{}):{}},W0=(t,e,r,n)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=r[t];return s&&!n.includes(s)?nv(s,o):Zl(o)},nv=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return q0(e,r)}switch(t){case Q.bool:return V0(e);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return H0(e);case Q.json:case Q.jsonb:return K0(e);case Q.timestamp:return G0(e);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return Zl(e);default:return Zl(e)}},Zl=t=>t,V0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},H0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},K0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},q0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>nv(e,a))}return t},G0=t=>typeof t=="string"?t.replace(" ","T"):t,iv=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class $a{constructor(e,r,n={},i=Yl){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hf||(hf={}));class Oi{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oi.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Oi.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Oi.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const f=c.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),m=c.filter(w=>p.indexOf(w.presence_ref)<0),y=d.filter(w=>f.indexOf(w.presence_ref)<0);m.length>0&&(a[u]=m),y.length>0&&(l[u]=y)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(p=>p.presence_ref),f=c.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(pf||(pf={}));var Ci;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ci||(Ci={}));var Vt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Vt||(Vt={}));class yc{constructor(e,r={config:{}},n){var i,s;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new $a(this,Ot.join,this.params,this.timeout),this.rejoinTimer=new rv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ye.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ot.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Oi(this),this.broadcastEndpointURL=iv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ye.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Ci.PRESENCE]&&this.bindings[Ci.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Vt.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Vt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e(Vt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,g=[];for(let h=0;h<w;h++){const v=y[h],{filter:{event:_,schema:k,table:E,filter:O}}=v,P=p&&p[h];if(P&&P.event===_&&P.schema===k&&P.table===E&&P.filter===O)g.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),this.state=ye.errored,e==null||e(Vt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Vt.SUBSCRIBED);return}}).receive("error",p=>{this.state=ye.errored,e==null||e(Vt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Vt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===ye.joined&&e===Ci.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ye.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ot.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new $a(this,Ot.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ye.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new $a(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>M0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Ot;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,y,w;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((w=(y=p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var m,y,w,g,h,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,k=(m=p.filter)===null||m===void 0?void 0:m.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(h=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:y,table:w,commit_timestamp:g,type:h,errors:v}=m;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:g,eventType:h,new:{},old:{},errors:v}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===ye.closed}_isJoined(){return this.state===ye.joined}_isJoining(){return this.state===ye.joining}_isLeaving(){return this.state===ye.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&yc.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ot.close,{},e)}_onError(e){this._on(Ot.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ye.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ff(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ff(e.columns,e.old_record)),r}}const Na=()=>{},$s={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},J0=[1e3,2e3,5e3,1e4],Q0=1e4,Y0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class X0{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yl,this.transport=null,this.heartbeatIntervalMs=$s.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Na,this.ref=0,this.reconnectTimer=null,this.logger=Na,this.conn=null,this.sendBuffer=[],this.serializer=new z0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Xl.websocket}`,this.httpEndpoint=iv(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=L0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:F0}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ti.connecting:return Lr.Connecting;case Ti.open:return Lr.Open;case Ti.closing:return Lr.Closing;default:return Lr.Closed}}isConnected(){return this.connectionState()===Lr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new yc(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(B0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},$s.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=r,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ot.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Y0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:D0};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ot.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new rv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$s.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,o,a,l,u,c;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Yl,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:$s.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Na,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>J0[d-1]||Q0,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(d,f)=>f(JSON.stringify(d)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class wc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function re(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Z0 extends wc{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class eu extends wc{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const _c=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),e_=()=>Response,tu=t=>{if(Array.isArray(t))return t.map(r=>tu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=tu(n)}),e},t_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},La=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},r_=(t,e,r)=>b(void 0,void 0,void 0,function*(){const n=yield e_();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new Z0(La(i),s,o))}).catch(i=>{e(new eu(La(i),i))}):e(new eu(La(t),t))}),n_=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(t_(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function ss(t,e,r,n,i,s){return b(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,n_(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>r_(l,a,n))})})}function Ji(t,e,r,n){return b(this,void 0,void 0,function*(){return ss(t,"GET",e,r,n)})}function kt(t,e,r,n,i){return b(this,void 0,void 0,function*(){return ss(t,"POST",e,n,i,r)})}function ru(t,e,r,n,i){return b(this,void 0,void 0,function*(){return ss(t,"PUT",e,n,i,r)})}function i_(t,e,r,n){return b(this,void 0,void 0,function*(){return ss(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function bc(t,e,r,n,i){return b(this,void 0,void 0,function*(){return ss(t,"DELETE",e,n,i,r)})}class s_{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return b(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(re(e))return{data:null,error:e};throw e}})}}var sv;class o_{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[sv]="BlobDownloadBuilder",this.promise=null}asStream(){return new s_(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return b(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(re(e))return{data:null,error:e};throw e}})}}sv=Symbol.toStringTag;const a_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l_{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=_c(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return b(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},gf),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(r),c=this._getFinalPath(u),d=yield(e=="PUT"?ru:kt)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}upload(e,r,n){return b(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return b(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:gf.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield ru(this.fetch,a.toString(),l,{headers:c});return{data:{path:s,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(re(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return b(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield kt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new wc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}update(e,r,n){return b(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return b(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(re(i))return{data:null,error:i};throw i}})}copy(e,r,n){return b(this,void 0,void 0,function*(){try{return{data:{path:(yield kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(re(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return b(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield kt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(re(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return b(this,void 0,void 0,function*(){try{const i=yield kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(re(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>Ji(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new o_(l,this.shouldThrowOnError)}info(e){return b(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ji(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:tu(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}exists(e){return b(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield i_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n)&&n instanceof eu){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return b(this,void 0,void 0,function*(){try{return{data:yield bc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}list(e,r,n){return b(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},a_),r),{prefix:e||""});return{data:yield kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(re(i))return{data:null,error:i};throw i}})}listV2(e,r){return b(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const ov="2.80.0",av={"X-Client-Info":`storage-js/${ov}`};class u_{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},av),r),this.fetch=_c(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return b(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Ji(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}getBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}createBucket(e){return b(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(re(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return b(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}emptyBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}deleteBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield bc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class c_{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},av),r),this.fetch=_c(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}listBuckets(e){return b(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Ji(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}deleteBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield bc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}}const Sc={"X-Client-Info":`storage-js/${ov}`,"Content-Type":"application/json"};class lv extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function nt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Ua extends lv{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class d_ extends lv{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var vf;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(vf||(vf={}));const Ec=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),f_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),h_=(t,e,r)=>b(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Ua(mf(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new Ua(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new Ua(a,i,o))}}else e(new d_(mf(t),t))}),p_=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(f_(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function g_(t,e,r,n,i,s){return b(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,p_(e,n,i,s)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>h_(l,a,n))})})}function it(t,e,r,n,i){return b(this,void 0,void 0,function*(){return g_(t,"POST",e,n,i,r)})}class v_{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Sc),r),this.fetch=Ec(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return b(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getIndex(e,r){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}listIndexes(e){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return b(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}}class m_{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Sc),r),this.fetch=Ec(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return b(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield it(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getVectors(e){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}listVectors(e){return b(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield it(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}queryVectors(e){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteVectors(e){return b(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield it(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}}class y_{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Sc),r),this.fetch=Ec(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return b(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}listBuckets(){return b(this,arguments,void 0,function*(e={}){try{return{data:yield it(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return b(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}}class w_ extends y_{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new __(this.url,this.headers,e,this.fetch)}}class __ extends v_{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return b(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return b(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return b(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return b(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new b_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class b_ extends m_{constructor(e,r,n,i,s){super(e,r,s),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return b(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return b(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return b(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return b(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return b(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class S_ extends u_{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new l_(this.url,this.headers,e,this.fetch)}get vectors(){return new w_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new c_(this.url+"/iceberg",this.headers,this.fetch)}}const E_="2.80.0";let gi="";typeof Deno<"u"?gi="deno":typeof document<"u"?gi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gi="react-native":gi="node";const k_={"X-Client-Info":`supabase-js-${gi}/${E_}`},T_={headers:k_},O_={schema:"public"},C_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P_={},I_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),x_=()=>Headers,R_=(t,e,r)=>{const n=I_(r),i=x_();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:u}))}};function A_(t){return t.endsWith("/")?t:t+"/"}function j_(t,e){var r,n;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:d}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function $_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(A_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const uv="2.80.0",cn=30*1e3,nu=3,Da=nu*cn,N_="http://localhost:9999",L_="supabase.auth.token",U_={"X-Client-Info":`gotrue-js/${uv}`},iu="X-Supabase-Api-Version",cv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},D_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,F_=10*60*1e3;class Qi extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function A(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class B_ extends Qi{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function M_(t){return A(t)&&t.name==="AuthApiError"}class Ur extends Qi{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Cr extends Qi{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class bt extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function z_(t){return A(t)&&t.name==="AuthSessionMissingError"}class sn extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ns extends Cr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ls extends Cr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function W_(t){return A(t)&&t.name==="AuthImplicitGrantRedirectError"}class yf extends Cr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class su extends Cr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Fa(t){return A(t)&&t.name==="AuthRetryableFetchError"}class wf extends Cr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ou extends Cr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_f=` 	
\r=`.split(""),V_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_f.length;e+=1)t[_f[e].charCodeAt(0)]=-2;for(let e=0;e<Co.length;e+=1)t[Co[e].charCodeAt(0)]=e;return t})();function bf(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Co[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Co[n]),e.queuedBits-=6}}function dv(t,e,r){const n=V_[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Sf(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{q_(o,n,r)};for(let o=0;o<t.length;o+=1)dv(t.charCodeAt(o),i,s);return e.join("")}function H_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function K_(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}H_(n,e)}}function q_(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function An(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)dv(t.charCodeAt(i),r,n);return new Uint8Array(e)}function G_(t){const e=[];return K_(t,r=>e.push(r)),new Uint8Array(e)}function Wr(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>bf(i,r,n)),bf(null,r,n),e.join("")}function J_(t){return Math.round(Date.now()/1e3)+t}function Q_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Le=()=>typeof window<"u"&&typeof document<"u",xr={tested:!1,writable:!1},fv=()=>{if(!Le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xr.tested)return xr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xr.tested=!0,xr.writable=!0}catch{xr.tested=!0,xr.writable=!1}return xr.writable};function Y_(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const hv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),X_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",dn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Rr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ir=async(t,e)=>{await t.removeItem(e)};class Yo{constructor(){this.promise=new Yo.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Yo.promiseConstructor=Promise;function Ba(t){const e=t.split(".");if(e.length!==3)throw new ou("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!D_.test(e[n]))throw new ou("JWT not in base64url format");return{header:JSON.parse(Sf(e[0])),payload:JSON.parse(Sf(e[1])),signature:An(e[2]),raw:{header:e[0],payload:e[1]}}}async function Z_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function eb(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function tb(t){return("0"+t.toString(16)).substr(-2)}function rb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,tb).join("")}async function nb(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function ib(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await nb(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function on(t,e,r=!1){const n=rb();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await dn(t,`${e}-code-verifier`,i);const s=await ib(n);return[s,n===s?"plain":"s256"]}const sb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ob(t){const e=t.headers.get(iu);if(!e||!e.match(sb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ab(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function lb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ub=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function an(t){if(!ub.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ma(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cb(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function Ef(t){return JSON.parse(JSON.stringify(t))}const Nr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),db=[502,503,504];async function kf(t){var e;if(!X_(t))throw new su(Nr(t),0);if(db.includes(t.status))throw new su(Nr(t),t.status);let r;try{r=await t.json()}catch(s){throw new Ur(Nr(s),s)}let n;const i=ob(t);if(i&&i.getTime()>=cv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new wf(Nr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new bt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new wf(Nr(r),t.status,r.weak_password.reasons);throw new B_(Nr(r),t.status||500,n)}const fb=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function N(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[iu]||(s[iu]=cv["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await hb(t,e,r+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function hb(t,e,r,n,i,s){const o=fb(e,n,i,s);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new su(Nr(l),0)}if(a.ok||await kf(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await kf(l)}}function St(t){var e;let r=null;vb(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=J_(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Tf(t){const e=St(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ur(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function pb(t){return{data:t,error:null}}function gb(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,o=Gn(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Of(t){return t}function vb(t){return t.access_token&&t.refresh_token&&t.expires_in}const za=["global","local","others"];class mb{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=hv(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=za[0]){if(za.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${za.join(", ")}`);try{return await N(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(A(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await N(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ur})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Gn(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await N(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:gb,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(A(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await N(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ur})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await N(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Of});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(A(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){an(e);try{return await N(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ur})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){an(e);try{return await N(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ur})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){an(e);try{return await N(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ur})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){an(e.userId);try{const{data:r,error:n}=await N(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _deleteFactor(e){an(e.userId),an(e.id);try{return{data:await N(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await N(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Of});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(A(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await N(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await N(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await N(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(A(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await N(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await N(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}}function Cf(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const ln={debug:!!(globalThis&&fv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yb extends pv{}async function wb(t,e,r){ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ln.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ln.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new yb(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ln.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function _b(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function bb(t){return parseInt(t,16)}function Sb(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Eb(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=gv(t.address),m=c?`${c}://${n}`:n,y=t.statement?`${t.statement}
`:"",w=`${m} wants you to sign in with your Ethereum account:
${p}

${y}`;let g=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let h=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);h+=`
- ${v}`}g+=h}return`${w}
${g}`}class pe extends Error{constructor({message:e,code:r,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class Po extends pe{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function kb({error:t,options:e}){var r,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new pe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new pe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new pe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new pe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(vv(o)){if(s.rp.id!==o)return new pe({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new pe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Tb({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new pe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(vv(n)){if(r.rpId!==n)return new pe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Ob{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Cb=new Ob;function Pb(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Gn(t,["challenge","user","excludeCredentials"]),s=An(e).buffer,o=Object.assign(Object.assign({},r),{id:An(r.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:An(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Ib(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Gn(t,["challenge","allowCredentials"]),i=An(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:An(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function xb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Wr(new Uint8Array(t.response.attestationObject)),clientDataJSON:Wr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Rb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Wr(new Uint8Array(i.authenticatorData)),clientDataJSON:Wr(new Uint8Array(i.clientDataJSON)),signature:Wr(new Uint8Array(i.signature)),userHandle:i.userHandle?Wr(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Pf(){var t,e;return!!(Le()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Ab(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Po("Browser returned unexpected credential type",e)}:{data:null,error:new Po("Empty credential response",e)}}catch(e){return{data:null,error:kb({error:e,options:t})}}}async function jb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Po("Browser returned unexpected credential type",e)}:{data:null,error:new Po("Empty credential response",e)}}catch(e){return{data:null,error:Tb({error:e,options:t})}}}const $b={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Nb={userVerification:"preferred",hints:["security-key"]};function Io(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(r(o))n[s]=o;else if(e(o)){const a=n[s];e(a)?n[s]=Io(a,o):n[s]=Io(o)}else n[s]=o}return n}function Lb(t,e){return Io($b,t,e||{})}function Ub(t,e){return Io(Nb,t,e||{})}class Db{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:a};const l=i??Cb.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Lb(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:c,error:d}=await Ab({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=Ub(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:c,error:d}=await jb(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new Ur("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!r)return{data:null,error:new Qi("rpId is required for WebAuthn authentication")};try{if(!Pf())return{data:null,error:new Ur("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new Ur("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!r)return{data:null,error:new Qi("rpId is required for WebAuthn registration")};try{if(!Pf())return{data:null,error:new Ur("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return A(o)?{data:null,error:o}:{data:null,error:new Ur("Unexpected error in register",o)}}}}_b();const Fb={url:N_,storageKey:L_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function If(t,e,r){return await r()}const un={};class Yi{get jwks(){var e,r;return(r=(e=un[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){un[this.storageKey]=Object.assign(Object.assign({},un[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=un[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){un[this.storageKey]=Object.assign(Object.assign({},un[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Fb),e);if(this.storageKey=s.storageKey,this.instanceID=(r=Yi.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Yi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Le()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new mb({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=hv(s.fetch),this.lock=s.lock||If,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Le()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=wb:this.lock=If,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Db(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:fv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Cf(this.memoryStorage)),Le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${uv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Le()&&(r=Y_(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Le()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),W_(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return A(r)?this._returnResult({error:r}):this._returnResult({error:new Ur("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:St}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:c,password:d,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await on(this.storage,this.storageKey)),s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:St})}else if("phone"in e){const{phone:c,password:d,options:f}=e;s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:St})}else throw new Ns("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:a}=e;r=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Tf})}else if("phone"in e){const{phone:s,password:o,options:a}=e;r=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Tf})}else throw new Ns("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new sn;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,s,o,a,l,u,c,d,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:y,wallet:w,statement:g,options:h}=e;let v;if(Le())if(typeof w=="object")v=w;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")v=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=w}const _=new URL((r=h==null?void 0:h.url)!==null&&r!==void 0?r:window.location.href),k=await v.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=gv(k[0]);let O=(n=h==null?void 0:h.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!O){const $=await v.request({method:"eth_chainId"});O=bb($)}const P={domain:_.host,address:E,statement:g,uri:_.href,version:"1",chainId:O,nonce:(i=h==null?void 0:h.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=h==null?void 0:h.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=h==null?void 0:h.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=h==null?void 0:h.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=h==null?void 0:h.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=h==null?void 0:h.signInWithEthereum)===null||c===void 0?void 0:c.resources};p=Eb(P),m=await v.request({method:"personal_sign",params:[Sb(p),E]})}try{const{data:y,error:w}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:St});if(w)throw w;if(!y||!y.session||!y.user){const g=new sn;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(A(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,n,i,s,o,a,l,u,c,d,f,p;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:w,wallet:g,statement:h,options:v}=e;let _;if(Le())if(typeof g=="object")_=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const k=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),h?{statement:h}:null));let O;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")O=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)O=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)m=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),y=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(c=v==null?void 0:v.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(m),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=E}}try{const{data:w,error:g}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Wr(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:St});if(g)throw g;if(!w||!w.session||!w.user){const h=new sn;return this._returnResult({data:{user:null,session:null},error:h})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:g})}catch(w){if(A(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const r=await Rr(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:o}=await N(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:St});if(await ir(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new sn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=e,a=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:St}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new sn;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await on(this.storage,this.storageKey));const{error:d}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Ns("You must provide either an email or phone number.")}catch(a){if(A(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await N(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:St});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(A(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i;try{let s=null,o=null;this.flowType==="pkce"&&([s,o]=await on(this.storage,this.storageKey));const a=await N(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:pb});return this._returnResult(a)}catch(s){if(A(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new bt;const{error:i}=await N(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(A(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await N(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await N(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Ns("You must provide either an email or phone number and a type")}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Rr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Da:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Rr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Ma()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=cb(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ur}):await this._useSession(async r=>{var n,i,s;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bt}:await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:ur})})}catch(r){if(A(r))return z_(r)&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new bt;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await on(this.storage,this.storageKey));const{data:u,error:c}=await N(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ur});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(A(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bt;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=Ba(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(A(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new bt;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Le())throw new Ls("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ls(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new yf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ls("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yf("No code detected.");const{data:h,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Ls("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const p=f-c;p*1e3<=cn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=f-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,c);const{data:y,error:w}=await this._getUser(s);if(w)throw w;const g={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if(A(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Rr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({error:s});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(M_(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=Q_(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await on(this.storage,this.storageKey,!0));try{return await N(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(A(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:d,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await N(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Le()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(A(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,d=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:St}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new sn}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(A(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await N(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await eb(async i=>(i>0&&await Z_(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await N(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:St})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Fa(s)&&Date.now()+o-n<cn})}catch(n){if(this._debug(r,"error",n),A(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Le()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Rr(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Rr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await dn(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Ma()}else if(i&&!i.user&&!i.user){const o=await Rr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await ir(this.storage,this.storageKey+"-user"),await dn(this.storage,this.storageKey,i)):i.user=Ma()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Da;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Da}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Fa(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Yo;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new bt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),A(s)){const o={data:null,error:s};return Fa(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await dn(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=Ef(i);await dn(this.storage,this.storageKey,s)}else{const i=Ef(r);await dn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ir(this.storage,this.storageKey),await ir(this.storage,this.storageKey+"-code-verifier"),await ir(this.storage,this.storageKey+"-user"),this.userStorage&&await ir(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),cn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/cn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${cn}ms, refresh threshold is ${nu} ticks`),i<=nu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await on(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await N(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await N(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?xb(e.webauthn.credential_response):Rb(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Pb(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Ib(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Ba(n.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await N(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new bt})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new bt});const o=await N(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Le()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new bt});const o=await N(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Le()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+F_>i)return n;const{data:s,error:o}=await N(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});n=p.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Ba(n);r!=null&&r.allowExpired||ab(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:s,header:i,signature:o},error:null}}const c=lb(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,G_(`${a}.${l}`)))throw new ou("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}}Yi.nextInstanceID={};const Bb=Yi;class Mb extends Bb{constructor(e){super(e)}}class zb{constructor(e,r,n){var i,s,o;this.supabaseUrl=e,this.supabaseKey=r;const a=$_(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:O_,realtime:P_,auth:Object.assign(Object.assign({},C_),{storageKey:l}),global:T_},c=j_(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=R_(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new N0(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new S_(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new A0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:u,throwOnError:c},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mb({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,flowType:a,lock:l,debug:u,throwOnError:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new X0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wb=(t,e,r)=>new zb(t,e,r);function Vb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Vb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Pe=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},Me={searchParams:"URLSearchParams"in Pe,iterable:"Symbol"in Pe&&"iterator"in Symbol,blob:"FileReader"in Pe&&"Blob"in Pe&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Pe,arrayBuffer:"ArrayBuffer"in Pe};function Hb(t){return t&&DataView.prototype.isPrototypeOf(t)}if(Me.arrayBuffer)var Kb=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],qb=ArrayBuffer.isView||function(t){return t&&Kb.indexOf(Object.prototype.toString.call(t))>-1};function Yn(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function kc(t){return typeof t!="string"&&(t=String(t)),t}function Tc(t){var e={next:function(){var r=t.shift();return{done:r===void 0,value:r}}};return Me.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Se(t){this.map={},t instanceof Se?t.forEach(function(e,r){this.append(r,e)},this):Array.isArray(t)?t.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}Se.prototype.append=function(t,e){t=Yn(t),e=kc(e);var r=this.map[t];this.map[t]=r?r+", "+e:e};Se.prototype.delete=function(t){delete this.map[Yn(t)]};Se.prototype.get=function(t){return t=Yn(t),this.has(t)?this.map[t]:null};Se.prototype.has=function(t){return this.map.hasOwnProperty(Yn(t))};Se.prototype.set=function(t,e){this.map[Yn(t)]=kc(e)};Se.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)};Se.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),Tc(t)};Se.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),Tc(t)};Se.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),Tc(t)};Me.iterable&&(Se.prototype[Symbol.iterator]=Se.prototype.entries);function Wa(t){if(!t._noBody){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}}function mv(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function Gb(t){var e=new FileReader,r=mv(e);return e.readAsArrayBuffer(t),r}function Jb(t){var e=new FileReader,r=mv(e),n=/charset=([A-Za-z0-9_-]+)/.exec(t.type),i=n?n[1]:"utf-8";return e.readAsText(t,i),r}function Qb(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function xf(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function yv(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:Me.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:Me.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:Me.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():Me.arrayBuffer&&Me.blob&&Hb(t)?(this._bodyArrayBuffer=xf(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Me.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||qb(t))?this._bodyArrayBuffer=xf(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Me.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Me.blob&&(this.blob=function(){var t=Wa(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=Wa(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(Me.blob)return this.blob().then(Gb);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var t=Wa(this);if(t)return t;if(this._bodyBlob)return Jb(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Qb(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Me.formData&&(this.formData=function(){return this.text().then(Zb)}),this.json=function(){return this.text().then(JSON.parse)},this}var Yb=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Xb(t){var e=t.toUpperCase();return Yb.indexOf(e)>-1?e:t}function Xr(t,e){if(!(this instanceof Xr))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var r=e.body;if(t instanceof Xr){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Se(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!r&&t._bodyInit!=null&&(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Se(e.headers)),this.method=Xb(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in Pe){var s=new AbortController;return s.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+new Date().getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Xr.prototype.clone=function(){return new Xr(this,{body:this._bodyInit})};function Zb(t){var e=new FormData;return t.trim().split("&").forEach(function(r){if(r){var n=r.split("="),i=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(s))}}),e}function eS(t){var e=new Se,r=t.replace(/\r?\n[\t ]+/g," ");return r.split("\r").map(function(n){return n.indexOf(`
`)===0?n.substr(1,n.length):n}).forEach(function(n){var i=n.split(":"),s=i.shift().trim();if(s){var o=i.join(":").trim();try{e.append(s,o)}catch(a){console.warn("Response "+a.message)}}}),e}yv.call(Xr.prototype);function Ft(t,e){if(!(this instanceof Ft))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Se(e.headers),this.url=e.url||"",this._initBody(t)}yv.call(Ft.prototype);Ft.prototype.clone=function(){return new Ft(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Se(this.headers),url:this.url})};Ft.error=function(){var t=new Ft(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var tS=[301,302,303,307,308];Ft.redirect=function(t,e){if(tS.indexOf(e)===-1)throw new RangeError("Invalid status code");return new Ft(null,{status:e,headers:{location:t}})};var Dr=Pe.DOMException;try{new Dr}catch{Dr=function(e,r){this.message=e,this.name=r;var n=Error(e);this.stack=n.stack},Dr.prototype=Object.create(Error.prototype),Dr.prototype.constructor=Dr}function wv(t,e){return new Promise(function(r,n){var i=new Xr(t,e);if(i.signal&&i.signal.aborted)return n(new Dr("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var u={statusText:s.statusText,headers:eS(s.getAllResponseHeaders()||"")};i.url.indexOf("file://")===0&&(s.status<200||s.status>599)?u.status=200:u.status=s.status,u.url="responseURL"in s?s.responseURL:u.headers.get("X-Request-URL");var c="response"in s?s.response:s.responseText;setTimeout(function(){r(new Ft(c,u))},0)},s.onerror=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){n(new TypeError("Network request timed out"))},0)},s.onabort=function(){setTimeout(function(){n(new Dr("Aborted","AbortError"))},0)};function a(u){try{return u===""&&Pe.location.href?Pe.location.href:u}catch{return u}}if(s.open(i.method,a(i.url),!0),i.credentials==="include"?s.withCredentials=!0:i.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(Me.blob?s.responseType="blob":Me.arrayBuffer&&(s.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Se||Pe.Headers&&e.headers instanceof Pe.Headers)){var l=[];Object.getOwnPropertyNames(e.headers).forEach(function(u){l.push(Yn(u)),s.setRequestHeader(u,kc(e.headers[u]))}),i.headers.forEach(function(u,c){l.indexOf(c)===-1&&s.setRequestHeader(c,u)})}else i.headers.forEach(function(u,c){s.setRequestHeader(c,u)});i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){s.readyState===4&&i.signal.removeEventListener("abort",o)}),s.send(typeof i._bodyInit>"u"?null:i._bodyInit)})}wv.polyfill=!0;Pe.fetch||(Pe.fetch=wv,Pe.Headers=Se,Pe.Request=Xr,Pe.Response=Ft);var Fr;(function(t){t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR"})(Fr||(Fr={}));var rS=function(){function t(e){e===void 0&&(e=Fr.INFO),this.logLevel=e,this._debug=console.debug,this._info=console.info,this._warn=console.warn,this._error=console.error}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<=Fr.DEBUG&&(e.unshift("[DEBUG]"),this._debug.apply(this,ie([],F(e),!1)))},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<=Fr.INFO&&(e.unshift("[INFO]"),this._info.apply(this,ie([],F(e),!1)))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<=Fr.WARN&&(e.unshift("[WARN]"),this._warn.apply(this,ie([],F(e),!1)))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<=Fr.ERROR&&(e.unshift("[ERROR]"),this._error.apply(this,ie([],F(e),!1)))},t}(),z=new rS(3),nS=function(t,e){this._driver=t,this.liff=e,this.hooks=this._driver.hooks,this.internalHooks=this._driver.internalHooks},iS=function(t,e){this._driver=t,this.liff=e,this.hooks=this._driver.hooks},sS=function(){function t(e,r){this.pluginCtx=new iS(e,r),this.moduleCtx=new nS(e,r)}return Object.defineProperty(t.prototype,"pluginContext",{get:function(){return this.pluginCtx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moduleContext",{get:function(){return this.moduleCtx},enumerable:!1,configurable:!0}),t}(),oS=function(){function t(){this.modules=new Map,this.hooks={},this.internalHooks={}}return t.prototype.addModule=function(e,r){this.modules.set(e,r),r.hooks&&(this.hooks[e]=Object.entries(r.hooks).reduce(function(n,i){var s,o=F(i,2),a=o[0],l=o[1];return J(J({},n),((s={})[a]=l.on.bind(l),s))},{})),"internalHooks"in r&&r.internalHooks&&(this.internalHooks[e]=Object.entries(r.internalHooks).reduce(function(n,i){var s,o=F(i,2),a=o[0],l=o[1];return J(J({},n),((s={})[a]=l.on.bind(l),s))},{}))},t.prototype.hasModule=function(e){return this.modules.has(e)},t}(),B=function(){},Rf=function(t){return t instanceof B},_v=function(t){function e(r,n,i){var s=t.call(this)||this;return s.driver=r,s.contextHolder=n,s.option=i,s}return U(e,t),e.prototype.install=function(){return this.factory(this.driver,this.contextHolder)},Object.defineProperty(e.prototype,"name",{get:function(){return"use"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOption",{get:function(){return{namespacePrefix:"$"}},enumerable:!1,configurable:!0}),e.prototype.factory=function(r,n){var i=Object.assign({},this.defaultOption,this.option).namespacePrefix;return function(s,o){if(!s||typeof s.install!="function"||typeof s.name!="string")return z.warn("To install the plugin, you need to define the `name` property and the `install` method."),this;var a=Rf(s)?s.name:"".concat(i).concat(s.name);if(r.hasModule(a))return this;var l=Rf(s)?s.install.call(s,n.moduleContext,o):s.install.call(s,n.pluginContext,o);return this["".concat(a)]?(z.warn("There is a duplicate plugin name. `".concat(a,"` plugin namespace will be override.")),this["".concat(a)]=l):l!==void 0&&(this["".concat(a)]=l),r.addModule(a,s),this}},e}(B),bv,aS=new Promise(function(t){bv=t}),Ie="UNKNOWN",_e="UNAUTHORIZED",te="INVALID_ARGUMENT",he="INIT_FAILED",K="FORBIDDEN",Bt="INVALID_CONFIG",Ar="INVALID_ID_TOKEN",au="CREATE_SUBWINDOW_FAILED",lu="EXCEPTION_IN_SUBWINDOW",Sv="liffEvent",Rt="LIFF_STORE",xo="https://liff.".concat("line.me","/"),uu="https://miniapp.".concat("line.me","/"),V={ACCESS_TOKEN:"accessToken",ID_TOKEN:"IDToken",DECODED_ID_TOKEN:"decodedIDToken",FEATURE_TOKEN:"featureToken",LOGIN_TMP:"loginTmp",CONFIG:"config",CONTEXT:"context",EXPIRES:"expires",RAW_CONTEXT:"rawContext",CLIENT_ID:"clientId",IS_SUBSEQUENT_LIFF_APP:"isSubsequentLiffApp",MST_CHALLENGE:"mstChallenge",MSIT:"msit",MST:"mst",MST_VERIFIER:"mstVerifier",APP_DATA:"appData"},Af="isInClient",Oc=["context_token","feature_token","access_token","id_token","client_id","mst_verifier","mst_challenge","msit"],lS=5,uS=["liff.ref.source","liff.ref.medium","liff.ref.campaign","liff.ref.term","liff.ref.content"],cS="liff://subwindow",G={INIT:"init",SUBMIT:"submit",CANCEL:"cancel",CLOSE:"close",ERROR:"error"},dS=100,Ev=100,kv="liff.subwindow",Ro="healthCheck",fS=["profile","chat_message.write","openid","email"];function jf(t){return window.atob(t.replace(/-/g,"+").replace(/_/g,"/"))}var Va={decode:jf,encode:function(t){return window.btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decodeUnicode:function(t){var e=jf(t).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join("");return decodeURIComponent(e)}};function mt(t,e){if(t===e)return 0;for(var r=t.split("."),n=e.split("."),i=Math.max(r.length,n.length),s=0;s<i;s++){r[s]||(r[s]="0"),n[s]||(n[s]="0");var o=parseInt(r[s])-parseInt(n[s]);if(o!==0)return o>0?1:-1}return 0}function $f(t){var e=t.replace("#","").match(/.{2}/g)||[];if(e.length!==4)return z.warn("convertArgbToRgba: Received invalid ARGB color"),"";var r=function(o){var a=Vr(o);return Math.round(a/255*100)/100}(e[0]),n=Vr(e[1]),i=Vr(e[2]),s=Vr(e[3]);return"rgba(".concat(n,", ").concat(i,", ").concat(s,", ").concat(r,")")}function Vr(t){return parseInt(t,16)}function Nf(t){var e=t.replace("#","").match(/.{2}/g)||[];if(e.length!==3)return z.warn("convertArgbToRgba: Received invalid hex color"),"";var r=Vr(e[0]),n=Vr(e[1]),i=Vr(e[2]);return"".concat(r,", ").concat(n,", ").concat(i)}function Lf(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),i=0;i<e;i++)n[i]=t.charCodeAt(i);return r}var Cc={get:function(t){var e=new RegExp("(?:(?:^|.*;\\s*)".concat(t,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return document.cookie.replace(e,"$1")},set:function(t,e,r){var n=t+"="+e;if(r)for(var i in r){var s=r[i]?"=".concat(r[i]):"";n+="; ".concat(i).concat(s)}z.debug("set cookie",n),document.cookie=n},remove:function(t,e){var r="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 GMT");if(e)for(var n in e)r+="; ".concat(n,"=").concat(e[n]);document.cookie=r}},hS=new Set(["400","401","403","404","429","500"]),Tv=function(t){function e(r,n,i){var s=t.call(this,n,i)||this;return s.code=r,s}return U(e,t),e}(Error);function S(t,e,r){return r!=null&&r.cause&&console.error("This is the cause of LiffError described below.",r.cause),new Tv(t,e||"",r||{})}function Pc(t){var e=t.match(/([^-]+)-[^-]+/);return e&&e[1]}function pS(t){var e="";return t.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").forEach(function(r){e+=String.fromCharCode(parseInt(r))}),window.btoa(e)}var Ov=function(){function t(){this.map={}}return t.prototype.clear=function(){this.map={}},t.prototype.getItem=function(e){var r=this.map[e];return r===void 0?null:r},t.prototype.setItem=function(e,r){this.map[e]=r},t.prototype.removeItem=function(e){delete this.map[e]},t.prototype.key=function(e){var r=Object.keys(this.map)[e];return r===void 0?null:r},Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.map).length},enumerable:!1,configurable:!0}),t}(),Ha,De={parse:function(t){return t.replace(/^\?/,"").replace(/^#\/?/,"").split(/&+/).filter(function(e){return e.length>0}).reduce(function(e,r){var n=F(r.split("=").map(decodeURIComponent),2),i=n[0],s=n[1],o=e[i];return Array.isArray(o)?o.push(s):Object.prototype.hasOwnProperty.call(e,i)?e[i]=[o,s]:e[i]=s,e},{})},stringify:function(t){return Object.keys(t).map(function(e){var r=t[e],n=function(i){return i!==void 0?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(i)):encodeURIComponent(e)};return Array.isArray(r)?r.map(function(i){return n(i)}).join("&"):n(r)}).join("&")}},Uf="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function gS(){return window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296}function Wn(t){for(var e="",r=0;r<t;r++)e+=Uf[Math.floor(gS()*Uf.length)];return e}function Cv(t){var e=new URL(t),r=e.hash.slice(1).split("&").filter(function(n){return!Oc.some(function(i){return n.startsWith("".concat(i,"="))})}).join("&");return e.hash=r,e.toString()}function vS(t){var e=new URL(t);return e.toString().replace(new RegExp(String.raw(Df||(Df=gc(["^",""],["^",""])),e.origin)),"")}var mS=function(t){var e=Cv(t);if(e!==t){var r=vS(e);window.history.replaceState(history.state,"",r)}};function Xi(t,e){if(!t)throw new Error("addParamsToUrl: invalid URL");var r=new URL(t);return Object.entries(e).forEach(function(n){var i=F(n,2),s=i[0],o=i[1];r.searchParams.set(s,o)}),r.toString()}var Df,Ff=((Ha={})[xo]=function(){var t=Bf(xo);return new RegExp("^".concat(t,"(\\d+-\\w+)"))},Ha[uu]=function(){var t=Bf(uu);return new RegExp("^".concat(t,"((\\d+-\\w+)|(\\w+$))"))},Ha);function Ic(t){for(var e in Ff){var r=t.match(Ff[e]());if(r)return r[1]}return null}function Bf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yS(t){var e=t.match(/^(https?:\/\/.*?)\//);return e&&e[1]||""}function cu(t){return t.startsWith("line:")}function xc(t){return t===void 0&&(t=window.navigator.userAgent),/ipad/.test(t.toLowerCase())}function Pv(t){return t===void 0&&(t=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+/.test(t)}function Iv(t){return t===void 0&&(t=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+ LIFF/.test(t)}function wS(t){return t===void 0&&(t=window.navigator.userAgent),/LIFF\/SubWindow/.test(t)}var xv=function(){return typeof window>"u"},Us=null;function H(){return Us===null&&(Us=Iv()||Pv()&&/[#|&]access_token=/.test(location.hash)||sessionStorage.getItem("".concat(Rt,":").concat(Af))==="1",sessionStorage.setItem("".concat(Rt,":").concat(Af),Us?"1":"0")),!!Us}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isInClient"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return H()}},e})(B);function ue(){var t;return(t=window.__liffConfig)!==null&&t!==void 0?t:{}}function _S(t){window.__liffConfig=t}function bS(t,e){if(!e)throw S(Bt,"liffId is necessary for liff.init()");var r=(H()?sessionStorage:localStorage).getItem("".concat(Rt,":").concat(e,":").concat(t));try{return r===null?null:JSON.parse(r)}catch{return null}}function Xe(t){return bS(t,ue().liffId)}function ct(t,e){var r=ue().liffId;if(!r)throw S(Bt,"liffId is necessary for liff.init()");(H()?sessionStorage:localStorage).setItem("".concat(Rt,":").concat(r,":").concat(t),JSON.stringify(e))}function Oe(){return Xe(V.CONTEXT)}function Rc(t){ct(V.CONTEXT,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getContext"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Oe()}},e})(B);function Rv(){return((Oe()||{}).d||{}).aId}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAId"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Rv()}},e})(B);function Av(){return((Oe()||{}).d||{}).autoplay||!1}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getIsVideoAutoPlay"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Av()}},e})(B);function jv(){return(Oe()||{}).profilePlus}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getProfilePlus"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return jv()}},e})(B);function SS(){return!!Xe(V.IS_SUBSEQUENT_LIFF_APP)}function ES(t){ct(V.IS_SUBSEQUENT_LIFF_APP,t)}function kS(){return Xe(V.APP_DATA)}function du(t){ct(V.APP_DATA,t)}function TS(){return Xe(V.MST_VERIFIER)}function OS(t){ct(V.MST_VERIFIER,t)}function CS(){return Xe(V.MSIT)}function PS(t){ct(V.MSIT,t)}function Xo(){return Xe(V.MST)}function IS(t){ct(V.MST,t)}function $v(){return Xe(V.MST_CHALLENGE)}function xS(t){ct(V.MST_CHALLENGE,t)}function RS(){return Xe(V.CLIENT_ID)}function Nv(t){ct(V.CLIENT_ID,t)}function AS(){return Xe(V.RAW_CONTEXT)}function os(){return Xe(V.FEATURE_TOKEN)}function Mf(t){ct(V.FEATURE_TOKEN,t)}function Zo(){return Xe(V.ID_TOKEN)}function Lv(t){ct(V.ID_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getIDToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Zo()}},e})(B);function Mt(){return Xe(V.ACCESS_TOKEN)}function Ac(t){ct(V.ACCESS_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAccessToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Mt()}},e})(B);function Uv(t){var e=ue().liffId;if(!e)throw S(Bt,"liffId is necessary for liff.init()");(H()?sessionStorage:localStorage).removeItem("".concat(Rt,":").concat(e,":").concat(t))}function Dv(){return Xe(V.LOGIN_TMP)}function jS(t){ct(V.LOGIN_TMP,t)}function zf(){Uv(V.LOGIN_TMP)}function Fv(t){var e=ue();Cc.set("".concat(Rt,":").concat(V.EXPIRES,":").concat(e.liffId),t.getTime(),{expires:t.toUTCString(),path:"/",secure:null})}function $S(){var t=ue();return Cc.get("".concat(Rt,":").concat(V.EXPIRES,":").concat(t.liffId))}function NS(){var t=ue();Cc.remove("".concat(Rt,":").concat(V.EXPIRES,":").concat(t.liffId),{path:"/"})}function ea(){return Xe(V.DECODED_ID_TOKEN)}function Bv(t){ct(V.DECODED_ID_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getDecodedIDToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return ea()}},e})(B);function LS(){Object.keys(V).forEach(function(t){Uv(V[t])}),NS()}function xe(){return!!Mt()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isLoggedIn"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return xe()}},e})(B);function ta(){return"2.27.2"}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getVersion"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return"2.27.2"}},e})(B);var US=function(){function t(){}return t.prototype.invoke=function(){return wS()},t}(),DS=function(){function t(e){this.storage=e}return Object.defineProperty(t,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),t.prototype.invoke=function(){return new URLSearchParams(window.location.search).has(kv)&&this.setInSubWindow(!0),!(!this.getInSubWindow()&&!this.getSubWindowIdentifier())},t.prototype.getInSubWindow=function(){var e=this.storage.getItem("".concat(Rt,":").concat(this.getLiffId(),":").concat(t.IN_SUB_WINDOW_KEY));return e!==null&&JSON.parse(e)},t.prototype.getSubWindowIdentifier=function(){var e,r,n="liff.subwindow.identifier",i=new URLSearchParams(window.location.search);return i.get(n)||(e=n,(r=i.get("liff.state"))?new URLSearchParams(r).get(e):null)||null},t.prototype.setInSubWindow=function(e){this.storage.setItem("".concat(Rt,":").concat(this.getLiffId(),":").concat(t.IN_SUB_WINDOW_KEY),String(e))},t.prototype.getLiffId=function(){var e=ue().liffId;if(!e)throw S(Bt,"liffId is necessary for liff.init()");return e},t}(),FS=function(t){function e(){var r=t.call(this)||this;return xv()?r.impl={invoke:function(){return!1}}:H()?r.impl=new US:r.impl=new DS(window.sessionStorage),r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.impl.invoke.bind(this.impl)},e}(B),Mv=new FS,Nt=Mv.install();function zt(){var t=navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);return t?t[0].slice(5):null}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getLineVersion"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return zt()}},e})(B);var Ka;function Fe(){if(!Ka){var t=window.navigator.userAgent.toLowerCase();Ka=/iphone|ipad|ipod/.test(t)?"ios":/android/.test(t)?"android":"web"}return Ka}(function(t){function e(){return t.call(this)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getOS"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Fe()}},e})(B);function zv(t){var e,r=Oe();return(e=r==null?void 0:r.availability)===null||e===void 0?void 0:e[t]}function ft(t,e,r){var n=zv(t),i=r||t;if(!n)return{available:!1,error:{code:K,message:"".concat(i," is not allowed in this LIFF app")}};var s=n.minVer,o=n.unsupportedFromVer,a=!s||function(u,c){var d=zt();return!!d&&!(c&&mt(d,c)>0)&&mt(d,u)>=0}(s,o),l=H();return l&&!a?{available:!1,error:{code:K,message:"".concat(i," is unavailable in this client version.")}}:n.permission?l&&a||e?{available:!0}:{available:!1,error:{code:K,message:"".concat(i," is not allowed in external browser")}}:{available:!1,error:{code:K,message:"".concat(i," is not allowed in this LIFF app")}}}var Wf=function(){return xe()?!Iv()&&Pv()?{available:!1,error:{code:K,message:"Subwindow is not supported in this browser"}}:Nt()?{available:!1,error:{code:K,message:"this api can be only called in parent window"}}:ft("subwindowOpen",!0):{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}}},BS=["subwindowOpen","shareTargetPicker","multipleLiffTransition","scanCode","scanCodeV2","getAdvertisingId","addToHomeScreen","bluetoothLeFunction","skipChannelVerificationScreen","createShortcutOnHomeScreen","internalCreateShortcutOnHomeScreen","iap"],Ze={scanCode:function(){return ft("scanCode")},getAdvertisingId:function(){return ft("getAdvertisingId")},bluetoothLeFunction:function(){return ft("bluetoothLeFunction")},shareTargetPicker:function(){return Nt()?{available:!1,error:{code:K,message:"this api can be only called in parent window"}}:xe()?ft("shareTargetPicker",!0):{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}}},multipleLiffTransition:function(){var t=zv("multipleLiffTransition");return t&&t.permission?H()?{available:!0}:{available:!1,error:{code:K,message:"multipleLiffTransition is available only in the LINE App browser"}}:{available:!1,error:{code:K,message:"multipleLiffTransition is not allowed in this LIFF app"}}},subwindowOpen:Wf,scanCodeV2:function(){if(!xe())return{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}};var t=Wf();return t.available?ft("scanCodeV2",!0):t},addToHomeScreen:function(){return Nt()?{available:!1,error:{code:K,message:"this api can be only called in parent window"}}:ft("addToHomeScreen")},skipChannelVerificationScreen:function(){var t=Oe();return t?t.type==="square_chat"?{available:!1,error:{code:K,message:"skipChannelVerificationScreen is not allowed in OpenChat"}}:ft("skipChannelVerificationScreen"):{available:!1,error:{code:K,message:"Context is not found"}}},createShortcutOnHomeScreen:function(){if(Nt())return{available:!1,error:{code:K,message:"this api can be only called in parent window"}};if(!xe())return{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}};var t=Fe();return t!=="android"&&t!=="ios"?{available:!1,error:{code:K,message:"this api can be only called in mobile device"}}:ft("addToHomeV2",!0,"createShortcutOnHomeScreen")},internalCreateShortcutOnHomeScreen:function(){if(Nt())return{available:!1,error:{code:K,message:"this api can be only called in parent window"}};if(!xe())return{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}};var t=Fe();if(t!=="android"&&t!=="ios")return{available:!1,error:{code:K,message:"this api can be only called in mobile device"}};var e=ft("addToHomeV2",!0,"internalCreateShortcutOnHomeScreen");return e.available?ft("addToHomeLineScheme",!0,"internalCreateShortcutOnHomeScreen"):e},iap:function(){return H()?xe()?Nt()?{available:!1,error:{code:K,message:"this api can be only called in parent window"}}:ft("iap",!1,"In-App Purchase"):{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}}:{available:!1,error:{code:K,message:"In-App Purchase is not allowed in external browser"}}}},dt=function(t){return function(){var e=t();if(!e.available)throw S(e.error.code,e.error.message)}},Jt={scanCode:dt(Ze.scanCode),getAdvertisingId:dt(Ze.getAdvertisingId),bluetoothLeFunction:dt(Ze.bluetoothLeFunction),shareTargetPicker:dt(Ze.shareTargetPicker),multipleLiffTransition:dt(Ze.multipleLiffTransition),subwindowOpen:dt(Ze.subwindowOpen),scanCodeV2:dt(Ze.scanCodeV2),addToHomeScreen:dt(Ze.addToHomeScreen),skipChannelVerificationScreen:dt(Ze.skipChannelVerificationScreen),createShortcutOnHomeScreen:dt(Ze.createShortcutOnHomeScreen),internalCreateShortcutOnHomeScreen:dt(Ze.internalCreateShortcutOnHomeScreen),iap:dt(Ze.iap)};function as(t){if(!function(r){return BS.some(function(n){return n===r})}(t))throw S(te,"Unexpected API name.");var e=Ze[t];return!e||e().available}(function(t){function e(){var r=t.apply(this,ie([],F(arguments),!1))||this;return r.hooks={},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isApiAvailable"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(r){return as(r)}},e})(B);var MS=function(){function t(){}return t.prototype.invoke=function(e){var r=Jt[e];return!!r&&(r(),!0)},t}(),zS=function(){function t(e){this.liff=e}return t.prototype.invoke=function(e){return this.liff.checkFeature(e)},t}(),qa=function(){function t(e){mt(ta(),t.SDK_VERSION_SUPPORTING_NEW)>=0?this.impl=new MS:this.impl=new zS(e)}return Object.defineProperty(t,"SDK_VERSION_SUPPORTING_NEW",{get:function(){return"2.11.0"},enumerable:!1,configurable:!0}),t.prototype.invoke=function(e){return this.impl.invoke(e)},t}(),fu=function(t,e){return fu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},fu(t,e)};function WS(t,e,r,n){return new(r||(r=Promise))(function(i,s){function o(u){try{l(n.next(u))}catch(c){s(c)}}function a(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof r?c:new r(function(d){d(c)})).then(o,a)}l((n=n.apply(t,[])).next())})}function VS(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(d){c=[6,d],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var Wv=!1,HS=function(){return Wv},KS=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=r}fu(r,n),r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"_legacyExtensionsEnabled"},enumerable:!1,configurable:!0}),e.prototype.install=function(){Wv=!0},e}(B);function qS(){var t;return Fe()==="ios"?(t=zt())&&mt(t,"9.19.0")<0?"https://static.line-scdn.net/liff/edge/2/ios-918-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/ios-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/non-ios-extensions_2_22_0.js"}function GS(){return HS()?function(){return WS(this,void 0,void 0,function(){return VS(this,function(t){switch(t.label){case 0:return[3,2];case 1:return[2,t.sent().default];case 2:return[2,new Promise(function(e,r){var n=document.createElement("script"),i=qS();n.onload=function(){var s=window.liffClientExtension;s?e(s):r(S(he,"Unable to load client features. (Extension is empty)"))},n.onerror=function(s){r(S(he,"Unable to load client features.",{cause:s}))},n.src=i,n.type="text/javascript",document.body.appendChild(n)})]}})})}():Promise.resolve(void 0)}function jc(){LS()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"logout"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return jc()}},e})(B);var JS=/([\x90\x9D\x81\x8D\x8F<"{|}>\\^`]|\n|.*#.*#|%(?![0-9A-Fa-f]{2})[^%]{0,2})/,Vv=function(t){if(JS.test(t))throw S(te,"invalid URL.");var e=new URL(t),r=e.username,n=e.password,i=e.hash,s=e.search;return{username:r,password:n,pathname:e.pathname,hash:i,origin:e.origin,search:s}},Vf=function(t){return t.substring(1).split("&").filter(function(e){return!/^liff\./.test(e)&&!!e})},QS=function(t,e){var r=t.substring(e.length);return r==="/"?"":(r.length>0&&r[0]!=="/"&&(r="/"+r),r)},Hf=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},YS=function(t,e){var r=function(n,i){for(var s=ie([],F(n),!1),o=0;o<i.length;o++){var a=i[o],l=s.indexOf(a);l>-1&&s.splice(l,1)}return s}(function(n){var i,s,o=n.replace(/\+/g,"%2B"),a=new URLSearchParams(o),l=[];try{for(var u=er(a.entries()),c=u.next();!c.done;c=u.next()){var d=F(c.value,2),f=d[0],p=d[1];l.push("".concat(Hf(f),"=").concat(Hf(p)))}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}if(l.length===0)return[""];var m=n.split("&");return l.map(function(y,w){return y.endsWith("=")&&!m[w].endsWith("=")?y.slice(0,-1):y})}(Vf(t).join("&")),Vf(e)).join("&");return r!==""?"?".concat(r):""},XS=function(t){var e=new RegExp("^".concat(Oc.join("|"))),r=t.substring(1).split("&").filter(function(n){return!e.test(n)&&!!n}).join("&");return r?"#".concat(r):""},Hv=function(t,e){return e.indexOf(t)===0&&(t.endsWith("/")&&(t=t.substring(0,t.length-1)),e[t.length]===void 0||e[t.length]==="/")},$c=function(t,e){var r=Vv(t),n=new URL(e);if(r.username!==n.username||r.password!==n.password||n.origin!==r.origin||!Hv(n.pathname,r.pathname))throw S(te,"invalid URL.")},ZS=function(t){function e(){var r=t.apply(this,ie([],F(arguments),!1))||this;return r.extraParams="",r.getAndValidateContext=function(){var n=Oe();if(!n)throw S(he,"Could not get Context from server.");if(!n.endpointUrl)throw S(he,"Could not get endpointUrl from server.");if(!n.permanentLinkPattern)throw S(he,"Could not get permanentLinkPattern from server.");return n},r.createUrl=function(){var n=r.getAndValidateContext(),i=window.location,s=i.pathname,o=i.search,a=i.hash,l=i.origin,u=new URL(n.endpointUrl);if(u.origin!==l||!Hv(u.pathname,s))throw S(Bt,"Current page is not under entrypoint.");var c=s.substring(u.pathname.length);c.length>0&&c[0]!=="/"&&(c="/"+c);var d=new RegExp("^".concat(Oc.join("|"))),f=a.substring(1).split("&").filter(function(E){return!d.test(E)&&!!E}).join("&"),p=f===u.hash.substring(1)?"":f,m=function(E){return E.substring(1).split("&").filter(function(O){return!/liff\.state/.test(O)&&!!O})},y=m(o),w=m(u.search);r.extraParams&&y.push(r.extraParams);for(var g=0;g<w.length;g++){var h=w[g],v=y.indexOf(h);v>-1&&y.splice(v,1)}var _=y.join("&"),k="".concat(c).concat(_!==""?"?".concat(_):"").concat(p?"#".concat(p):"");return"".concat(xo).concat(ue().liffId).concat(k)},r.createUrlBy=function(n){return b(r,void 0,void 0,function(){var i,s,o,a,l,u;return C(this,function(c){if(!(i=ue().liffId))throw S(he,"Should run after liff init.");return s=this.getAndValidateContext(),$c(n,s.endpointUrl),o=Vv(n),a=new URL(s.endpointUrl),l=s.miniDomainAllowed?uu:xo,u=s.miniDomainAllowed&&s.miniAppId?s.miniAppId:i,[2,l.concat(u,QS(o.pathname,a.pathname),YS(o.search,a.search),XS(o.hash))]})})},r.setExtraQueryParam=function(n){r.extraParams=n},r.install=function(){return{createUrl:r.createUrl,createUrlBy:r.createUrlBy,setExtraQueryParam:r.setExtraQueryParam}},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"permanentLink"},enumerable:!1,configurable:!0}),e}(B),eE=new ZS;function tE(t){return b(this,void 0,void 0,function(){var e,r,n;return C(this,function(i){switch(i.label){case 0:if(!t.ok)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.json()];case 2:return[2,i.sent()];case 3:return i.sent(),[2,t];case 4:return e=String(t.status),r=hS.has(e)?e:Ie,[4,t.json().catch(function(){throw S(r,t.statusText)})];case 5:throw n=i.sent(),S(n.error||r,n.error_description||n.message)}})})}function Kv(t){var e=function(r){if(r)return r;var n=Mt();if(!n)throw S(_e,"Need access_token for api call, Please login first");return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(n)}}(t&&t.headers);return J(J({},t),{headers:e})}function ve(t,e){var r;try{r=Kv(e)}catch(n){return Promise.reject(n)}return fetch(t,r).then(tE)}function rE(t,e){var r;try{r=Kv(e)}catch(n){return Promise.reject(n)}return fetch(t,r)}function de(t){var e=t.subdomain,r=e===void 0?"api":e,n=t.pathname;return"https://".concat(r,".").concat("line.me","/").concat(n)}var nE={token:de({pathname:"oauth2/v2.1/token"}),certs:de({pathname:"oauth2/v2.1/certs"}),"openid-configuration":de({subdomain:"access",pathname:".well-known/openid-configuration"}),authorize:de({subdomain:"access",pathname:"liff/v1/authorize"}),profile:de({pathname:"v2/profile"}),message:de({pathname:"message/v3/share"}),friendship:de({pathname:"friendship/v1/status"}),shareTargetPicker:de({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker"}),shareTargetPickerOtt:de({pathname:"liff/v2/apps"}),shareTargetPickerResult:de({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker/result"}),apps:de({pathname:"liff/v2/apps"}),subWindowGetMSIT:de({pathname:"liff/v2/sub/msit"}),subWindowGetMSTByMSIT:de({pathname:"liff/v2/sub/mst"}),subWindowSubscribe:de({subdomain:"liff",pathname:"liff/v2/sub/waitResult"}),subWindowPost:de({pathname:"liff/v2/sub/result"}),subWindowGetAppData:de({pathname:"liff/v2/sub/appData"}),subWindowGetOrigin:function(t){return de({pathname:"liff/v2/sub/".concat(t,"/origin")})},accessTokenVerify:de({pathname:"oauth2/v2.1/verify"}),unauthorizedPermissions:de({subdomain:"liff",pathname:"liff/v2/incrementalAgreement/unauthorizedPermissions"}),permanentLink:de({subdomain:"liff",pathname:"liff/v2/permanentLink"}),createShortcutOnHomeScreen:de({subdomain:"liff-shortcut",pathname:"api/shortcut"})};function le(t){return nE[t]}function Nc(t){return ve("".concat(le("accessTokenVerify"),"?access_token=").concat(encodeURIComponent(t)),{headers:{"Content-Type":"application/json",Accept:"application/json"}})}var qv="liff.subwindow.identifier",hu="liff.subwindow.cryptokey",Zs=J(J({},G),{GET_DATA:"getData",SET_DATA:"setData",NOT_FOUND:"notFound",TEARDOWN:"teardown"}),Ao={BROADCAST:"broadcast",COMMAND:"command"},Pi={MAIN:"main",SUB:"sub"},Gv=function(t){return b(void 0,void 0,void 0,function(){var e;return C(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey("jwk",{kty:"oct",k:t,alg:"A128GCM",ext:!0},{name:"AES-GCM"},!1,["encrypt","decrypt"])];case 1:return[2,r.sent()];case 2:throw e=r.sent(),S(Ie,e);case 3:return[2]}})})},iE=function(t,e,r){return b(void 0,void 0,void 0,function(){var n,i,s,o;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n=new TextEncoder().encode(t),[4,Gv(e)];case 1:return i=a.sent(),[4,window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,new TextEncoder().encode(r))];case 2:return s=a.sent(),[2,btoa(new Uint8Array(s).reduce(function(l,u){return l+String.fromCharCode(u)},""))];case 3:throw o=a.sent(),S(Ie,o);case 4:return[2]}})})},sE=function(t,e,r){return b(void 0,void 0,void 0,function(){var n,i,s,o,a,l,u;return C(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),n=new TextEncoder().encode(t),[4,Gv(e)];case 1:for(i=c.sent(),s=atob(r),o=new Uint8Array(s.length),a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return[4,window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},i,o.buffer)];case 2:return l=c.sent(),[2,new TextDecoder().decode(new Uint8Array(l))];case 3:throw u=c.sent(),S(Ie,u);case 4:return[2]}})})},oE=function(t,e){return Ii(t)===Ii(e)},Ii=function(t){return"".concat(t.identifier,"-").concat(t.action,"-").concat(t.timestamp)},aE=function(t){return Object.keys(G).map(function(e){return G[e]}).includes(t)?Ao.BROADCAST:Ao.COMMAND};function lE(){var t=document.createElement("form");t.method="POST",t.action="$MESSAGE_HANDLER_URL";var e=document.createElement("input");e.type="hidden",e.name="identifier",e.value="$IDENTIFIER",t.appendChild(e),document.body.appendChild(t),t.submit()}var uE=function(t){t===void 0&&(t=Pi.MAIN);var e=this;this.identification={identifier:"",cryptoKey:""},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return b(e,void 0,void 0,function(){var r,n,i,s,o;return C(this,function(a){switch(a.label){case 0:return r=new URLSearchParams(window.location.search),n=function(l){var u=r.get("liff.state");return u?new URLSearchParams(u).get(l):null},i=this,o={identifier:this.windowType===Pi.MAIN?Wn(12):r.get("liff.subwindow.identifier")||n("liff.subwindow.identifier")||""},this.windowType!==Pi.MAIN?[3,2]:[4,b(void 0,void 0,void 0,function(){var l,u,c;return C(this,function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])];case 1:return l=d.sent(),[4,window.crypto.subtle.exportKey("jwk",l)];case 2:if(!(u=d.sent())||!u.k)throw S(Ie,"failed to generate key");return[2,u.k];case 3:throw c=d.sent(),S(Ie,c);case 4:return[2]}})})];case 1:return s=a.sent(),[3,3];case 2:s=r.get(hu)||n(hu)||"",a.label=3;case 3:return i.identification=(o.cryptoKey=s,o),[2]}})})},this.hasIdentification=function(){var r=e.identification,n=r.identifier,i=r.cryptoKey;return typeof n=="string"&&typeof i=="string"&&n.length>0&&i.length>0},this.isReady=function(){return e.hasIdentification()&&!!e.messageHandlerInstance},this.setup=function(){return b(e,void 0,void 0,function(){var r,n,i,s,o,a=this;return C(this,function(l){switch(l.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(l.sent(),!(r=this.identification.identifier))return[2];if(n=/^[a-zA-Z0-9]+$/gm,!r.match(n))throw S(Ie,"Invalid identifier");return(i=document.createElement("iframe")).style.display="none",i.src="about:blank",document.body.appendChild(i),(o=i==null?void 0:i.contentWindow)===null||o===void 0||o.window.eval("(".concat(lE.toString().replace("$MESSAGE_HANDLER_URL","".concat("https://liff-subwindow.line.me/liff/v2/sub/messageHandler")).replace("$IDENTIFIER",r.split("'")[0]),")()")),s="iframe-".concat(r,"-ready"),[4,new Promise(function(u){var c=function(d){d.data[s]&&(a.messageHandlerInstance=i,window.addEventListener("message",a.proxyToListeners),u(),document.removeEventListener("message",c))};window.addEventListener("message",c)})];case 2:return[2,l.sent()]}})})},this.teardown=function(){return b(e,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return this.isReady()?[4,this.send({eventName:Zs.TEARDOWN})]:[3,2];case 1:i.sent(),window.removeEventListener("message",this.proxyToListeners),this.listeners.clear(),(n=(r=this.messageHandlerInstance)===null||r===void 0?void 0:r.parentNode)===null||n===void 0||n.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,i.label=2;case 2:return[2]}})})},this.listen=function(r){e.listeners.set(r,r)},this.listenRepliedEvent=function(r,n){var i=function(s){s.replyTarget&&oE(s.replyTarget,r)&&(n(s),e.listeners.delete(i))};e.listeners.set(i,i)},this.send=function(r){return b(e,void 0,void 0,function(){var n,i,s,o,a=this;return C(this,function(l){switch(l.label){case 0:if(!this.isReady())throw S("message bus is not ready to send message");return i={action:aE(r.eventName),identifier:this.identification.identifier||"",timestamp:new Date().getTime()},[4,this.getEncryptedContext(r)];case 1:return i.context=l.sent(),n=i,(o=(s=this.messageHandlerInstance)===null||s===void 0?void 0:s.contentWindow)===null||o===void 0||o.postMessage({messageBusEvent:n},"*"),this.sentMessages.push(Ii(n)),[4,new Promise(function(u){a.listenRepliedEvent(n,function(c){u(c.context)})})];case 2:return[2,l.sent()]}})})},this.reply=function(r,n){return b(e,void 0,void 0,function(){var i,s,o,a;return C(this,function(l){switch(l.label){case 0:if(!this.isReady())throw S("message bus is not ready to send message");if(!r.identifier||!r.timestamp)throw S(Ie,"target message is not valid");return s={action:Ao.BROADCAST},[4,this.getEncryptedContext(n)];case 1:return s.context=l.sent(),s.identifier=this.identification.identifier||"",s.timestamp=new Date().getTime(),s.replyTarget={action:r.action,identifier:r.identifier,timestamp:r.timestamp},i=s,(a=(o=this.messageHandlerInstance)===null||o===void 0?void 0:o.contentWindow)===null||a===void 0||a.postMessage({messageBusEvent:i},"*"),this.sentMessages.push(Ii(i)),[2]}})})},this.setData=function(r,n){r===void 0&&(r="appData"),e.send({eventName:Zs.SET_DATA,key:r,data:n})},this.getData=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return b(e,ie([],F(r),!1),void 0,function(i){return i===void 0&&(i="appData"),C(this,function(s){switch(s.label){case 0:return[4,this.send({eventName:Zs.GET_DATA,key:i})];case 1:return[2,s.sent()]}})})},this.proxyToListeners=function(r){return b(e,void 0,void 0,function(){var n,i=this;return C(this,function(s){return n=r.data.messageBusEvent,r.origin!=="https://liff-subwindow.line.me"?[2]:n?(this.sentMessages.includes(Ii(n))||n.identifier!==this.identification.identifier||n.action!==Ao.BROADCAST&&!n.replyTarget||this.listeners.forEach(function(o){return b(i,void 0,void 0,function(){var a,l,u;return C(this,function(c){switch(c.label){case 0:return a=o,l=[J({},n)],u={},[4,this.getDecryptedContext(n.context)];case 1:return a.apply(void 0,[J.apply(void 0,l.concat([(u.context=c.sent(),u)]))]),[2]}})})}),[2]):[2]})})},this.getEncryptedContext=function(r){return b(e,void 0,void 0,function(){var n,i,s,o,a,l,u;return C(this,function(c){switch(c.label){case 0:return n=this.identification,i=n.identifier,s=n.cryptoKey,a=(o=JSON).stringify,u={eventName:r.eventName,key:r.key?r.key:void 0},r.data?[4,iE(i,s,JSON.stringify(r.data))]:[3,2];case 1:return l=c.sent(),[3,3];case 2:l=void 0,c.label=3;case 3:return[2,a.apply(o,[(u.data=l,u)])]}})})},this.getDecryptedContext=function(r){return b(e,void 0,void 0,function(){var n,i,s,o,a,l,u,c;return C(this,function(d){switch(d.label){case 0:return n=this.identification,i=n.identifier,s=n.cryptoKey,(o=JSON.parse(r)).data&&typeof o.data=="string"?(c=(u=JSON).parse,[4,sE(i,s,o.data)]):[3,2];case 1:return l=c.apply(u,[d.sent()]),[3,3];case 2:l=void 0,d.label=3;case 3:return a=l,[2,J(J({},o),{data:a})]}})})},this.windowType=t};function cE(t){return new CustomEvent(Sv,{detail:t})}(function(){if(typeof window<"u"&&typeof window.CustomEvent!="function"){let t=function(e,r){var n=r||{},i=n.bubbles,s=i!==void 0&&i,o=n.cancelable,a=o!==void 0&&o,l=n.detail,u=l===void 0?void 0:l,c=document.createEvent("CustomEvent");return c.initCustomEvent(e,s,a,u),c};t.prototype=Event.prototype,window.CustomEvent=t}})();var fn={},Kf=!1;function Lc(t,e){Kf||(Kf=!0,window.addEventListener(Sv,function(r){r&&r.detail&&r.detail.type&&fn[r.detail.type]&&fn[r.detail.type].forEach(function(n){return n(r)})})),fn[t]?fn[t].push(e):fn[t]=[e]}function Uc(t,e){var r=fn[t];if(r&&Array.isArray(r)){var n=r.indexOf(e);n>=0&&r.splice(n,1)}}function dE(t){var e={};try{e=JSON.parse(t)}catch(n){throw S(te,n.message)}var r=cE(e);z.debug("[client dispatchEvent to js]",{type:r.type,detail:r.detail}),window.dispatchEvent(r)}function Jv(t,e,r){e===void 0&&(e={}),r===void 0&&(r="");var n=os();if(!n)throw S(K,"Invalid featureToken for client features");if(!window._liff||!window._liff.postMessage)throw S(te,"postMessage is not available from client");z.debug("[js postMessage to client]",t,r,e),window._liff.postMessage(t,n,r,JSON.stringify(e))}function Xn(t,e,r){return e===void 0&&(e={}),r===void 0&&(r={once:!0}),os()?(r=J({callbackId:Wn(12),once:!0},r),new Promise(function(n,i){var s=function(o){if(o&&o.detail){var a=o.detail.callbackId===r.callbackId,l=typeof o.detail.callbackId!="string";(a||l)&&(r.once&&Uc(t,s),z.debug("[callback detail]",o.detail),o.detail.error?i(o.detail.error):o.detail.data?n(o.detail.data):i(o.detail))}i()};Lc(t,s),Jv(t,e,r.callbackId)})):Promise.reject(S(K,"Invalid featureToken for client features"))}function jn(){var t=zt();t!==null&&(Fe()==="ios"&&mt(t,"9.19")>=0||Fe()==="android"&&mt(t,"11.6.0")>=0)?location.href="liff://close":window._liff&&window._liff.postMessage?t!==null&&mt(t,"10.15.0")>=0?Fe()==="ios"?window._liff.postMessage("closeWindow",""):window._liff.postMessage("closeWindow","","",""):Xn("closeWindow"):window.close()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"closeWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return jn()}},e})(B);function Qv(t){var e=le("subWindowGetOrigin");return ve(e(t))}var br={};function Vn(t,e){t&&br[t]&&br[t].forEach(function(r){r(e)})}function Yv(t,e){br[t]||(br[t]=[]),br[t].push(e)}function Xv(t,e){if(br[t]){var r=br[t].indexOf(e);r>=0&&br[t].splice(r,1)}}var Zv,em,tm,rm,pu,nm=function(){function t(e){this.storage=e}return t.prototype.getItem=function(e){return this.storage.getItem("".concat(this.getKeyPrefix(),":").concat(e))},t.prototype.setItem=function(e,r){this.storage.setItem("".concat(this.getKeyPrefix(),":").concat(e),r)},t.prototype.removeItem=function(e){this.storage.removeItem("".concat(this.getKeyPrefix(),":").concat(e))},t.prototype.clear=function(){this.storage.clear()},t.prototype.getKeyPrefix=function(){return"".concat(Rt,":").concat(this.getLiffId())},t.prototype.getLiffId=function(){var e=ue().liffId;if(!e)throw S(Bt,"liffId is necessary for liff.init()");return e},t}(),im=new nm(new Ov);function jo(){var t=im.getItem("subWindowStatusUpdated");return t!==null&&JSON.parse(t)}function Zr(t){im.setItem("subWindowStatusUpdated",String(t))}function gu(t){Zv=t}function xi(){return Zv}function vu(){return tm}function qf(){return rm}function sm(){return b(this,arguments,void 0,function(t){return t===void 0&&(t=Pi.MAIN),C(this,function(e){switch(e.label){case 0:return[4,(pu=new uE(t)).setup()];case 1:return e.sent(),[2,pu]}})})}function Zn(){return pu}var fE=new Ov,om=new nm(xv()?fE:window.sessionStorage);function hE(t){om.setItem("mainWindowOrigin",t)}function am(){return om.getItem("mainWindowOrigin")}function lm(t){return b(this,arguments,void 0,function(e,r){var n,i,s,o,a,l,u,c;return r===void 0&&(r={}),C(this,function(d){switch(d.label){case 0:if((n=Zn())!=null&&n.isReady())return[3,5];if(i=JSON.stringify(r),s=ue().liffId,o=am(),!window.opener||!o||!s)throw S(lu);a=!1,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Qv(s)];case 2:return l=d.sent(),a=l.subwindowCommonModule,[3,4];case 3:throw u=d.sent(),z.debug(u),S(lu);case 4:return c=a?o:location.origin,[2,new Promise(function(f){window.addEventListener("message",function p(m){pE(m)&&(window.removeEventListener("message",p),f({status:e,result:i}))}),window.opener.postMessage({status:e,result:i},c)})];case 5:return n.send({eventName:e,data:r}),[4,new Promise(function(f){setTimeout(f,500)})];case 6:return d.sent(),[2,{status:e,result:JSON.stringify(r)}]}})})}function pE(t){return!(!t.data||typeof t.data.type!="string"||![G.SUBMIT,G.CANCEL].includes(t.data.type))}function Dc(t){var e,r=qf();if(t.origin===r){var n=t.data;if(n){var i,s=n.status,o=n.result;try{i=JSON.parse(o||"{}")}catch{i={}}switch(s){case Ro:window.clearInterval(vu()),Fc();break;case G.CANCEL:case G.SUBMIT:Zr(!0),window.clearInterval(vu()),window.removeEventListener("message",Dc),Vn(s,i),(e=xi())===null||e===void 0||e.postMessage({type:s},qf());break;default:z.debug("unexpected message")}}}}var gE=function(t){return b(void 0,void 0,void 0,function(){var e,r,n,i;return C(this,function(s){if(jo())return[2];switch(e=t.context,r=e.eventName,n=e.data,i=Zn(),r){case G.INIT:cm(!n.hasOpener);break;case G.CANCEL:case G.SUBMIT:Zr(!0),Vn(r,n),i==null||i.reply(t,{eventName:r});break;case G.CLOSE:jo()===!1&&(Zr(!0),Vn(G.CLOSE,{})),Fc()}return[2]})})};function um(){window.clearInterval(em),window.clearInterval(vu()),window.removeEventListener("message",Dc)}function cm(t){if(t===void 0&&(t=!1),um(),Zr(!1),t){var e=xi();e&&(e.close(),gu(null))}}function Fc(){return b(this,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return(t=Zn())?[4,t.teardown()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}function vE(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a,l,u,c,d,f;return C(this,function(p){switch(p.label){case 0:return(e=Ic(t.url))?(cm(!0),[4,Fc()]):[2,Promise.reject(S(te,"params.url must be liff url or mini url"))];case 1:return p.sent(),gu(Fe()!=="ios"||xc()?window.open("","liffsubwindow","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):window.open()),r=t.url,n=t.appData,(i=new URL(r)).searchParams.append(kv,"true"),[4,sm()];case 2:return s=p.sent(),i.searchParams.append(qv,s.identification.identifier),i.searchParams.append(hu,s.identification.cryptoKey),i.hostname=function(y){var w=F(y.split(".")),g=w[0],h=w.slice(1);return ie(["".concat(g,"-ext")],F(h),!1).join(".")}(i.hostname),o=i.toString(),[4,Qv(e)];case 3:if(a=p.sent(),l=a.origin,u=a.subwindowCommonModule,!(c=xi()))throw S(au);if(!u)return c.close(),[2];(function(y){rm=y})(l),s.listen(gE),s.setData("appData",n),window.addEventListener("message",Dc),p.label=4;case 4:return p.trys.push([4,6,,7]),[4,(f=t.onBeforeTransition)===null||f===void 0?void 0:f.call(t)];case 5:return p.sent(),[3,7];case 6:throw d=p.sent(),c.close(),d;case 7:return c.location.href=o,m=function(y,w){var g=xi(),h={type:Ro};return w&&(h.message=JSON.stringify(w)),window.setInterval(function(){g==null||g.postMessage(h,y)},Ev)}(l,n),tm=m,function(y){em=y}(window.setInterval(function(){var y=xi();y&&y.closed&&(um(),gu(null),jo()===!1&&(Zr(!0),Vn(G.CLOSE,{})))},dS)),[2]}var m})})}var ui=null;function dm(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a,l,u,c,d,f,p,m,y=this;return C(this,function(w){switch(w.label){case 0:if(e=t.msit,r=t.mstChallenge,n=t.reconnectCount,i=n===void 0?0:n,s=function(){return b(y,void 0,void 0,function(){return C(this,function(g){switch(g.label){case 0:return[4,(h=1e3,new Promise(function(v){return setTimeout(v,h)}))];case 1:return g.sent(),[4,dm({msit:e,mstChallenge:r,onSuccess:t.onSuccess,onError:t.onError,reconnectCount:i+1})];case 2:return g.sent(),[2]}var h})})},o=function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];ui=null,t.onSuccess.apply(t,ie([],F(g),!1))},a=function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];ui=null,t.onError.apply(t,ie([],F(g),!1))},l=Date.now(),ui===null&&(ui=l),u=l-ui,i>=10||u>6e5)return a(S(Ie,"Failed to connect")),[2];w.label=1;case 1:return w.trys.push([1,3,,5]),[4,rE(le("subWindowSubscribe"),{method:"POST",body:JSON.stringify({msit:e,mstChallenge:r})})];case 2:return c=w.sent(),[3,5];case 3:return w.sent(),[4,s()];case 4:return w.sent(),[2];case 5:return c.status>=500?[4,s()]:[3,7];case 6:return w.sent(),[3,17];case 7:return c.status>=400&&500>c.status?[4,Gf(c)]:[3,9];case 8:return f=w.sent(),d=f?S(te,f.errorDetail):S(Ie,"Some error happened in the server"),a(d),[3,17];case 9:return c.status!==200?[3,16]:[4,Gf(c)];case 10:if(!(f=w.sent()))return a(S(Ie,"Some error happened in the server")),[2];switch(p=f.status,m=f.result,p){case G.ERROR:return[3,11];case G.CLOSE:case G.CANCEL:case G.SUBMIT:return[3,13]}return[3,14];case 11:return[4,s()];case 12:return w.sent(),[3,15];case 13:return o(p,m),[3,15];case 14:a(S(Ie,"Some error happened in the server")),w.label=15;case 15:return[3,17];case 16:a(S(Ie,"Some error happened in the server")),w.label=17;case 17:return[2]}})})}function Gf(t){return b(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t.json()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}})})}function mE(t){var e={};return Object.keys(t).forEach(function(r){r==="closeButtonColor"?t[r]==="white"?e[r]="#ffffff":e[r]="#000000":e[r]=t[r]}),e}var yE={height:"full",closeButtonPosition:"right",closeButtonColor:"black",closeButtonLabel:""};function wE(t){var e=t.appData,r=t.native,n=ue().liffId,i=$v(),s=Ic(t.url);if(!n)return Promise.reject(S(_e,"liffId is invalid"));if(!i)return Promise.reject(S(_e,"mst_challenge is invalid"));if(!s)return Promise.reject(S(te,"params.url must be liff url or mini url"));var o=Object.assign({},yE,r);return function(a){var l=a.mainLiffId,u=a.subLiffId,c=a.mstChallenge,d=a.appData,f=a.view;return l&&c?ve(le("subWindowGetMSIT"),{method:"POST",body:JSON.stringify({mainLiffId:l,subLiffId:u,mstChallenge:c,appData:d,view:f})}):Promise.reject(S(te,"no proper argument"))}({mainLiffId:n,subLiffId:s,mstChallenge:i,appData:e,view:mE(o)}).then(function(a){var l=a.msit;return dm({msit:l,mstChallenge:i,onSuccess:function(u,c){Vn(u,c)},onError:function(u){Vn(G.ERROR,u)}}),l}).then(function(a){return function(l,u){return b(this,void 0,void 0,function(){var c,d,f;return C(this,function(p){switch(p.label){case 0:return c=l.url,(d=new URLSearchParams).set("msit",u),[4,(f=l.onBeforeTransition)===null||f===void 0?void 0:f.call(l)];case 1:return p.sent(),location.href="".concat(cS,"?url=").concat(encodeURIComponent(c),"&").concat(d.toString()),[2]}})})}(t,a)})}function fm(t){return Jt.subwindowOpen(),H()?wE(t):vE(t)}function Bc(t){if(!t.mst||!t.status)return Promise.reject(S(te,"no proper argument"));var e=JSON.stringify(t);return ve(le("subWindowPost"),{method:"POST",body:e})}function ra(){if(!Nt())throw S(_e,"this api can be only called in child window")}function hm(t){return t===void 0&&(t={}),ra(),H()?function(){return b(this,arguments,void 0,function(e){var r,n;return e===void 0&&(e={}),C(this,function(i){switch(i.label){case 0:return(r=Xo())?[4,Bc({mst:r,status:G.CANCEL,result:e})]:[2,Promise.reject(S(_e,"mst is invalid"))];case 1:return n=i.sent(),Zr(!0),[2,n]}})})}(t):function(e){return e===void 0&&(e={}),lm(G.CANCEL,e)}(t)}function pm(t){return t===void 0&&(t={}),ra(),H()?function(){return b(this,arguments,void 0,function(e){var r,n;return e===void 0&&(e={}),C(this,function(i){switch(i.label){case 0:return(r=Xo())?[4,Bc({mst:r,status:G.SUBMIT,result:e})]:[2,Promise.reject(S(_e,"mst is invalid"))];case 1:return n=i.sent(),Zr(!0),[2,n]}})})}(t):function(e){return e===void 0&&(e={}),lm(G.SUBMIT,e)}(t)}function gm(){return ra(),H()?function(){return b(this,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return jo()!==!1?[3,2]:(t=Xo())?[4,Bc({mst:t,status:G.CLOSE,result:{}})]:[2,Promise.reject(S(_e,"mst is invalid"))];case 1:e.sent(),e.label=2;case 2:return jn(),[2]}})})}():function(){return b(this,void 0,void 0,function(){var t;return C(this,function(e){return(t=Zn())!=null&&t.isReady()?(t.send({eventName:G.CLOSE}),[2,new Promise(function(r){setTimeout(function(){jn(),r()},Ev)})]):(jn(),[2,Promise.resolve()])})})}()}function vm(){return ra(),function(){var t,e=kS();try{t=e?JSON.parse(e):{}}catch{t={}}return Promise.resolve(t)}()}function _E(t){var e=t.msit,r=t.mstVerifier;return e&&r?ve(le("subWindowGetMSTByMSIT"),{method:"POST",body:JSON.stringify({msit:e,mstVerifier:r})}):Promise.reject(S(te,"no proper argument"))}function bE(t){var e=t.mst;return e?ve(le("subWindowGetAppData"),{method:"POST",body:JSON.stringify({mst:e})}):Promise.reject(S(te,"no proper argument"))}var rt={on:Yv,off:Xv,open:fm,cancel:hm,submit:pm,close:gm,getAppData:vm};(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"subWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){var r=this;return{on:Yv.bind(this),off:Xv.bind(this),open:function(n){return fm.call(r,J(J({},n),{onBeforeTransition:void 0}))},cancel:hm.bind(this),submit:pm.bind(this),close:gm.bind(this),getAppData:vm.bind(this)}},e})(B);var mm={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.sha256=r()})(Wm,function(){var e=function r(n){function i(me,rr){return me>>>rr|me<<32-rr}for(var s=Math.pow,o=s(2,32),a="length",l,u,c="",d=[],f=n[a]*8,p=r.h=r.h||[],m=r.k=r.k||[],y=m[a],w={},g=2;y<64;g++)if(!w[g]){for(l=0;l<313;l+=g)w[l]=g;p[y]=s(g,.5)*o|0,m[y++]=s(g,.3333333333333333)*o|0}for(n+="";n[a]%64-56;)n+="\0";for(l=0;l<n[a];l++){if(u=n.charCodeAt(l),u>>8)return;d[l>>2]|=u<<(3-l)%4*8}for(d[d[a]]=f/o|0,d[d[a]]=f,u=0;u<d[a];){var h=d.slice(u,u+=16),v=p;for(p=p.slice(0,8),l=0;l<64;l++){var _=h[l-15],k=h[l-2],E=p[0],O=p[4],P=p[7]+(i(O,6)^i(O,11)^i(O,25))+(O&p[5]^~O&p[6])+m[l]+(h[l]=l<16?h[l]:h[l-16]+(i(_,7)^i(_,18)^_>>>3)+h[l-7]+(i(k,17)^i(k,19)^k>>>10)|0),$=(i(E,2)^i(E,13)^i(E,22))+(E&p[1]^E&p[2]^p[1]&p[2]);p=[P+$|0].concat(p),p[4]=p[4]+P|0}for(l=0;l<8;l++)p[l]=p[l]+v[l]|0}for(l=0;l<8;l++)for(u=3;u+1;u--){var j=p[l]>>u*8&255;c+=(j<16?0:"")+j.toString(16)}return c};return e.code='var sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\\x80";b[h]%64-56;)b+="\\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};',e})})(mm);var SE=mm.exports;const EE=sh(SE);var kE=function(){var t=this;this.type="sync",this.fns=new Set,this.on=function(e){t.fns.add(e)},this.call=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var s=er(t.fns),o=s.next();!o.done;o=s.next()){var a=o.value;a.apply(void 0,ie([],F(n),!1))}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}}},ci=function(){var t=this;this.type="async",this.fns=new Set,this.on=function(e){t.fns.add(e)},this.call=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return b(t,void 0,void 0,function(){var n,i,s,o,a,l;return C(this,function(u){switch(u.label){case 0:n=[];try{for(i=er(this.fns),s=i.next();!s.done;s=i.next())o=s.value,n.push(o.apply(void 0,ie([],F(e),!1)))}catch(c){a={error:c}}finally{try{s&&!s.done&&(l=i.return)&&l.call(i)}finally{if(a)throw a.error}}return[4,Promise.all(n)];case 1:return u.sent(),[2]}})})}},Ri=function(t){var e,r=Wn(43),n=pS(EE(r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),i=ue();if(!i||!i.liffId)throw S(Bt,"You need to define `liffId` for liff.login()");var s={app_id:i.liffId,state:Wn(12),response_type:"code",code_challenge_method:"S256",code_challenge:n,liff_sdk_version:ta()};t&&t.redirectUri&&(s.redirect_uri=t.redirectUri),Nt()&&!H()&&(!((e=Zn())===null||e===void 0)&&e.isReady()?s.redirect_uri=window.location.href:s.disable_auto_login="true"),jS({codeVerifier:r});var o=le("authorize")+"?"+De.stringify(s);z.debug("[Redirect] ".concat(o)),window.location.href=o},TE=function(t){function e(){var r=t.apply(this,ie([],F(arguments),!1))||this;return r.hooks={before:new kE},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"login"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this._login.bind(this)},e.prototype._login=function(r){this.hooks.before.call(r),Ri(r)},e}(B),Ga,eo=typeof navigator>"u"?"en":(Ga=navigator.language)!==null&&Ga!==void 0?Ga:"en",mu=null;function OE(t){return b(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return eo=t,[4,ym()];case 1:return e.sent(),[2]}})})}function ym(){return b(this,void 0,void 0,function(){var t,e;return C(this,function(r){switch(r.label){case 0:return[4,ve("".concat("https://liffsdk.line-scdn.net/xlt/manifest.json"),{method:"GET",headers:{Accept:"application/json"}})];case 1:return t=r.sent(),e="".concat(eo),!t.languages[e]&&eo.includes("-")&&(e=eo.split("-")[0]),t.languages[e]||(e="en"),[4,ve("".concat("https://liffsdk.line-scdn.net/xlt","/").concat(t.languages[e]),{method:"GET",headers:{Accept:"application/json"}})];case 2:return mu=r.sent(),[2]}})})}function Ja(t){if(mu===null)throw S(he,"please call xlt after liff.init");return mu[t]}var CE=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"i18n"},enumerable:!1,configurable:!0}),e.prototype.install=function(r){return r.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)),{setLang:OE}},e.prototype.beforeInitFinished=function(){return b(this,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return[4,ym()];case 1:return r.sent(),[2]}})})},e}(B),PE=new CE,Jf={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},Qf={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function IE(){var t;Ne("color-scheme",(((t=Oe())==null?void 0:t.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" "));var e=window.matchMedia("(prefers-color-scheme: dark)");Qa({matches:e==null?void 0:e.matches,media:e==null?void 0:e.media}),e.addEventListener?e.addEventListener("change",Qa):e.addListener&&e.addListener(Qa)}function Qa(t){var e=Oe(),r=(e==null?void 0:e.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:Jf,darkModeColor:Qf},n=r.adaptableColorSchemes,i=r.lightModeColor,s=r.darkModeColor,o=n.includes("dark");t.matches&&o?Yf(J(J({},Qf),s)):Yf(J(J({},Jf),i))}function Yf(t){var e=t.iconColor,r=t.statusBarColor,n=t.titleTextColor,i=t.titleSubtextColor,s=t.titleButtonColor,o=t.titleBackgroundColor,a=t.progressBarColor,l=t.progressBackgroundColor,u=t.titleButtonAreaBackgroundColor,c=t.titleButtonAreaBorderColor,d=t.baseBackgroundColor,f=t.baseTextColor,p=t.lightButtonBorderColor;Ne("--liff-base-background-color",d),Ne("--liff-base-text-color",f),Ne("--liff-base-background-rgb-color",Nf(d)),Ne("--liff-base-text-rgb-color",Nf(f)),Ne("--liff-light-button-border-color",p),Ne("--liff-title-text-color",n),Ne("--liff-title-background-color",o),Ne("--liff-title-button-color",s),Ne("--liff-icon-color",e),Ne("--liff-status-bar-color",r),Ne("--liff-title-subtext-color",i),Ne("--liff-progress-bar-color",a),Ne("--liff-progress-background-color",l),Ne("--liff-title-button-area-background-color",$f(u)),Ne("--liff-title-button-area-border-color",$f(c))}function Ne(t,e){document.documentElement.style.setProperty(t,e)}var xE={addToHomeScreen:function(t){if(!new qa(t).invoke("addToHomeScreen"))throw S(K,"No permission for liff.addToHomeScreen()")},scanCode:function(t){if(!new qa(t).invoke("scanCode"))return Promise.reject(S(K,"No permission for liff.scanCode()"))},getAdvertisingId:function(t){if(!new qa(t).invoke("getAdvertisingId"))return Promise.reject(S(K,"No permission for liff.getAdvertisingId()"))},initPlugins:function(){}};function RE(t){return b(this,void 0,void 0,function(){var e;return C(this,function(r){switch(r.label){case 0:return[4,GS()];case 1:return(e=r.sent())?(e.install(t,xE),[2]):[2]}})})}function AE(){return b(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,ve(le("certs"))];case 1:return[2,t.sent()]}})})}function jE(t,e,r){return b(this,void 0,void 0,function(){var n;return C(this,function(i){switch(i.label){case 0:return[4,crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return n=i.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},n,r,e)];case 2:return[2,i.sent()]}})})}function wm(t,e){return b(this,void 0,void 0,function(){var r,n,i,s,o,a,l,u,c,d,f,p,m,y,w,g;return C(this,function(h){switch(h.label){case 0:return r=t.split("."),n=F(r,3),i=n[0],s=n[1],o=n[2],a=JSON.parse(Va.decode(i)),l=JSON.parse(Va.decodeUnicode(s)),u=Lf(Va.decode(o)),c=Lf("".concat(i,".").concat(s)),[4,AE()];case 1:if(d=h.sent(),!(f=d.keys.find(function(v){return v.kid===a.kid})))return[3,6];if(delete f.alg,a.alg!=="ES256")throw S(Ar,'Invalid "alg" value in ID_TOKEN');p=void 0,h.label=2;case 2:return h.trys.push([2,4,,5]),[4,jE(f,c,u)];case 3:return p=h.sent(),[3,5];case 4:throw m=h.sent(),S(Ar,"".concat("Failed to use Crypto API to verify ID_TOKEN",": ").concat(m));case 5:if(p){if(y=l.iss!=="https://access.".concat("line.me"),w=l.aud!==e,g=1e3*l.exp<Date.now(),y)throw S(Ar,'Invalid "iss" value in ID_TOKEN');if(w)throw S(Ar,'Invalid "aud" value in ID_TOKEN');if(g)throw S(Ar,'Invalid "exp" value in ID_TOKEN');return[2,l]}throw S(Ar,"Invalid signature in ID_TOKEN");case 6:throw S(Ar,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}})})}function Mc(t){var e=t.split(".");if(e[1])try{var r=e[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(r))}catch{return null}return null}function _m(t){var e=t.pathname,r=t.query,n=r?"?".concat(De.stringify(r)):"",i="".concat("liff://").concat(e).concat(n);location.href=i}var yu=null;function $E(){typeof yu=="boolean"&&z.warn("liff.init is not expected to be called more than once"),yu=!!SS()||!(!H()||De.parse(window.location.hash).feature_token||os())&&(ES(!0),!0)}function wu(){return!!yu}function NE(t,e){return b(this,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return(r=Xo())?[2,r]:t&&e?[4,_E({msit:t,mstVerifier:e})]:[3,2];case 1:return[2,n.sent().mst];case 2:return[2,null]}})})}function LE(t){return ve("".concat(le("apps"),"/").concat(t,"/featureToken"))}function UE(t){return b(this,void 0,void 0,function(){var e,r,n,i;return C(this,function(s){switch(s.label){case 0:return e=De.parse(window.location.hash),r=function(o){for(var a,l,u=[],c=1;c<arguments.length;c++)u[c-1]=arguments[c];var d=function(m){Object.keys(m).filter(function(y){return m[y]!==null&&m[y]!==void 0}).forEach(function(y){o[y]=m[y]})};try{for(var f=er(u),p=f.next();!p.done;p=f.next())d(p.value)}catch(m){a={error:m}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}return o}({access_token:Mt(),context_token:AS(),feature_token:os(),id_token:Zo(),client_id:RS(),mst_challenge:$v(),mst_verifier:TS(),msit:CS()},e),wu()?xe()?[4,LE(t)]:[3,2]:[3,3];case 1:n=s.sent().featureToken,r.feature_token||(r.feature_token=n),s.label=2;case 2:(i=Pc(t))&&(r.client_id=i),s.label=3;case 3:return[2,r]}})})}function DE(t){if(t.persisted&&as("multipleLiffTransition"))if(Fe()==="ios")window.location.reload();else{var e=ue().liffId,r=os();if(!e)throw S(he,"Invalid LIFF ID.");if(!r)throw S(K,"Invalid featureToken for client features");_m({pathname:"app/".concat(e),query:{feature_token:r}})}}function FE(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a,l,u,c,d,f,p,m,y,w,g,h,v;return C(this,function(_){switch(_.label){case 0:return[4,new Promise(function(k){var E=zt();if(!E||mt(E,"9.5.0")<0)k();else if(window._liff&&window._liff.features)k();else{z.debug("cannot find window._liff.features, listen to ready event");var O=function(){z.debug("ready event is fired"),Uc("ready",O),k()};Lc("ready",O)}})];case 1:return _.sent(),$E(),[4,UE(t.liffId)];case 2:if(e=_.sent(),r=e.access_token,n=e.context_token,i=e.feature_token,s=e.id_token,o=e.client_id,a=e.mst_verifier,l=e.mst_challenge,u=e.msit,n){if(typeof n!="string")throw S(he,"Cannot get context token, perhaps there is an incorrect parameter in permanent link");Rc(Mc(n))}if(((h=Oe())===null||h===void 0?void 0:h.liffId)!==void 0&&((v=Oe())===null||v===void 0?void 0:v.liffId)!==t.liffId)throw S(he,"Invalid LIFF ID");return!Nt()&&i&&(function(k,E){as("multipleLiffTransition")&&_m({pathname:"app/".concat(k),query:{feature_token:E}})}(t.liffId,i),wu()&&Mf(i)),l&&xS(l),a&&OS(a),o&&Nv(o),u&&PS(u),window.addEventListener("pageshow",DE),xe()?[3,5]:i&&r?[3,5]:wu()?(c=Xi(location.href,{"liff.hback":"2"}),Ri({redirectUri:c}),[4,new Promise(function(){})]):[3,4];case 3:_.sent(),_.label=4;case 4:throw Ri(),S(he,"Failed to parse feature_token or access_token");case 5:return r&&i?[4,Nc(r)]:[3,7];case 6:if(d=_.sent(),f=d.client_id,p=d.expires_in,m=Pc(t.liffId),f!==m)throw Ri(),S(he,"Failed to verify access_token");Mf(i),Fv(new Date(Date.now()+1e3*p)),Ac(r),_.label=7;case 7:return[4,NE(u,a)];case 8:return(y=_.sent())?(IS(y),[4,bE({mst:y})]):[3,10];case 9:(w=_.sent().data)&&du(JSON.stringify(w)),_.label=10;case 10:return s&&!Zo()&&Lv(s),s&&o&&!ea()?[4,wm(s,o)]:[3,12];case 11:(g=_.sent())&&Bv(g),_.label=12;case 12:return[2]}})})}function BE(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a;return C(this,function(l){switch(l.label){case 0:return e=le("apps"),r="".concat(e,"/").concat(t,"/contextToken"),n=Mt(),i={"Content-Type":"application/json",Accept:"application/json"},n&&(i.Authorization="Bearer ".concat(n)),[4,ve(r,{headers:i})];case 1:if(s=l.sent(),!(o=s.contextToken))throw S(he,"Can not get context from server.");if(!(a=Mc(o)))throw S(he,"Invalid context token.");return[2,a]}})})}function bm(){return b(this,void 0,void 0,function(){var t,e;return C(this,function(r){switch(r.label){case 0:if(!(t=ue().liffId))throw S(he,"Invalid LIFF ID.");return[4,BE(t)];case 1:return e=r.sent(),Rc(e),[2]}})})}function ME(t){return b(this,void 0,void 0,function(){var e,r,n,i=this;return C(this,function(s){switch(s.label){case 0:e=function(){return b(i,void 0,void 0,function(){var o,a,l,u,c,d;return C(this,function(f){switch(f.label){case 0:return[4,(p=ue(),m=De.parse(window.location.search),y=Dv(),w={grant_type:"authorization_code",client_id:m.liffClientId,appId:p.liffId,code:m.code,code_verifier:y.codeVerifier,redirect_uri:p.redirectUri||m.liffRedirectUri,id_token_key_type:"JWK"},g=De.stringify(w),ve(le("token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:g}))];case 1:return o=f.sent(),a=o.access_token,l=o.id_token,u=o.expires_in,Nv(t),Ac(a),Fv(new Date(Date.now()+1e3*u)),zf(),l?(Lv(l),[4,wm(l,t)]):[3,3];case 2:(c=f.sent())&&Bv(c),f.label=3;case 3:return(d=De.parse(location.hash).context_token)?(Rc(Mc(d)),[3,6]):[3,4];case 4:return[4,bm()];case 5:f.sent(),f.label=6;case 6:return[2]}var p,m,y,w,g})})},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e()];case 2:return s.sent(),[3,4];case 3:throw r=s.sent(),n=r,zf(),n;case 4:return[2]}})})}function Sm(){return b(this,void 0,void 0,function(){var t,e,r,n,i,s,o=this;return C(this,function(a){switch(a.label){case 0:return(e=Zn())?[3,2]:[4,sm(Pi.SUB)];case 1:e=a.sent(),a.label=2;case 2:return(t=e).isReady()?(r=Wn(8),[4,t.getData("appData")]):[3,8];case 3:return n=a.sent(),i=n.eventName,s=n.data,i!==Zs.NOT_FOUND?[3,6]:[4,t.teardown()];case 4:return a.sent(),[4,Sm()];case 5:return[2,a.sent()];case 6:s&&du(JSON.stringify(s)),a.label=7;case 7:return t.listen(function(l){return b(o,void 0,void 0,function(){var u,c;return C(this,function(d){return u=l.context,c=u.data,u.eventName===G.INIT&&(c==null?void 0:c.subWindowId)!==r&&jn(),u.eventName!==G.CANCEL&&u.eventName!==G.SUBMIT||t.teardown(),[2]})})}),xe()&&t.send({eventName:G.INIT,data:{subWindowId:r,hasOpener:!!window.opener}}),[3,10];case 8:return am()?[3,10]:[4,new Promise(function(l){window.addEventListener("message",function(u){return function c(d){var f=d.data,p=d.source,m=d.origin;if(f){var y=f.type,w=f.message;y===Ro&&(window.removeEventListener("message",c),w&&du(w),hE(m),p&&p.postMessage&&p.postMessage({status:Ro},m),u())}}}(l))})];case 9:return[2,a.sent()];case 10:return[2]}})})}var zE=new(function(){function t(){var e=this;this.getAndValidateContext=function(){var r=Oe();if(!r)throw S(he,"Could not get Context from server.");if(!r.endpointUrl)throw S(he,"Could not get endpointUrl from server.");if(!r.permanentLinkPattern)throw S(he,"Could not get permanentLinkPattern from server.");return r},this.decodeState=function(r){var n=e.getAndValidateContext();r=r.replace(/\n/g,"%0D%0A");var i=e.hasTrailingSlash(n.endpointUrl)||e.hasTrailingSlash(r),s=new URL(n.endpointUrl),o=s.origin,a=s.pathname,l=s.search,u=new URL("".concat(o).concat(e.attachSlashAtStart(r))),c=u.pathname,d=u.search,f=u.hash,p="".concat(l).concat(l?d.replace(/\?/g,"&"):d),m="".concat(a).concat(e.attachSlashAtStart(c)).replace("//","/");return(m=e.attachSlashAtStart("".concat(m))).endsWith("/")&&!i&&(m=m.substring(0,m.length-1)),"".concat(o).concat(m).concat(p).concat(f).replace(/%0D%0A/g,`
`)}}return t.prototype.attachSlashAtStart=function(e){return"".concat(e&&e.length>0&&!e.startsWith("/")?"/":"").concat(e)},t.prototype.hasTrailingSlash=function(e){var r=e.indexOf("?"),n=e.indexOf("#"),i=-1;return(i=r===-1&&n===-1?e.length:r===-1?n:n===-1?r:Math.min(r,n))>0&&e[i-1]==="/"},t.prototype.invoke=function(){return b(this,void 0,void 0,function(){var e,r,n,i,s;return C(this,function(o){switch(o.label){case 0:if(e=De.parse(window.location.search),typeof(r=e["liff.state"])!="string")return[2];o.label=1;case 1:return o.trys.push([1,4,,5]),n=location.href,(i=this.decodeState(r))===n?[3,3]:(e["liff.hback"]?location.replace(Xi(i,{"liff.hback":e["liff.hback"]})):location.replace(i),[4,new Promise(function(){})]);case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if((s=o.sent()).code===he)throw s;return z.debug(s),[3,5];case 5:return[2]}})})},t}());function WE(t,e){return b(this,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:if(!t.liffId)throw S(Bt,"liffId is necessary for liff.init()");return _S(t),!H()&&xe()&&($S()||jc()),r=De.parse(window.location.search),!Nt()||H()?[3,2]:[4,Sm()];case 1:i.sent(),i.label=2;case 2:if(r.error&&r.liffOAuth2Error)throw a=r.error,l=r.error_description,u=l.replace(/\+/g," "),c="".concat(a,": ").concat(u),S(he,c);return s=r.code,o=Dv(),s&&!xe()&&o&&o.codeVerifier?[4,ME(r.liffClientId)]:[3,4];case 3:i.sent(),i.label=4;case 4:return H()?[4,FE(t)]:[3,6];case 5:return i.sent(),[3,8];case 6:return xe()?[3,8]:[4,bm()];case 7:i.sent(),i.label=8;case 8:return[4,zE.invoke()];case 9:if(i.sent(),n=Oe())try{$c(location.href,n.endpointUrl)}catch{z.warn(`liff.init() was called with a current URL that is not related to the endpoint URL.
`.concat(location.href," is not under ").concat(n.endpointUrl))}return[4,e()];case 10:return i.sent(),mS(window.location.href),[2]}var s,o,a,l,u,c})})}var Em=function(t,e){return new Promise(function(r,n){if(t){var i=document.createElement("script");i.type="module",i.onload=function(){r()},i.src=t,document.head.appendChild(i)}else n(S(Bt,e))})},VE=function(t){var e="https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js";return e&&t&&(e=e.replace(/\d{1,2}\.\d{1,2}\.\d{1,3}/,t)),Em(e,"LUI_ALERT_URL is not defined")},Ya=function(){return b(void 0,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return t=function(){var n,i=document.querySelector('script[src*="luivendor.js"]');if(i&&(!((n=i.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g))===null||n===void 0)&&n.length))return i.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)[0]}(),t?[3,2]:[4,Em("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js","LUI_VENDOR_URL is not defined")];case 1:e.sent(),e.label=2;case 2:return[4,VE(t)];case 3:return e.sent(),[4,(r=Wn(6),new Promise(function(){var n=document.createElement("div");n.innerHTML='<lui-alert id="'.concat("liffAlert","-").concat(r,'" shown title="').concat(Ja("alert.android.extBrowser.autoLoginWorkaround.title"),'" message="').concat(Ja("alert.android.extBrowser.autoLoginWorkaround.desc"),'" button="').concat(Ja("alert.android.extBrowser.autoLoginWorkaround.button.text"),'"></lui-alert>'),document.body.appendChild(n);var i=document.getElementById("".concat("liffAlert","-").concat(r));i&&i.addEventListener("lui-button-click",function(){var s=window.open(Xi(window.location.href,{liffIsEscapedFromApp:"true"}),"_blank");s&&(s.location.href=Xi(window.location.href,{liffIsEscapedFromApp:"true"}),window.close())})}))];case 4:return e.sent(),[2]}var r})})},Xf=function(t){try{return new URL(t).searchParams.get("lineAppVersion")}catch{return null}};function HE(){return b(this,void 0,void 0,function(){var t,e,r;return C(this,function(n){switch(n.label){case 0:return t=(r=Xf(window.location.href))!==null&&r!==void 0?r:Xf(window.document.referrer),t&&mt(t,"13.10.0")>=0?[2]:H()||Fe()!=="android"||(e=De.parse(window.location.search))[qv]||e.liffIsEscapedFromApp?[2]:e.liffClientId&&document.referrer.includes("access.".concat("line.me"))?(window.location.href=Xi(window.location.href,{liffIsEscapedFromApp:"true"}),[2]):e.liffClientId&&document.referrer.includes("android-app://")?[4,Ya()]:[3,2];case 1:n.sent(),n.label=2;case 2:return e.liffClientId&&document.referrer===""&&window.history.length===1?[4,Ya()]:[3,4];case 3:n.sent(),n.label=4;case 4:return!document.referrer.includes("liffClientId")||document.referrer.includes("liffIsEscapedFromApp")?[3,6]:[4,Ya()];case 5:n.sent(),n.label=6;case 6:return[2]}})})}var KE=function(t){function e(){var r=t.apply(this,ie([],F(arguments),!1))||this;return r.hooks={before:new ci,after:new ci},r.internalHooks={beforeFinished:new ci,beforeSuccess:new ci,error:new ci},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),e.prototype.install=function(r){var n=r.liff;return this.liffForWindow=n,this.init.bind(this)},e.prototype.init=function(r,n,i){return b(this,void 0,void 0,function(){var s;return C(this,function(o){switch(o.label){case 0:return[4,this.hooks.before.call()];case 1:o.sent(),a=this.liffForWindow,window&&!window.liff&&(window.liff=a),o.label=2;case 2:return o.trys.push([2,9,,11]),[4,Promise.all([RE(this.liffForWindow),WE(r,this.internalHooks.beforeFinished.call)])];case 3:return o.sent(),IE(),[4,this.internalHooks.beforeSuccess.call()];case 4:return o.sent(),!r.withLoginOnExternalBrowser||xe()?[3,6]:(Ri(),[4,new Promise(function(){})]);case 5:o.sent(),o.label=6;case 6:return[4,HE()];case 7:return o.sent(),[4,this.hooks.after.call()];case 8:return o.sent(),typeof n=="function"&&n(),bv(),[3,11];case 9:return s=o.sent(),[4,this.internalHooks.error.call(s)];case 10:throw o.sent(),typeof i=="function"&&i(s),s;case 11:return[2]}var a})})},e}(B);function km(){return{liffApp:"https://liff.".concat("line.me"),liffServer:"https://api.".concat("line.me"),miniApp:"https://miniapp.".concat("line.me")}}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getOrigins"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return km()}},e})(B);function Tm(){return navigator.language}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getLanguage"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Tm()}},e})(B);function Om(){var t=zt();if(!t||!H()||Fe()!=="ios")return navigator.language;if(mt(t,"14.11.0")>=0){var e=window.prompt("LIFF:GET_APP_LANGUAGE");if(e)return e}return navigator.language}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAppLanguage"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Om()}},e})(B);function Cm(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a;return C(this,function(l){switch(l.label){case 0:return function(u){if(!fS.includes(u))throw S(te,"Unexpected permission name.");var c=Oe();return!!(c!=null&&c.scope.includes(u))}(t)?(e=Mt())?[4,Nc(e)]:[3,2]:[2,{state:"unavailable"}];case 1:r=l.sent(),n=unescape(r.scope).split(" ");try{for(i=er(n),s=i.next();!s.done;s=i.next())if(s.value.includes(t))return[2,{state:"granted"}]}catch(u){o={error:u}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}return[2,{state:"prompt"}];case 2:throw S(_e,"Need access_token for api call, Please login first")}})})}function Pm(){var t,e,r=Oe();return!!r&&r.type!=="square_chat"&&(as("skipChannelVerificationScreen")||!H()&&((e=(t=r.availability)===null||t===void 0?void 0:t.skipChannelVerificationScreen)===null||e===void 0?void 0:e.permission))}function qE(){var t=ue().liffId;if(t)return ve("".concat(le("unauthorizedPermissions"),"?liffId=").concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(Mt())}});throw S(_e,"liffId is required")}var to,Ds=rt.on,Fs=rt.off,GE=rt.open,JE=function(){function t(e,r){var n=this;this.onSubmit=function(i){return b(n,[i],void 0,function(s){var o=s.newAccessToken,a=s.ICA_ERROR;return C(this,function(l){return o?this.resolve({newAccessToken:o}):a&&this.reject(S(Ie,a)),this.teardown(),[2]})})},this.onClose=function(){return b(n,void 0,void 0,function(){return C(this,function(i){return this.reject(S(_e,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onCancel=function(){return b(n,void 0,void 0,function(){return C(this,function(i){return this.reject(S(_e,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onError=function(i){return b(n,void 0,void 0,function(){return C(this,function(s){return this.reject(i),this.teardown(),[2]})})},this.resolve=e,this.reject=r,this.setup()}return t.prototype.setup=function(){Ds("submit",this.onSubmit),Ds("close",this.onClose),Ds("cancel",this.onCancel),Ds("error",this.onError)},t.prototype.teardown=function(){Fs("submit",this.onSubmit),Fs("close",this.onClose),Fs("cancel",this.onCancel),Fs("error",this.onError),to=void 0},t.prototype.open=function(e){var r=ue().liffId;r?GE({url:"".concat("https://liff.line.me/1656032314-Xgrw5Pmk"),appData:{liffId:r,channelId:Pc(r),accessToken:Mt()},onBeforeTransition:e}).catch(this.reject):this.reject(S(_e,"liffId is required"))},t}();function Im(){return b(this,void 0,void 0,function(){var t,e,r=this;return C(this,function(n){switch(n.label){case 0:if(!Pm())throw S(K,"SkipChannelVerificationScreen is unavailable.");return to&&to.teardown(),t=function(){return b(r,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return[4,qE()];case 1:if(i=s.sent(),(H()?i:i.filter(function(o){return o!=="chat_message.write"})).length<=0)throw S(K,"All permissions have already been approved.");return[2]}})})},[4,new Promise(function(i,s){(to=new JE(i,s)).open(t)})];case 1:return e=n.sent().newAccessToken,Ac(e),[2]}})})}function QE(){return b(this,void 0,void 0,function(){var t,e;return C(this,function(r){switch(r.label){case 0:if(!(t=Mt()))throw S(_e,"Need access_token for api call, Please login first");return[4,Nc(t)];case 1:return e=r.sent(),[2,decodeURIComponent(e.scope).split(" ").filter(function(n){return n!==""})]}})})}function $n(t,e){var r=this;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return b(r,void 0,void 0,function(){var s,o,a;return C(this,function(l){switch(l.label){case 0:return s=(n.length>0?n[n.length-1]:{}).ignorePermissionCheck,o=s!==void 0&&s,[4,Cm(e)];case 1:if((a=l.sent().state)!=="unavailable")return[3,2];throw S(K,"The permission is not in LIFF app scope.");case 2:return a!=="prompt"||!Pm()||o||!H()&&e==="chat_message.write"?[3,4]:[4,Im()];case 3:return l.sent(),[3,5];case 4:o&&n.pop(),l.label=5;case 5:return[4,t.apply(void 0,ie([],F(n),!1))];case 6:return[2,l.sent()]}})})}}var YE=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"permission"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return{query:Cm,requestAll:Im,getGrantedAll:QE}},e}(B),XE=new YE;function zc(){return ve(le("profile"))}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getProfile"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return $n(zc,"profile")},e})(B);var ZE=function(t,e){return t?"&".concat(t.split("&").filter(function(r){return r.indexOf("is_liff_external_open_window")===-1}).join("&").concat("".concat(e?"#".concat(e):""))):"".concat(e?"#".concat(e):"")};function na(t){if(!function(s){if(!s||typeof s!="object")return!1;var o=s,a=o.url,l=o.external,u=F([typeof a,typeof l],2),c=u[0],d=u[1];return c==="string"&&a!==""&&(d==="undefined"||d==="boolean")}(t))throw S(te,"Invalid parameters for liff.openWindow()");var e=zt();if(H())if(e!==null&&Fe()==="ios"&&mt(e,"9.19")>=0||!window._liff.postMessage){var r=t.url,n=t.external,i=n!==void 0&&n;window.open(function(s,o){var a,l,u,c,d,f,p,m,y;(function(g){return g.indexOf("#")!==-1&&g.indexOf("?")!==-1&&g.indexOf("#")<g.indexOf("?")})(s)||function(g){return g.indexOf("?")===-1&&g.indexOf("#")!==-1}(s)?(p=(a=F(s.split("#"),2))[0],l=a[1],m=(u=F((l===void 0?"":l).split("?"),2))[0],y=u[1]):(p=(c=F(s.split("?"),2))[0],d=c[1],y=(f=F((d===void 0?"":d).split("#"),2))[0],m=f[1]);var w=ZE(y,m);return"".concat(p,"?").concat("is_liff_external_open_window","=").concat(!!o).concat(w)}(r,i))}else Xn("openWindow",t);else window.open(t.url,"_blank")}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"openWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(r){return na(r)}},e})(B);var ek=function(t){return typeof t=="object"&&t!==null&&function(e){return typeof e=="string"||e instanceof String}(t.type)};function Zf(t){return Promise.reject(S(te,t))}function xm(t){if(!function(r){return Array.isArray(r)&&r.every(ek)}(t))return Zf("Parameter 'messages' must be an array of { type, ... }");var e=t.length;return e<1||e>5?Zf("Number of messages should be in range 1 to ".concat(5,".")):ve(le("message"),{method:"POST",body:JSON.stringify({messages:t})}).catch(tk)}var tk=function(t){if(t.code==="403"){var e=zt()==="12.0.0",r=Fe()==="ios",n=xc();e&&(r||n)&&window.alert(`LINELINE 12.0.1
Please update your LINE app to LINE 12.0.1 or later.`)}throw t};(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"sendMessages"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return $n(xm,"chat_message.write")},e})(B);function Rm(){return ve(le("friendship"))}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getFriendship"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return $n(Rm,"profile")},e})(B);function rk(){return b(this,void 0,void 0,function(){var t,e;return C(this,function(r){switch(r.label){case 0:if(!xe())return[3,6];r.label=1;case 1:return r.trys.push([1,5,,6]),(t=ea())&&t.sub?[2,t.sub]:[3,2];case 2:return[4,zc()];case 3:if((e=r.sent())&&e.userId)return[2,e.userId];r.label=4;case 4:return[3,6];case 5:return r.sent(),z.debug("can't retrieve Mid/Uid because of something wrong"),[3,6];case 6:return[2]}})})}function nk(){return b(this,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return[4,rk()];case 1:return(t=e.sent())&&t.substring(0,1)==="u"?[2,t]:[2]}})})}var ik=function(t){function e(){var r=t.apply(this,ie([],F(arguments),!1))||this;return r.utsExtra={isLiffSuccessful:!1,isLoggedIn:!1,id:"",version:""},r.injected=!1,r}return U(e,t),Object.defineProperty(e,"CUSTOMPLACEID_INIT",{get:function(){return"liff.init"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CUSTOMTYPE",{get:function(){return"liffSdk"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LiffUtsLoginStatus",{get:function(){return{isLoggedIn:1,isLiffSuccessful:2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"analytics"},enumerable:!1,configurable:!0}),e.prototype.install=function(r){var n=r.liff,i=r.internalHooks;this.liffCore=n,i.init.beforeFinished(this.beforeInitFinished.bind(this)),i.init.beforeSuccess(this.beforeInitSuccess.bind(this)),i.init.error(this.initError.bind(this))},e.prototype.createDeprecatedUtsProxy=function(r){var n="LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions.";return new Proxy(r,{get:function(i,s){var o=i[s];return typeof o=="function"?function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return z.warn("[LIFF Analytics] ".concat(n," Called method: ").concat(String(s))),o.apply(i,a)}:o}})},e.prototype.changeRatioToUTSFormat=function(r){if(r&&Number.isFinite(r))return Math.round(100*r)},e.prototype.setExtra=function(){var r,n=this.utsExtra,i=n.isLiffSuccessful,s=n.isLoggedIn,o=n.id,a=n.version,l=(s?e.LiffUtsLoginStatus.isLoggedIn:0)|(i?e.LiffUtsLoginStatus.isLiffSuccessful:0);(r=this.uts)===null||r===void 0||r.setExtra("liff",{id:o,loginStatus:l,version:a})},e.prototype.assignUtsExtra=function(r){Object.assign(this.utsExtra,r)},e.prototype.setVersion=function(r){this.assignUtsExtra({version:r}),z.debug("[LIFFUTS][SDK version] ".concat(r)),this.setExtra()},e.prototype.setLiffId=function(r){this.assignUtsExtra({id:r}),z.debug("[LIFFUTS][LIFFID] ".concat(r)),this.setExtra()},e.prototype.setIsLoggedIn=function(r){this.assignUtsExtra({isLoggedIn:r}),z.debug("[LIFFUTS][isLoggedIn] ".concat(r)),this.setExtra()},e.prototype.sendLiffInit=function(){var r;z.debug("[LIFFUTS][sendCustom] liff.init"),(r=this.uts)===null||r===void 0||r.sendCustom({type:e.CUSTOMTYPE,params:{placeId:e.CUSTOMPLACEID_INIT}})},e.prototype.setIsLiffSuccessful=function(r){this.assignUtsExtra({isLiffSuccessful:r}),z.debug("[LIFFUTS][isLiffInitSuccessful] ".concat(r)),this.setExtra()},e.prototype.prepareReferrer=function(r){var n={};Object.keys(r).forEach(function(i){if(uS.includes(i)){var s=r[i];typeof s=="string"&&s&&(n[i.replace(/^liff\.ref\./,"")]=s)}}),Object.keys(n).length>0&&(this.referrer=n)},e.prototype.beforeInitFinished=function(){return b(this,void 0,void 0,function(){var r,n,i,s,o,a,l,u,c,d,f,p;return C(this,function(m){switch(m.label){case 0:if(r=De.parse(window.location.search),this.prepareReferrer(r),n=Oe(),!(i=n==null?void 0:n.utsTracking))return[2];if(s=ue(),o=s.liffId,a=s.analytics,i.mode!=="auto"||!a)return[3,6];z.warn("[LIFF Analytics] LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions."),z.debug("[LIFFUTS] ".concat(new Date().toUTCString())),m.label=1;case 1:return m.trys.push([1,3,,4]),l=this,[4,new Promise(function(y,w){var g=window.uts,h=document.createElement("script");h.type="text/javascript",h.src="https://static.line-scdn.net/uts/edge/4.1.0/uts.js",h.onload=function(){var v=window.uts;y(v),window.uts=g},h.onerror=function(v){w(v)},document.getElementsByTagName("head")[0].appendChild(h)})];case 2:return l.uts=m.sent(),[3,4];case 3:return u=m.sent(),z.debug("[LIFFUTS] cannot load UTS, reason: ".concat(u)),[2];case 4:return c=J(J({},a.context),{utsId:a.context.utsId,appName:a.context.appName,appEnv:a.context.appEnv||"release"}),d=J(J({endpoint:"https://uts-front.line-apps.com"},a.options),{sampleRate:this.changeRatioToUTSFormat(i.sendRatio),version:"current"}),this.uts.init(c,d),[4,nk()];case 5:(f=m.sent())&&(z.debug("[LIFFUTS][mid] ".concat(f)),this.uts.setMid(f)),n!=null&&n.tid&&(z.debug("[LIFFUTS][tid] ".concat(n.tid)),this.uts.setTid(n.tid)),this.referrer&&(z.debug("liff.ref.referrer",this.referrer),this.uts.setSessionParams(this.referrer)),o&&this.setLiffId(o),this.setIsLoggedIn(xe()),this.setVersion(ta()),p=Cv(location.href),z.debug("[LIFFUTS][url] ".concat(p)),this.uts.setUrl(p),this.liffCore.analytics=this.createDeprecatedUtsProxy(this.uts),this.injected=!0,m.label=6;case 6:return[2]}})})},e.prototype.beforeInitSuccess=function(){return this.injected&&(this.setIsLiffSuccessful(!0),this.sendLiffInit()),Promise.resolve()},e.prototype.initError=function(){return this.injected&&(this.setIsLiffSuccessful(!1),this.sendLiffInit()),Promise.resolve()},e}(B),sk=function(t){z.warn("[LIFF Analytics] LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions. Called function: sendShareTargetPicker"),z.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"),t.sendCustom({type:"liffSdk",params:{placeId:"liff.shareTargetPicker"}})},hn,ok=function(){function t(e,r){var n=this;this.resolve=e,this.reject=r,this.onSubmit=function(i){var s=i.message;n.resolve({value:s}),n.destroy()},this.onClose=function(){n.resolve({value:null}),n.destroy()},this.onCancel=function(){n.resolve({value:null}),n.destroy()},this.onError=function(i){n.reject(i),n.destroy()},this.start()}return t.prototype.start=function(){rt.on("submit",this.onSubmit),rt.on("close",this.onClose),rt.on("cancel",this.onCancel),rt.on("error",this.onError)},t.prototype.destroy=function(){rt.off("submit",this.onSubmit),rt.off("close",this.onClose),rt.off("cancel",this.onCancel),rt.off("error",this.onError),hn=void 0},t}();function ak(){return b(this,void 0,void 0,function(){return C(this,function(t){return Jt.scanCodeV2(),hn&&hn.destroy(),[2,new Promise(function(e,r){hn=new ok(e,r),rt.open({url:"https://liff.line.me/1656359117-jxmx5e11"}).catch(function(n){hn==null||hn.destroy(),r(n)})})]})})}var lk=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"scanCodeV2"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return ak},e}(B),uk=new lk,Am={};function ck(){return Am}function dk(t,e){var r=ck(),n=F(e.split("."),1)[0],i=r[e];i&&t.removeEventListener(n,i),r[e]=null}var eh=!1,th=!1;function fk(t,e,r,n){eh||(th=function(){var s=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return s=!0,!1}});window.addEventListener("test",o,o),window.removeEventListener("test",o,o)}catch{s=!1}return s}(),eh=!0);var i=F(e.split("."),1)[0];return new Promise(function(s){var o=function(a){s(a),r&&r(a)};(function(a,l){Am[a]=l})(e,o),t.addEventListener(i,o,!!th&&n)})}function rh(t,e,r,n){if(r===void 0&&(r={}),typeof t!="object"||!t.postMessage)throw S(te,"target must be window object");if(typeof e!="string")throw S(te,"keyname must be string");if(typeof r!="object")throw S(te,"incorrect body format. It should be Object or Array comprised of Object");if(!n)throw S(te,"serverEndPointUrl isn't passed. please fill up with proper url");if(n==="*")throw new Error("serverEndPointUrl doesn't allow to set '*'");var i={name:e,body:r};t.postMessage(i,n)}function hk(t,e,r,n){fk(t,"message.".concat(e),function(i,s,o){return function(a){z.debug("messageReceive",a),a.origin===o&&a.data.name===i&&s(a)}}(e,r,n))}var pk=function(){function t(){this.payloadToShareTargetPicker=null,this.popupWindow=null,this.doesWaitForSubwindowResult=!1}return t.getInstance=function(){return t.instance?t.instance.reset():t.instance=new t,t.instance},t.prototype.init=function(e){return b(this,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),this.liffId=e.referrer.liffId,this.doesWaitForSubwindowResult=!(!e.options||!e.options.waitForSubwindowResult),this.allowPostMessageOrigin=this.initAllowPostMessageOrigin(),this.payloadToShareTargetPicker=this.buildPayloadToShareTargetPicker(e),window.AbortController&&(this.abortController=new window.AbortController),this.prepareAnotherWindow(),[4,this.initOtt()];case 1:return i.sent(),this.initListener(),this.openAnotherWindow(),this.doesWaitForSubwindowResult?[4,this.pollingShareResult()]:[3,3];case 2:return r=i.sent(),this.finalize(),[2,r];case 3:case 6:return[2];case 4:return[3,6];case 5:if(n=i.sent(),this.finalize(),n.name!=="AbortError")throw n;return[3,6]}})})},t.prototype.resetAllVariables=function(){this.liffId="",this.allowPostMessageOrigin="",this.payloadToShareTargetPicker=null,this.ott="",this.popupWindow=null,this.timeoutIDForHealthCheck=null,this.abortController=null,this.internalError=null,this.doesWaitForSubwindowResult=!1},t.prototype.reset=function(){this.finalize(),this.resetAllVariables()},t.prototype.finalize=function(){var e,r;this.abortController&&this.abortController.abort(),H()||(e=this.timeoutIDForHealthCheck,r=this.popupWindow,dk(window,"message.receivedHealthcheck"),e&&clearTimeout(e),r&&!r.closed&&r.close())},t.prototype.buildPayloadToShareTargetPicker=function(e){return{messages:e.messages,isMultiple:e.isMultiple,referrer:e.referrer}},t.prototype.initAllowPostMessageOrigin=function(e){return e===void 0&&(e=le("shareTargetPicker")),yS(e)},t.prototype.initOtt=function(){return b(this,void 0,void 0,function(){var e,r,n;return C(this,function(i){switch(i.label){case 0:return this.abortController&&(e=this.abortController.signal),r="".concat(le("shareTargetPickerOtt"),"/").concat(this.liffId,"/ott"),n=this,[4,ve(r,{method:"GET",signal:e}).then(function(s){return s.ott})];case 1:return n.ott=i.sent(),[2]}})})},t.prototype.prepareAnotherWindow=function(){H()||(Fe()!=="ios"||xc()?this.popupWindow=window.open("","liffpopup","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):this.popupWindow=window.open())},t.prototype.openAnotherWindow=function(){if(H()&&this.payloadToShareTargetPicker)e=this.liffId,r=this.ott,n=this.payloadToShareTargetPicker,i={liffId:e,ott:r,data:JSON.stringify(n),closeModals:!1},location.href="".concat("line://picker","?").concat(De.stringify(i));else{if(this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),!this.popupWindow)throw S(au);(function(s,o,a){var l={liffId:o,ott:a};s.location.href="".concat(le("shareTargetPicker"),"?").concat(De.stringify(l))})(this.popupWindow,this.liffId,this.ott)}var e,r,n,i},t.prototype.initListener=function(){var e,r;H()||(e=this.onReceivedHealthcheck.bind(this),r=this.allowPostMessageOrigin,hk(window,"receivedHealthcheck",e,r))},t.prototype.healthCheck=function(){return b(this,void 0,void 0,function(){var e;return C(this,function(r){switch(r.label){case 0:if(this.popupWindow&&!this.popupWindow.closed)return[3,7];if(!this.doesWaitForSubwindowResult)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.onCanceled()];case 2:return r.sent(),[3,4];case 3:return e=r.sent(),this.internalError=e,[3,4];case 4:return[3,6];case 5:this.finalize(),r.label=6;case 6:return[3,8];case 7:n=this.popupWindow,i=this.allowPostMessageOrigin,rh(n,"healthcheck",void 0,i),this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),r.label=8;case 8:return[2]}var n,i})})},t.prototype.onReceivedHealthcheck=function(){if(!this.popupWindow||!this.payloadToShareTargetPicker)throw S(au);var e,r,n;e=this.popupWindow,r=this.payloadToShareTargetPicker,n=this.allowPostMessageOrigin,rh(e,"ready",r,n)},t.prototype.onCanceled=function(){return b(this,void 0,void 0,function(){var e,r;return C(this,function(n){switch(n.label){case 0:if(H()||!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),r={liffId:this.liffId,ott:this.ott},[4,ve("".concat(le("shareTargetPickerResult"),"?").concat(De.stringify(r)),{method:"POST",signal:e,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:"result=CANCEL"})];case 1:return[2,n.sent().status==="ok"]}})})},t.prototype.getShareResult=function(){return b(this,void 0,void 0,function(){var e,r;return C(this,function(n){if(!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),r={liffId:this.liffId,ott:this.ott},z.debug("fetch: getShareResult"),[2,ve("".concat(le("shareTargetPickerResult"),"?").concat(De.stringify(r)),{method:"GET",headers:{Accept:"application/json"},signal:e})]})})},t.isPollingTimeOut=function(e,r){return(r-e)/6e4>=10},t.prototype.pollingShareResult=function(){return b(this,void 0,void 0,function(){var e,r;return C(this,function(n){switch(n.label){case 0:e=Date.now(),n.label=1;case 1:if(t.isPollingTimeOut(e,Date.now()))return[3,4];if(this.internalError)throw this.internalError;return[4,this.getShareResult()];case 2:if((r=n.sent())&&r.result)switch(r.result){case"SUCCESS":return[2,{status:"success"}];case"CANCEL":return[2];default:throw new Error(r.resultDescription)}return[4,new Promise(function(i){setTimeout(i,500)})];case 3:return n.sent(),[3,1];case 4:throw new Error("Timeout: not finished within ".concat(10,"min"))}})})},t}(),gk=function(t){function e(){var r=t.apply(this,ie([],F(arguments),!1))||this;return r.shareTargetPicker=function(n){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return b(r,ie([n],F(i),!1),void 0,function(o,a){var l,u,c,d,f,p,m;return a===void 0&&(a={}),C(this,function(y){switch(y.label){case 0:if(Jt.shareTargetPicker(),!o||!Array.isArray(o)||o.length===0)throw S(te,"no proper argument");if(o.length>lS)throw S(te,"exceed the limit of num of messages");if(!(l=ue().liffId))throw S(Bt);window.liff&&(u=window.liff).analytics&&sk(u.analytics),c=a.isMultiple===void 0||a.isMultiple,y.label=1;case 1:return y.trys.push([1,3,,4]),d=pk.getInstance(),f=zt(),p={waitForSubwindowResult:!0},H()&&f&&mt(f,"10.11.0")<0&&(p.waitForSubwindowResult=!1),[4,d.init({messages:o,isMultiple:c,referrer:{liffId:l,url:location.origin},options:p})];case 2:return[2,y.sent()];case 3:throw(m=y.sent())instanceof Tv?m:S(lu,m.message);case 4:return[2]}})})},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"shareTargetPicker"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.shareTargetPicker},e}(B),vk=new gk;function jm(t,e){return b(this,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return r=le("createShortcutOnHomeScreen"),(n=new URL(r)).searchParams.append("liffId",t),n.searchParams.append("url",e.url),e.description&&n.searchParams.append("description",e.description),[4,ve(n.toString())];case 1:return[2,i.sent().shortcutPageUrl]}})})}function $m(t){if(cu(t))throw S(te,"LINE URL scheme are not supported in the current environment.")}function mk(t,e){return b(this,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return H()?[2]:[4,new Promise(function(i){setTimeout(i,1e3)})];case 1:return n.sent(),document.visibilityState==="hidden"?[2]:($m(e.url),[4,jm(t,e)]);case 2:return r=n.sent(),na({url:r,external:!0}),[2]}})})}function yk(t,e){return b(this,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return r={liffId:t,targetUrl:e.url,description:e.description},n="".concat("line://shortcut/liff","?").concat(De.stringify(r)),location.href=n,[4,mk(t,e)];case 1:return i.sent(),[2]}})})}function wk(t,e){return b(this,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return $m(e.url),[4,jm(t,e)];case 1:return r=n.sent(),na({url:r,external:!0}),[2]}})})}function Nm(t){var e;if(t.url===void 0||t.url===null||t.url==="")throw S(te,"no proper argument");var r=Oe();if(!(!((e=r==null?void 0:r.availability.addToHomeLineScheme)===null||e===void 0)&&e.permission)){if(cu(t.url))throw S(K,"No permission to specify line schema in url.");if(t.description)throw S(K,"No permission to specify description.")}if(!cu(t.url)){if(!r)throw S(K,"Could not get Context from server.");r.liffId!==Ic(t.url)&&$c(t.url,r.endpointUrl)}}function _k(t){return b(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return Nm(t),Jt.internalCreateShortcutOnHomeScreen(),[4,Lm(t)];case 1:return e.sent(),[2]}})})}function bk(t){return b(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return Nm(t),Jt.createShortcutOnHomeScreen(),[4,Lm(t)];case 1:return e.sent(),[2]}})})}function Lm(t){return b(this,void 0,void 0,function(){var e;return C(this,function(r){switch(r.label){case 0:if(!(e=ue().liffId))throw S(he,"Invalid LIFF ID.");return Fe()==="ios"?[4,wk(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,yk(e,t)];case 3:r.sent(),r.label=4;case 4:return[2]}})})}var Sk=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"createShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(r){return bk(r)}},e}(B),Ek=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"internalCreateShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(r){return _k(r)}},e}(B);function kk(t){return b(this,arguments,void 0,function(e){var r=e.productIds;return C(this,function(n){switch(n.label){case 0:return[4,Xn("iap.getPlatformProducts",{productIds:r}).catch(function(i){throw i.code&&i.description?S(i.code,i.description):S(Ie,"Failed to get platform products",{cause:i})})];case 1:return[2,n.sent().products]}})})}var Tk=function(t){return b(void 0,[t],void 0,function(e){var r=e.productId,n=e.orderId;return C(this,function(i){switch(i.label){case 0:return[4,Xn("iap.createPayment",{productId:r,orderId:n}).catch(function(s){throw s.code&&s.description?S(s.code,s.description):S(Ie,"Failed to get platform products",{cause:s})})];case 1:return i.sent(),[2]}})})},Ok=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"iap"},enumerable:!1,configurable:!0}),e.prototype.install=function(){var r=this;return{getPlatformProducts:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return b(r,void 0,void 0,function(){return C(this,function(s){return Jt.iap(),[2,kk.apply(void 0,ie([],F(n),!1))]})})},createPayment:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return b(r,void 0,void 0,function(){return C(this,function(s){return Jt.iap(),[2,Tk.apply(void 0,ie([],F(n),!1))]})})},requestConsentAgreement:function(){return b(r,void 0,void 0,function(){return C(this,function(n){return Jt.iap(),[2,b(void 0,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return[4,Xn("iap.requestConsentAgreement").catch(function(s){throw s.code&&s.description?S(s.code,s.description):S(Ie,"Failed to request consent agreement",{cause:s})})];case 1:return i.sent(),[2]}})})]})})}}},e}(B),Ck={},Wc=Object.defineProperties(Ck,{getOS:{value:Fe,enumerable:!0,writable:!0},getVersion:{value:ta,enumerable:!0,writable:!0},getLanguage:{value:Tm,enumerable:!0,writable:!0},getAppLanguage:{value:Om,enumerable:!0,writable:!0},getOrigins:{value:km,enumerable:!0,writable:!0},isInClient:{value:H,enumerable:!0,writable:!0},isLoggedIn:{value:xe,enumerable:!0,writable:!0},logout:{value:jc,enumerable:!0,writable:!0},getAccessToken:{value:Mt,enumerable:!0,writable:!0},getIDToken:{value:Zo,enumerable:!0,writable:!0},getDecodedIDToken:{value:ea,enumerable:!0,writable:!0},getContext:{value:Oe,enumerable:!0,writable:!0},openWindow:{value:na,enumerable:!0,writable:!0},closeWindow:{value:jn,enumerable:!0,writable:!0},getFriendship:{value:$n(Rm,"profile"),enumerable:!0,writable:!0},getAId:{value:Rv,enumerable:!0,writable:!0},getProfilePlus:{value:jv,enumerable:!0,writable:!0},getIsVideoAutoPlay:{value:Av,enumerable:!0,writable:!0},getLineVersion:{value:zt,enumerable:!0,writable:!0},isApiAvailable:{value:as,enumerable:!0,writable:!0},getProfile:{value:$n(zc,"profile"),enumerable:!0,writable:!0},sendMessages:{value:$n(xm,"chat_message.write"),enumerable:!0,writable:!0},subWindow:{value:rt,enumerable:!0,writable:!0},ready:{value:aS,enumerable:!0,writable:!0},id:{get:function(){return ue().liffId||null},enumerable:!0},_dispatchEvent:{value:dE,enumerable:!0,writable:!0},_call:{value:Xn,enumerable:!0,writable:!0},_addListener:{value:Lc,enumerable:!0,writable:!0},_removeListener:{value:Uc,enumerable:!0,writable:!0},_postMessage:{value:Jv,enumerable:!0,writable:!0}}),Vc=new oS,Um=new sS(Vc,Wc),Pk=new _v(Vc,Um).install();function Ik(t){Pk.call(Wc,t)}[new _v(Vc,Um),new TE,new KE,new ik,uk,eE,Mv,XE,vk,PE,new KS,new Sk,new Ek,new Ok].forEach(Ik);var Zi=Wc;const xk={BASE_URL:"/star-engine-liff-v2/apps/v2-reports/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Xa={};const nh=typeof import.meta<"u"?xk??{}:{},Lt=t=>nh[t]??nh[`VITE_${t}`]??(Xa==null?void 0:Xa[t]),rn=typeof window<"u",ls=()=>rn?window.__GUARDIAN_RUNTIME_CONFIG__??{}:{},Hc=()=>{const t=ls();return{supabaseUrl:Lt("V2_SUPABASE_URL")??t.supabaseUrl??"",supabaseAnonKey:Lt("V2_SUPABASE_ANON_KEY")??t.supabaseAnonKey??""}},Rk=()=>{const t=Lt("V2_SUPABASE_JWT");if(t)return t;const e=ls().supabaseJwt;return e||(Lt("V2_SUPABASE_SERVICE_KEY")??null)};let Za=null,fr=null,Bs=null;class Dm extends Error{constructor(){super("LIFF login redirect triggered"),this.name="GuardianLiffRedirectError"}}const Fm=()=>{if(!Za){const{supabaseUrl:t,supabaseAnonKey:e}=Hc();if(!t||!e)throw new Error(" Supabase V2_SUPABASE_URL / V2_SUPABASE_ANON_KEY");Za=Wb(t,e,{auth:{persistSession:!1,detectSessionInUrl:!1}})}return Za},Ak=()=>{const t=(Lt("V2_LIFF_ID")??"").trim();if(t)return t;const e=(ls().liffId??"").trim();if(e)return e;if(rn){const r=new URLSearchParams(window.location.search),n=r.get("liffId")??r.get("liff_id");if(n)return n;const i=window.__GUARDIAN_LIFF_ID__;if(typeof i=="string"&&i.trim())return i.trim()}return"2008215846-5LwXlWVN"},jk=async()=>{if(rn){if(!Bs){const t=Ak();if(!t)throw new Error(" LIFF V2_LIFF_ID");Bs=Zi.init({liffId:t}).catch(e=>{throw Bs=null,e})}await Bs}},Bm=async()=>{if(!rn)return!1;if(await jk(),!Zi.isLoggedIn()){const t=Lt("V2_LIFF_REDIRECT_URL")||ls().liffRedirectUrl||(typeof window<"u"?window.location.href:void 0);throw Zi.login({redirectUri:t}),new Dm}return!0},$k=async()=>{if(!rn)return null;await Bm();const t=Zi.getIDToken();if(!t)throw new Error("LIFF  ID Token");const e=Fm(),{data:r,error:n}=await e.auth.signInWithIdToken({provider:"line",token:t});if(n)throw n;const i=r.session??(await e.auth.getSession()).data.session??null;return fr=i,i},ia=async()=>{if(!rn)return Rk();if(fr!=null&&fr.access_token)return fr.access_token;const t=await $k();return(t==null?void 0:t.access_token)??null},Nk=async()=>{var l,u,c,d,f,p;const t=ls();if(!rn)return{session:null,user:null,roles:t.hasAdminRole===!1?[]:["guardian.admin","guardian.ops"],defaultLeadId:Lt("V2_DEFAULT_LEAD_ID")??t.defaultLeadId??null,defaultAccountId:Lt("V2_DEFAULT_ACCOUNT_ID")??t.defaultAccountId??null,profile:null};await Bm();const e=Fm();await ia();const[{data:r,error:n},i]=await Promise.all([e.auth.getUser(),Zi.getProfile()]);if(n)throw n;const s=t.hasAdminRole===!0?["guardian.admin"]:t.hasAdminRole===!1?[]:((u=(l=r.user)==null?void 0:l.user_metadata)==null?void 0:u.guardianRoles)??[],o=((d=(c=r.user)==null?void 0:c.user_metadata)==null?void 0:d.guardianDefaultLeadId)??Lt("V2_DEFAULT_LEAD_ID")??t.defaultLeadId??null,a=((p=(f=r.user)==null?void 0:f.user_metadata)==null?void 0:p.guardianDefaultAccountId)??Lt("V2_DEFAULT_ACCOUNT_ID")??t.defaultAccountId??null;return fr||(fr=(await e.auth.getSession()).data.session??null),{session:fr,user:r.user??null,roles:s,defaultLeadId:o,defaultAccountId:a,profile:i}},Lk=async()=>{const{supabaseAnonKey:t}=Hc(),e={"Content-Type":"application/json"};t&&(e.apikey=t);const r=await ia();return r&&(e.Authorization=`Bearer ${r}`),e},{supabaseUrl:_u,supabaseAnonKey:Uk}=Hc(),Dk=async(t,e)=>{const r=await ia();if(!_u||!Uk||!r)throw new Error("Supabase  mock ");const n=await Lk(),i=await fetch(`${_u}/rest/v1/rpc/${t}`,{method:"POST",headers:n,body:JSON.stringify(e)});if(!i.ok){const s=await i.json().catch(()=>({})),o=(s==null?void 0:s.message)||i.statusText||"Guardian RPC ";throw new Error(o)}return await i.json()},Fk=async t=>{const e=await ia();if(!_u||!e)return O0({});try{const r={p_lead:t.leadId,p_mode:t.viewMode==="timeline"?"list":"latest"};return t.reportType&&(r.p_report_type=t.reportType),t.referenceDate&&(r.p_date=t.referenceDate),await Dk("api_v2_reports",r)}catch(r){throw console.error("[GuardianReports] rpc error",r),r instanceof Error?r:new Error(" Guardian ")}},Bk={loading:!0,error:null,session:null,user:null,roles:[],defaultLeadId:null,defaultAccountId:null,profile:null},Mk=()=>{const[t,e]=et.useState(Bk);return et.useEffect(()=>{let r=!0;return(async()=>{try{const i=await Nk();if(!r)return;e({loading:!1,error:null,...i})}catch(i){if(i instanceof Dm||!r)return;const s=i instanceof Error?i.message:"Guardian Auth ";e(o=>({...o,loading:!1,error:s}))}})(),()=>{r=!1}},[]),t},zk={BASE_URL:"/star-engine-liff-v2/apps/v2-reports/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Wk=[{label:"",value:"today"},{label:"",value:"history"},{label:"",value:"custom"}],ih=typeof import.meta<"u"?zk??{}:{},Vk=(t,e="")=>ih[t]??ih[`VITE_${t}`]??e,Hk=Vk("V2_DEFAULT_LEAD_ID",""),Kk=()=>{var k,E,O,P;const{loading:t,error:e,defaultLeadId:r,profile:n}=Mk(),[i,s]=et.useState("today"),[o,a]=et.useState("insight"),[l,u]=et.useState(!1),[c,d]=et.useState(null),[f,p]=et.useState(null),m=et.useMemo(()=>Wk.map($=>({label:$.label,active:i===$.value,onClick:()=>s($.value)})),[i]),y=r||Hk,w=et.useCallback(async()=>{if(!y){d(" Lead LIFF  .env.local  V2_DEFAULT_LEAD_ID");return}u(!0),d(null);try{const $=await Fk({leadId:y,viewMode:o,referenceDate:new Date().toISOString().slice(0,10)});p($)}catch($){console.error("[GuardianReports] load error",$);const j=$ instanceof Error?$.message:"";d(j||"")}finally{u(!1)}},[y,o]);et.useEffect(()=>{t||w()},[t,w]);const g=$=>I.jsx("div",{className:"guardian-insight-grid",children:$.map(j=>I.jsxs("article",{className:`guardian-card guardian-card--${j.severity}`,children:[I.jsxs("header",{children:[I.jsx("span",{className:"guardian-card__type",children:j.type}),I.jsx("h3",{children:j.title})]}),I.jsx("p",{className:"guardian-card__highlight",children:j.highlight}),I.jsx("footer",{children:j.actions&&j.actions.length>0?j.actions.map(me=>I.jsx(ql,{label:me.label,variant:me.variant??"secondary",onClick:()=>console.log("[TODO] insight action",me.action)},`${j.id}-${me.action}`)):j.ctaLabel?I.jsx(ql,{label:j.ctaLabel,variant:"secondary",onClick:()=>console.log("[TODO] insight action",j.ctaAction)}):I.jsx("span",{className:"guardian-card__empty",children:""})})]},j.id))}),h=(k=f==null?void 0:f.data)==null?void 0:k[0],v=!!((E=f==null?void 0:f.data)!=null&&E.length),_=!!((O=f==null?void 0:f.timeline)!=null&&O.length);return I.jsxs("div",{className:"guardian-app",children:[I.jsx(y0,{navItems:m,rightSlot:I.jsxs("div",{className:"guardian-header__actions",children:[n?I.jsxs("span",{className:"guardian-user-chip",children:[I.jsx("span",{className:"guardian-user-chip__emoji",role:"img","aria-label":"guardian",children:""}),I.jsxs("span",{className:"guardian-user-chip__label",children:[n.displayName,I.jsx("small",{children:""})]})]}):null,I.jsx(w0,{value:o,options:[{value:"insight",label:"A"},{value:"timeline",label:"B"}],onChange:a})]})}),I.jsxs("main",{className:"guardian-main",children:[I.jsxs("section",{className:"guardian-search",children:[I.jsx("label",{htmlFor:"guardian-city",className:"guardian-field__label",children:""}),I.jsx("input",{id:"guardian-city",className:"guardian-field",placeholder:""}),I.jsx("label",{htmlFor:"guardian-store",className:"guardian-field__label",children:""}),I.jsx("input",{id:"guardian-store",className:"guardian-field",placeholder:"",list:"guardian-store-list"}),I.jsxs("datalist",{id:"guardian-store-list",children:[I.jsx("option",{value:"Guardian "}),I.jsx("option",{value:" "}),I.jsx("option",{value:" "})]})]}),(t||l)&&I.jsx("div",{className:"guardian-status",children:"..."}),e&&I.jsx("div",{className:"guardian-alert guardian-alert--critical",children:I.jsx("span",{className:"guardian-alert__body",children:e})}),c&&I.jsx("div",{className:"guardian-alert guardian-alert--critical",children:I.jsx("span",{className:"guardian-alert__body",children:c})}),!l&&!c&&h&&I.jsxs(_0,{title:h.accountName,meta:` ${h.reportDate}   ${h.planTier.toUpperCase()}`,metrics:[{label:"",value:h.coverageScore},{label:"AI ",value:`$${h.aiSpendUsd.toFixed(2)}`}],actions:[{label:"",variant:"primary",onClick:()=>console.log("[TODO] open full report",h.reportId)},{label:" PDF",variant:"ghost",onClick:()=>console.log("[TODO] download pdf",h.reportId)}],children:[I.jsxs("nav",{className:"guardian-pills",children:[I.jsx("button",{type:"button",className:"guardian-pill guardian-pill--active",children:""}),I.jsx("button",{type:"button",className:"guardian-pill",children:""}),I.jsx("button",{type:"button",className:"guardian-pill",children:""})]}),o==="insight"&&g(h.insights)]}),!l&&!c&&!v&&I.jsx("div",{className:"guardian-empty-state",children:" 1 API "}),!l&&!c&&o==="timeline"&&_&&I.jsxs("section",{className:"guardian-section",children:[I.jsx("h3",{children:""}),I.jsx("ul",{className:"guardian-timeline",children:(P=f==null?void 0:f.timeline)==null?void 0:P.map($=>I.jsxs("li",{children:[I.jsx("span",{className:"guardian-timeline__time",children:$.timestamp}),I.jsx("span",{className:"guardian-timeline__summary",children:$.summary})]},$.id))})]})]})]})};el.createRoot(document.getElementById("root")).render(I.jsx(oy.StrictMode,{children:I.jsx(Kk,{})}));
