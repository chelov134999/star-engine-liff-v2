import"/star-engine-liff-v2/config.runtime.js";function Km(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ah(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Gm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var lh={exports:{}},Lo={},uh={exports:{}},M={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ns=Symbol.for("react.element"),Jm=Symbol.for("react.portal"),Qm=Symbol.for("react.fragment"),Ym=Symbol.for("react.strict_mode"),Xm=Symbol.for("react.profiler"),Zm=Symbol.for("react.provider"),ey=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),ry=Symbol.for("react.suspense"),ny=Symbol.for("react.memo"),iy=Symbol.for("react.lazy"),qc=Symbol.iterator;function sy(t){return t===null||typeof t!="object"?null:(t=qc&&t[qc]||t["@@iterator"],typeof t=="function"?t:null)}var ch={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dh=Object.assign,fh={};function qn(t,e,r){this.props=t,this.context=e,this.refs=fh,this.updater=r||ch}qn.prototype.isReactComponent={};qn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hh(){}hh.prototype=qn.prototype;function _u(t,e,r){this.props=t,this.context=e,this.refs=fh,this.updater=r||ch}var bu=_u.prototype=new hh;bu.constructor=_u;dh(bu,qn.prototype);bu.isPureReactComponent=!0;var Gc=Array.isArray,ph=Object.prototype.hasOwnProperty,Su={current:null},gh={key:!0,ref:!0,__self:!0,__source:!0};function vh(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ph.call(e,n)&&!gh.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:ns,type:t,key:s,ref:o,props:i,_owner:Su.current}}function oy(t,e){return{$$typeof:ns,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Eu(t){return typeof t=="object"&&t!==null&&t.$$typeof===ns}function ay(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Jc=/\/+/g;function ua(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ay(""+t.key):e.toString(36)}function Ws(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ns:case Jm:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+ua(o,0):n,Gc(i)?(r="",t!=null&&(r=t.replace(Jc,"$&/")+"/"),Ws(i,e,r,"",function(u){return u})):i!=null&&(Eu(i)&&(i=oy(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Jc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Gc(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+ua(s,a);o+=Ws(s,e,r,l,i)}else if(l=sy(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+ua(s,a++),o+=Ws(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hs(t,e,r){if(t==null)return t;var n=[],i=0;return Ws(t,n,"","",function(s){return e.call(r,s,i++)}),n}function ly(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var He={current:null},Vs={transition:null},uy={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:Vs,ReactCurrentOwner:Su};function mh(){throw Error("act(...) is not supported in production builds of React.")}M.Children={map:hs,forEach:function(t,e,r){hs(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return hs(t,function(){e++}),e},toArray:function(t){return hs(t,function(e){return e})||[]},only:function(t){if(!Eu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};M.Component=qn;M.Fragment=Qm;M.Profiler=Xm;M.PureComponent=_u;M.StrictMode=Ym;M.Suspense=ry;M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uy;M.act=mh;M.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=dh({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Su.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ph.call(e,l)&&!gh.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:ns,type:t.type,key:i,ref:s,props:n,_owner:o}};M.createContext=function(t){return t={$$typeof:ey,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Zm,_context:t},t.Consumer=t};M.createElement=vh;M.createFactory=function(t){var e=vh.bind(null,t);return e.type=t,e};M.createRef=function(){return{current:null}};M.forwardRef=function(t){return{$$typeof:ty,render:t}};M.isValidElement=Eu;M.lazy=function(t){return{$$typeof:iy,_payload:{_status:-1,_result:t},_init:ly}};M.memo=function(t,e){return{$$typeof:ny,type:t,compare:e===void 0?null:e}};M.startTransition=function(t){var e=Vs.transition;Vs.transition={};try{t()}finally{Vs.transition=e}};M.unstable_act=mh;M.useCallback=function(t,e){return He.current.useCallback(t,e)};M.useContext=function(t){return He.current.useContext(t)};M.useDebugValue=function(){};M.useDeferredValue=function(t){return He.current.useDeferredValue(t)};M.useEffect=function(t,e){return He.current.useEffect(t,e)};M.useId=function(){return He.current.useId()};M.useImperativeHandle=function(t,e,r){return He.current.useImperativeHandle(t,e,r)};M.useInsertionEffect=function(t,e){return He.current.useInsertionEffect(t,e)};M.useLayoutEffect=function(t,e){return He.current.useLayoutEffect(t,e)};M.useMemo=function(t,e){return He.current.useMemo(t,e)};M.useReducer=function(t,e,r){return He.current.useReducer(t,e,r)};M.useRef=function(t){return He.current.useRef(t)};M.useState=function(t){return He.current.useState(t)};M.useSyncExternalStore=function(t,e,r){return He.current.useSyncExternalStore(t,e,r)};M.useTransition=function(){return He.current.useTransition()};M.version="18.3.1";uh.exports=M;var qe=uh.exports;const cy=ah(qe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy=qe,fy=Symbol.for("react.element"),hy=Symbol.for("react.fragment"),py=Object.prototype.hasOwnProperty,gy=dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vy={key:!0,ref:!0,__self:!0,__source:!0};function yh(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)py.call(e,n)&&!vy.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:fy,type:t,key:s,ref:o,props:i,_owner:gy.current}}Lo.Fragment=hy;Lo.jsx=yh;Lo.jsxs=yh;lh.exports=Lo;var j=lh.exports,tl={},wh={exports:{}},lt={},_h={exports:{}},bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,L){var D=R.length;R.push(L);e:for(;0<D;){var de=D-1>>>1,Ee=R[de];if(0<i(Ee,L))R[de]=L,R[D]=Ee,D=de;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var L=R[0],D=R.pop();if(D!==L){R[0]=D;e:for(var de=0,Ee=R.length,ds=Ee>>>1;de<ds;){var Pr=2*(de+1)-1,la=R[Pr],xr=Pr+1,fs=R[xr];if(0>i(la,D))xr<Ee&&0>i(fs,la)?(R[de]=fs,R[xr]=D,de=xr):(R[de]=la,R[Pr]=D,de=Pr);else if(xr<Ee&&0>i(fs,D))R[de]=fs,R[xr]=D,de=xr;else break e}}return L}function i(R,L){var D=R.sortIndex-L.sortIndex;return D!==0?D:R.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=R)n(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=r(u)}}function _(R){if(y=!1,v(R),!m)if(r(l)!==null)m=!0,oa(k);else{var L=r(u);L!==null&&aa(_,L.startTime-R)}}function k(R,L){m=!1,y&&(y=!1,g(P),P=-1),p=!0;var D=f;try{for(v(L),d=r(l);d!==null&&(!(d.expirationTime>L)||R&&!X());){var de=d.callback;if(typeof de=="function"){d.callback=null,f=d.priorityLevel;var Ee=de(d.expirationTime<=L);L=t.unstable_now(),typeof Ee=="function"?d.callback=Ee:d===r(l)&&n(l),v(L)}else n(l);d=r(l)}if(d!==null)var ds=!0;else{var Pr=r(u);Pr!==null&&aa(_,Pr.startTime-L),ds=!1}return ds}finally{d=null,f=D,p=!1}}var E=!1,T=null,P=-1,I=5,A=-1;function X(){return!(t.unstable_now()-A<I)}function dt(){if(T!==null){var R=t.unstable_now();A=R;var L=!0;try{L=T(!0,R)}finally{L?Ir():(E=!1,T=null)}}else E=!1}var Ir;if(typeof h=="function")Ir=function(){h(dt)};else if(typeof MessageChannel<"u"){var Kc=new MessageChannel,Hm=Kc.port2;Kc.port1.onmessage=dt,Ir=function(){Hm.postMessage(null)}}else Ir=function(){w(dt,0)};function oa(R){T=R,E||(E=!0,Ir())}function aa(R,L){P=w(function(){R(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,oa(k))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var D=f;f=L;try{return R()}finally{f=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,L){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=f;f=R;try{return L()}finally{f=D}},t.unstable_scheduleCallback=function(R,L,D){var de=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?de+D:de):D=de,R){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=D+Ee,R={id:c++,callback:L,priorityLevel:R,startTime:D,expirationTime:Ee,sortIndex:-1},D>de?(R.sortIndex=D,e(u,R),r(l)===null&&R===r(u)&&(y?(g(P),P=-1):y=!0,aa(_,D-de))):(R.sortIndex=Ee,e(l,R),m||p||(m=!0,oa(k))),R},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(R){var L=f;return function(){var D=f;f=L;try{return R.apply(this,arguments)}finally{f=D}}}})(bh);_h.exports=bh;var my=_h.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=qe,at=my;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sh=new Set,Ni={};function rn(t,e){Un(t,e),Un(t+"Capture",e)}function Un(t,e){for(Ni[t]=e,t=0;t<e.length;t++)Sh.add(e[t])}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=Object.prototype.hasOwnProperty,wy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qc={},Yc={};function _y(t){return rl.call(Yc,t)?!0:rl.call(Qc,t)?!1:wy.test(t)?Yc[t]=!0:(Qc[t]=!0,!1)}function by(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sy(t,e,r,n){if(e===null||typeof e>"u"||by(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ae[t]=new Ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ae[e]=new Ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ae[t]=new Ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ae[t]=new Ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ae[t]=new Ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ae[t]=new Ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ae[t]=new Ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ae[t]=new Ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ae[t]=new Ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var ku=/[\-:]([a-z])/g;function Tu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ku,Tu);Ae[e]=new Ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ku,Tu);Ae[e]=new Ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ku,Tu);Ae[e]=new Ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ae[t]=new Ke(t,1,!1,t.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ae[t]=new Ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ou(t,e,r,n){var i=Ae.hasOwnProperty(e)?Ae[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sy(e,r,i,n)&&(r=null),n||i===null?_y(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var rr=yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ps=Symbol.for("react.element"),vn=Symbol.for("react.portal"),mn=Symbol.for("react.fragment"),Cu=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),Eh=Symbol.for("react.provider"),kh=Symbol.for("react.context"),Iu=Symbol.for("react.forward_ref"),il=Symbol.for("react.suspense"),sl=Symbol.for("react.suspense_list"),Pu=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Th=Symbol.for("react.offscreen"),Xc=Symbol.iterator;function ni(t){return t===null||typeof t!="object"?null:(t=Xc&&t[Xc]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,ca;function pi(t){if(ca===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ca=e&&e[1]||""}return`
`+ca+t}var da=!1;function fa(t,e){if(!t||da)return"";da=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{da=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?pi(t):""}function Ey(t){switch(t.tag){case 5:return pi(t.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return t=fa(t.type,!1),t;case 11:return t=fa(t.type.render,!1),t;case 1:return t=fa(t.type,!0),t;default:return""}}function ol(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mn:return"Fragment";case vn:return"Portal";case nl:return"Profiler";case Cu:return"StrictMode";case il:return"Suspense";case sl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kh:return(t.displayName||"Context")+".Consumer";case Eh:return(t._context.displayName||"Context")+".Provider";case Iu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pu:return e=t.displayName||null,e!==null?e:ol(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return ol(t(e))}catch{}}return null}function ky(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ol(e);case 8:return e===Cu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Oh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ty(t){var e=Oh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gs(t){t._valueTracker||(t._valueTracker=Ty(t))}function Ch(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Oh(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function io(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function al(t,e){var r=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Zc(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Sr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ih(t,e){e=e.checked,e!=null&&Ou(t,"checked",e,!1)}function ll(t,e){Ih(t,e);var r=Sr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ul(t,e.type,r):e.hasOwnProperty("defaultValue")&&ul(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ed(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ul(t,e,r){(e!=="number"||io(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var gi=Array.isArray;function In(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Sr(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function td(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(O(92));if(gi(r)){if(1<r.length)throw Error(O(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Sr(r)}}function Ph(t,e){var r=Sr(e.value),n=Sr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function rd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vs,Rh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vs=vs||document.createElement("div"),vs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Li(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oy=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(t){Oy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wi[e]=wi[t]})});function Ah(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||wi.hasOwnProperty(t)&&wi[t]?(""+e).trim():e+"px"}function jh(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Ah(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Cy=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fl(t,e){if(e){if(Cy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function hl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pl=null;function xu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gl=null,Pn=null,xn=null;function nd(t){if(t=os(t)){if(typeof gl!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Mo(e),gl(t.stateNode,t.type,e))}}function $h(t){Pn?xn?xn.push(t):xn=[t]:Pn=t}function Nh(){if(Pn){var t=Pn,e=xn;if(xn=Pn=null,nd(t),e)for(t=0;t<e.length;t++)nd(e[t])}}function Lh(t,e){return t(e)}function Uh(){}var ha=!1;function Dh(t,e,r){if(ha)return t(e,r);ha=!0;try{return Lh(t,e,r)}finally{ha=!1,(Pn!==null||xn!==null)&&(Uh(),Nh())}}function Ui(t,e){var r=t.stateNode;if(r===null)return null;var n=Mo(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(O(231,e,typeof r));return r}var vl=!1;if(Yt)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){vl=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{vl=!1}function Iy(t,e,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var _i=!1,so=null,oo=!1,ml=null,Py={onError:function(t){_i=!0,so=t}};function xy(t,e,r,n,i,s,o,a,l){_i=!1,so=null,Iy.apply(Py,arguments)}function Ry(t,e,r,n,i,s,o,a,l){if(xy.apply(this,arguments),_i){if(_i){var u=so;_i=!1,so=null}else throw Error(O(198));oo||(oo=!0,ml=u)}}function nn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Fh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function id(t){if(nn(t)!==t)throw Error(O(188))}function Ay(t){var e=t.alternate;if(!e){if(e=nn(t),e===null)throw Error(O(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return id(i),t;if(s===n)return id(i),e;s=s.sibling}throw Error(O(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(O(189))}}if(r.alternate!==n)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?t:e}function Bh(t){return t=Ay(t),t!==null?Mh(t):null}function Mh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mh(t);if(e!==null)return e;t=t.sibling}return null}var zh=at.unstable_scheduleCallback,sd=at.unstable_cancelCallback,jy=at.unstable_shouldYield,$y=at.unstable_requestPaint,he=at.unstable_now,Ny=at.unstable_getCurrentPriorityLevel,Ru=at.unstable_ImmediatePriority,Wh=at.unstable_UserBlockingPriority,ao=at.unstable_NormalPriority,Ly=at.unstable_LowPriority,Vh=at.unstable_IdlePriority,Uo=null,Dt=null;function Uy(t){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Uo,t,void 0,(t.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:By,Dy=Math.log,Fy=Math.LN2;function By(t){return t>>>=0,t===0?32:31-(Dy(t)/Fy|0)|0}var ms=64,ys=4194304;function vi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lo(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=vi(a):(s&=o,s!==0&&(n=vi(s)))}else o=r&~i,o!==0?n=vi(o):s!==0&&(n=vi(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Pt(e),i=1<<r,n|=t[r],e&=~i;return n}function My(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zy(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pt(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=My(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function yl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hh(){var t=ms;return ms<<=1,!(ms&4194240)&&(ms=64),t}function pa(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function is(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pt(e),t[e]=r}function Wy(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Pt(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Au(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Pt(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var q=0;function Kh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qh,ju,Gh,Jh,Qh,wl=!1,ws=[],hr=null,pr=null,gr=null,Di=new Map,Fi=new Map,ar=[],Vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function od(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Di.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(e.pointerId)}}function si(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=os(e),e!==null&&ju(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Hy(t,e,r,n,i){switch(e){case"focusin":return hr=si(hr,t,e,r,n,i),!0;case"dragenter":return pr=si(pr,t,e,r,n,i),!0;case"mouseover":return gr=si(gr,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Di.set(s,si(Di.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Fi.set(s,si(Fi.get(s)||null,t,e,r,n,i)),!0}return!1}function Yh(t){var e=zr(t.target);if(e!==null){var r=nn(e);if(r!==null){if(e=r.tag,e===13){if(e=Fh(r),e!==null){t.blockedOn=e,Qh(t.priority,function(){Gh(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=_l(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);pl=n,r.target.dispatchEvent(n),pl=null}else return e=os(r),e!==null&&ju(e),t.blockedOn=r,!1;e.shift()}return!0}function ad(t,e,r){Hs(t)&&r.delete(e)}function Ky(){wl=!1,hr!==null&&Hs(hr)&&(hr=null),pr!==null&&Hs(pr)&&(pr=null),gr!==null&&Hs(gr)&&(gr=null),Di.forEach(ad),Fi.forEach(ad)}function oi(t,e){t.blockedOn===e&&(t.blockedOn=null,wl||(wl=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,Ky)))}function Bi(t){function e(i){return oi(i,t)}if(0<ws.length){oi(ws[0],t);for(var r=1;r<ws.length;r++){var n=ws[r];n.blockedOn===t&&(n.blockedOn=null)}}for(hr!==null&&oi(hr,t),pr!==null&&oi(pr,t),gr!==null&&oi(gr,t),Di.forEach(e),Fi.forEach(e),r=0;r<ar.length;r++)n=ar[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ar.length&&(r=ar[0],r.blockedOn===null);)Yh(r),r.blockedOn===null&&ar.shift()}var Rn=rr.ReactCurrentBatchConfig,uo=!0;function qy(t,e,r,n){var i=q,s=Rn.transition;Rn.transition=null;try{q=1,$u(t,e,r,n)}finally{q=i,Rn.transition=s}}function Gy(t,e,r,n){var i=q,s=Rn.transition;Rn.transition=null;try{q=4,$u(t,e,r,n)}finally{q=i,Rn.transition=s}}function $u(t,e,r,n){if(uo){var i=_l(t,e,r,n);if(i===null)ka(t,e,n,co,r),od(t,n);else if(Hy(i,t,e,r,n))n.stopPropagation();else if(od(t,n),e&4&&-1<Vy.indexOf(t)){for(;i!==null;){var s=os(i);if(s!==null&&qh(s),s=_l(t,e,r,n),s===null&&ka(t,e,n,co,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else ka(t,e,n,null,r)}}var co=null;function _l(t,e,r,n){if(co=null,t=xu(n),t=zr(t),t!==null)if(e=nn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Fh(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return co=t,null}function Xh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ny()){case Ru:return 1;case Wh:return 4;case ao:case Ly:return 16;case Vh:return 536870912;default:return 16}default:return 16}}var cr=null,Nu=null,Ks=null;function Zh(){if(Ks)return Ks;var t,e=Nu,r=e.length,n,i="value"in cr?cr.value:cr.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Ks=i.slice(t,1<n?1-n:void 0)}function qs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _s(){return!0}function ld(){return!1}function ut(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_s:ld,this.isPropagationStopped=ld,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_s)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_s)},persist:function(){},isPersistent:_s}),e}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lu=ut(Gn),ss=ae({},Gn,{view:0,detail:0}),Jy=ut(ss),ga,va,ai,Do=ae({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ai&&(ai&&t.type==="mousemove"?(ga=t.screenX-ai.screenX,va=t.screenY-ai.screenY):va=ga=0,ai=t),ga)},movementY:function(t){return"movementY"in t?t.movementY:va}}),ud=ut(Do),Qy=ae({},Do,{dataTransfer:0}),Yy=ut(Qy),Xy=ae({},ss,{relatedTarget:0}),ma=ut(Xy),Zy=ae({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),ew=ut(Zy),tw=ae({},Gn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rw=ut(tw),nw=ae({},Gn,{data:0}),cd=ut(nw),iw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ow={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ow[t])?!!e[t]:!1}function Uu(){return aw}var lw=ae({},ss,{key:function(t){if(t.key){var e=iw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uu,charCode:function(t){return t.type==="keypress"?qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uw=ut(lw),cw=ae({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dd=ut(cw),dw=ae({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uu}),fw=ut(dw),hw=ae({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),pw=ut(hw),gw=ae({},Do,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vw=ut(gw),mw=[9,13,27,32],Du=Yt&&"CompositionEvent"in window,bi=null;Yt&&"documentMode"in document&&(bi=document.documentMode);var yw=Yt&&"TextEvent"in window&&!bi,ep=Yt&&(!Du||bi&&8<bi&&11>=bi),fd=" ",hd=!1;function tp(t,e){switch(t){case"keyup":return mw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yn=!1;function ww(t,e){switch(t){case"compositionend":return rp(e);case"keypress":return e.which!==32?null:(hd=!0,fd);case"textInput":return t=e.data,t===fd&&hd?null:t;default:return null}}function _w(t,e){if(yn)return t==="compositionend"||!Du&&tp(t,e)?(t=Zh(),Ks=Nu=cr=null,yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ep&&e.locale!=="ko"?null:e.data;default:return null}}var bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bw[t.type]:e==="textarea"}function np(t,e,r,n){$h(n),e=fo(e,"onChange"),0<e.length&&(r=new Lu("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Si=null,Mi=null;function Sw(t){pp(t,0)}function Fo(t){var e=bn(t);if(Ch(e))return t}function Ew(t,e){if(t==="change")return e}var ip=!1;if(Yt){var ya;if(Yt){var wa="oninput"in document;if(!wa){var gd=document.createElement("div");gd.setAttribute("oninput","return;"),wa=typeof gd.oninput=="function"}ya=wa}else ya=!1;ip=ya&&(!document.documentMode||9<document.documentMode)}function vd(){Si&&(Si.detachEvent("onpropertychange",sp),Mi=Si=null)}function sp(t){if(t.propertyName==="value"&&Fo(Mi)){var e=[];np(e,Mi,t,xu(t)),Dh(Sw,e)}}function kw(t,e,r){t==="focusin"?(vd(),Si=e,Mi=r,Si.attachEvent("onpropertychange",sp)):t==="focusout"&&vd()}function Tw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fo(Mi)}function Ow(t,e){if(t==="click")return Fo(e)}function Cw(t,e){if(t==="input"||t==="change")return Fo(e)}function Iw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rt=typeof Object.is=="function"?Object.is:Iw;function zi(t,e){if(Rt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!rl.call(e,i)||!Rt(t[i],e[i]))return!1}return!0}function md(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yd(t,e){var r=md(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=md(r)}}function op(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?op(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ap(){for(var t=window,e=io();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=io(t.document)}return e}function Fu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Pw(t){var e=ap(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&op(r.ownerDocument.documentElement,r)){if(n!==null&&Fu(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=yd(r,s);var o=yd(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xw=Yt&&"documentMode"in document&&11>=document.documentMode,wn=null,bl=null,Ei=null,Sl=!1;function wd(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sl||wn==null||wn!==io(n)||(n=wn,"selectionStart"in n&&Fu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ei&&zi(Ei,n)||(Ei=n,n=fo(bl,"onSelect"),0<n.length&&(e=new Lu("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=wn)))}function bs(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var _n={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},_a={},lp={};Yt&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);function Bo(t){if(_a[t])return _a[t];if(!_n[t])return t;var e=_n[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in lp)return _a[t]=e[r];return t}var up=Bo("animationend"),cp=Bo("animationiteration"),dp=Bo("animationstart"),fp=Bo("transitionend"),hp=new Map,_d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(t,e){hp.set(t,e),rn(e,[t])}for(var ba=0;ba<_d.length;ba++){var Sa=_d[ba],Rw=Sa.toLowerCase(),Aw=Sa[0].toUpperCase()+Sa.slice(1);kr(Rw,"on"+Aw)}kr(up,"onAnimationEnd");kr(cp,"onAnimationIteration");kr(dp,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr(fp,"onTransitionEnd");Un("onMouseEnter",["mouseout","mouseover"]);Un("onMouseLeave",["mouseout","mouseover"]);Un("onPointerEnter",["pointerout","pointerover"]);Un("onPointerLeave",["pointerout","pointerover"]);rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jw=new Set("cancel close invalid load scroll toggle".split(" ").concat(mi));function bd(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Ry(n,e,void 0,t),t.currentTarget=null}function pp(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;bd(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;bd(i,a,u),s=l}}}if(oo)throw t=ml,oo=!1,ml=null,t}function Z(t,e){var r=e[Cl];r===void 0&&(r=e[Cl]=new Set);var n=t+"__bubble";r.has(n)||(gp(e,t,2,!1),r.add(n))}function Ea(t,e,r){var n=0;e&&(n|=4),gp(r,t,n,e)}var Ss="_reactListening"+Math.random().toString(36).slice(2);function Wi(t){if(!t[Ss]){t[Ss]=!0,Sh.forEach(function(r){r!=="selectionchange"&&(jw.has(r)||Ea(r,!1,t),Ea(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ss]||(e[Ss]=!0,Ea("selectionchange",!1,e))}}function gp(t,e,r,n){switch(Xh(e)){case 1:var i=qy;break;case 4:i=Gy;break;default:i=$u}r=i.bind(null,e,r,t),i=void 0,!vl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function ka(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=zr(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}Dh(function(){var u=s,c=xu(r),d=[];e:{var f=hp.get(t);if(f!==void 0){var p=Lu,m=t;switch(t){case"keypress":if(qs(r)===0)break e;case"keydown":case"keyup":p=uw;break;case"focusin":m="focus",p=ma;break;case"focusout":m="blur",p=ma;break;case"beforeblur":case"afterblur":p=ma;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=fw;break;case up:case cp:case dp:p=ew;break;case fp:p=pw;break;case"scroll":p=Jy;break;case"wheel":p=vw;break;case"copy":case"cut":case"paste":p=rw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=dd}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var h=u,v;h!==null;){v=h;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,g!==null&&(_=Ui(h,g),_!=null&&y.push(Vi(h,_,v)))),w)break;h=h.return}0<y.length&&(f=new p(f,m,null,r,c),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==pl&&(m=r.relatedTarget||r.fromElement)&&(zr(m)||m[Xt]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?zr(m):null,m!==null&&(w=nn(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=ud,_="onMouseLeave",g="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(y=dd,_="onPointerLeave",g="onPointerEnter",h="pointer"),w=p==null?f:bn(p),v=m==null?f:bn(m),f=new y(_,h+"leave",p,r,c),f.target=w,f.relatedTarget=v,_=null,zr(c)===u&&(y=new y(g,h+"enter",m,r,c),y.target=v,y.relatedTarget=w,_=y),w=_,p&&m)t:{for(y=p,g=m,h=0,v=y;v;v=on(v))h++;for(v=0,_=g;_;_=on(_))v++;for(;0<h-v;)y=on(y),h--;for(;0<v-h;)g=on(g),v--;for(;h--;){if(y===g||g!==null&&y===g.alternate)break t;y=on(y),g=on(g)}y=null}else y=null;p!==null&&Sd(d,f,p,y,!1),m!==null&&w!==null&&Sd(d,w,m,y,!0)}}e:{if(f=u?bn(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=Ew;else if(pd(f))if(ip)k=Cw;else{k=Tw;var E=kw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Ow);if(k&&(k=k(t,u))){np(d,k,r,c);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&ul(f,"number",f.value)}switch(E=u?bn(u):window,t){case"focusin":(pd(E)||E.contentEditable==="true")&&(wn=E,bl=u,Ei=null);break;case"focusout":Ei=bl=wn=null;break;case"mousedown":Sl=!0;break;case"contextmenu":case"mouseup":case"dragend":Sl=!1,wd(d,r,c);break;case"selectionchange":if(xw)break;case"keydown":case"keyup":wd(d,r,c)}var T;if(Du)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else yn?tp(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(ep&&r.locale!=="ko"&&(yn||P!=="onCompositionStart"?P==="onCompositionEnd"&&yn&&(T=Zh()):(cr=c,Nu="value"in cr?cr.value:cr.textContent,yn=!0)),E=fo(u,P),0<E.length&&(P=new cd(P,t,null,r,c),d.push({event:P,listeners:E}),T?P.data=T:(T=rp(r),T!==null&&(P.data=T)))),(T=yw?ww(t,r):_w(t,r))&&(u=fo(u,"onBeforeInput"),0<u.length&&(c=new cd("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=T))}pp(d,e)})}function Vi(t,e,r){return{instance:t,listener:e,currentTarget:r}}function fo(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ui(t,r),s!=null&&n.unshift(Vi(t,s,i)),s=Ui(t,e),s!=null&&n.push(Vi(t,s,i))),t=t.return}return n}function on(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sd(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=Ui(r,s),l!=null&&o.unshift(Vi(r,l,a))):i||(l=Ui(r,s),l!=null&&o.push(Vi(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var $w=/\r\n?/g,Nw=/\u0000|\uFFFD/g;function Ed(t){return(typeof t=="string"?t:""+t).replace($w,`
`).replace(Nw,"")}function Es(t,e,r){if(e=Ed(e),Ed(t)!==e&&r)throw Error(O(425))}function ho(){}var El=null,kl=null;function Tl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ol=typeof setTimeout=="function"?setTimeout:void 0,Lw=typeof clearTimeout=="function"?clearTimeout:void 0,kd=typeof Promise=="function"?Promise:void 0,Uw=typeof queueMicrotask=="function"?queueMicrotask:typeof kd<"u"?function(t){return kd.resolve(null).then(t).catch(Dw)}:Ol;function Dw(t){setTimeout(function(){throw t})}function Ta(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Bi(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Bi(e)}function vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Td(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Jn=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Jn,Hi="__reactProps$"+Jn,Xt="__reactContainer$"+Jn,Cl="__reactEvents$"+Jn,Fw="__reactListeners$"+Jn,Bw="__reactHandles$"+Jn;function zr(t){var e=t[Nt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Xt]||r[Nt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Td(t);t!==null;){if(r=t[Nt])return r;t=Td(t)}return e}t=r,r=t.parentNode}return null}function os(t){return t=t[Nt]||t[Xt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Mo(t){return t[Hi]||null}var Il=[],Sn=-1;function Tr(t){return{current:t}}function ee(t){0>Sn||(t.current=Il[Sn],Il[Sn]=null,Sn--)}function Y(t,e){Sn++,Il[Sn]=t.current,t.current=e}var Er={},Be=Tr(Er),Qe=Tr(!1),Jr=Er;function Dn(t,e){var r=t.type.contextTypes;if(!r)return Er;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ye(t){return t=t.childContextTypes,t!=null}function po(){ee(Qe),ee(Be)}function Od(t,e,r){if(Be.current!==Er)throw Error(O(168));Y(Be,e),Y(Qe,r)}function vp(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(O(108,ky(t)||"Unknown",i));return ae({},r,n)}function go(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,Jr=Be.current,Y(Be,t),Y(Qe,Qe.current),!0}function Cd(t,e,r){var n=t.stateNode;if(!n)throw Error(O(169));r?(t=vp(t,e,Jr),n.__reactInternalMemoizedMergedChildContext=t,ee(Qe),ee(Be),Y(Be,t)):ee(Qe),Y(Qe,r)}var Kt=null,zo=!1,Oa=!1;function mp(t){Kt===null?Kt=[t]:Kt.push(t)}function Mw(t){zo=!0,mp(t)}function Or(){if(!Oa&&Kt!==null){Oa=!0;var t=0,e=q;try{var r=Kt;for(q=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Kt=null,zo=!1}catch(i){throw Kt!==null&&(Kt=Kt.slice(t+1)),zh(Ru,Or),i}finally{q=e,Oa=!1}}return null}var En=[],kn=0,vo=null,mo=0,pt=[],gt=0,Qr=null,qt=1,Gt="";function Nr(t,e){En[kn++]=mo,En[kn++]=vo,vo=t,mo=e}function yp(t,e,r){pt[gt++]=qt,pt[gt++]=Gt,pt[gt++]=Qr,Qr=t;var n=qt;t=Gt;var i=32-Pt(n)-1;n&=~(1<<i),r+=1;var s=32-Pt(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,qt=1<<32-Pt(e)+i|r<<i|n,Gt=s+t}else qt=1<<s|r<<i|n,Gt=t}function Bu(t){t.return!==null&&(Nr(t,1),yp(t,1,0))}function Mu(t){for(;t===vo;)vo=En[--kn],En[kn]=null,mo=En[--kn],En[kn]=null;for(;t===Qr;)Qr=pt[--gt],pt[gt]=null,Gt=pt[--gt],pt[gt]=null,qt=pt[--gt],pt[gt]=null}var ot=null,st=null,te=!1,It=null;function wp(t,e){var r=vt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Id(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,st=vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Qr!==null?{id:qt,overflow:Gt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=vt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ot=t,st=null,!0):!1;default:return!1}}function Pl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xl(t){if(te){var e=st;if(e){var r=e;if(!Id(t,e)){if(Pl(t))throw Error(O(418));e=vr(r.nextSibling);var n=ot;e&&Id(t,e)?wp(n,r):(t.flags=t.flags&-4097|2,te=!1,ot=t)}}else{if(Pl(t))throw Error(O(418));t.flags=t.flags&-4097|2,te=!1,ot=t}}}function Pd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function ks(t){if(t!==ot)return!1;if(!te)return Pd(t),te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tl(t.type,t.memoizedProps)),e&&(e=st)){if(Pl(t))throw _p(),Error(O(418));for(;e;)wp(t,e),e=vr(e.nextSibling)}if(Pd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){st=vr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}st=null}}else st=ot?vr(t.stateNode.nextSibling):null;return!0}function _p(){for(var t=st;t;)t=vr(t.nextSibling)}function Fn(){st=ot=null,te=!1}function zu(t){It===null?It=[t]:It.push(t)}var zw=rr.ReactCurrentBatchConfig;function li(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var n=r.stateNode}if(!n)throw Error(O(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,t))}return t}function Ts(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xd(t){var e=t._init;return e(t._payload)}function bp(t){function e(g,h){if(t){var v=g.deletions;v===null?(g.deletions=[h],g.flags|=16):v.push(h)}}function r(g,h){if(!t)return null;for(;h!==null;)e(g,h),h=h.sibling;return null}function n(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function i(g,h){return g=_r(g,h),g.index=0,g.sibling=null,g}function s(g,h,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<h?(g.flags|=2,h):v):(g.flags|=2,h)):(g.flags|=1048576,h)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,h,v,_){return h===null||h.tag!==6?(h=ja(v,g.mode,_),h.return=g,h):(h=i(h,v),h.return=g,h)}function l(g,h,v,_){var k=v.type;return k===mn?c(g,h,v.props.children,_,v.key):h!==null&&(h.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sr&&xd(k)===h.type)?(_=i(h,v.props),_.ref=li(g,h,v),_.return=g,_):(_=eo(v.type,v.key,v.props,null,g.mode,_),_.ref=li(g,h,v),_.return=g,_)}function u(g,h,v,_){return h===null||h.tag!==4||h.stateNode.containerInfo!==v.containerInfo||h.stateNode.implementation!==v.implementation?(h=$a(v,g.mode,_),h.return=g,h):(h=i(h,v.children||[]),h.return=g,h)}function c(g,h,v,_,k){return h===null||h.tag!==7?(h=Gr(v,g.mode,_,k),h.return=g,h):(h=i(h,v),h.return=g,h)}function d(g,h,v){if(typeof h=="string"&&h!==""||typeof h=="number")return h=ja(""+h,g.mode,v),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ps:return v=eo(h.type,h.key,h.props,null,g.mode,v),v.ref=li(g,null,h),v.return=g,v;case vn:return h=$a(h,g.mode,v),h.return=g,h;case sr:var _=h._init;return d(g,_(h._payload),v)}if(gi(h)||ni(h))return h=Gr(h,g.mode,v,null),h.return=g,h;Ts(g,h)}return null}function f(g,h,v,_){var k=h!==null?h.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(g,h,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ps:return v.key===k?l(g,h,v,_):null;case vn:return v.key===k?u(g,h,v,_):null;case sr:return k=v._init,f(g,h,k(v._payload),_)}if(gi(v)||ni(v))return k!==null?null:c(g,h,v,_,null);Ts(g,v)}return null}function p(g,h,v,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(v)||null,a(h,g,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ps:return g=g.get(_.key===null?v:_.key)||null,l(h,g,_,k);case vn:return g=g.get(_.key===null?v:_.key)||null,u(h,g,_,k);case sr:var E=_._init;return p(g,h,v,E(_._payload),k)}if(gi(_)||ni(_))return g=g.get(v)||null,c(h,g,_,k,null);Ts(h,_)}return null}function m(g,h,v,_){for(var k=null,E=null,T=h,P=h=0,I=null;T!==null&&P<v.length;P++){T.index>P?(I=T,T=null):I=T.sibling;var A=f(g,T,v[P],_);if(A===null){T===null&&(T=I);break}t&&T&&A.alternate===null&&e(g,T),h=s(A,h,P),E===null?k=A:E.sibling=A,E=A,T=I}if(P===v.length)return r(g,T),te&&Nr(g,P),k;if(T===null){for(;P<v.length;P++)T=d(g,v[P],_),T!==null&&(h=s(T,h,P),E===null?k=T:E.sibling=T,E=T);return te&&Nr(g,P),k}for(T=n(g,T);P<v.length;P++)I=p(T,g,P,v[P],_),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?P:I.key),h=s(I,h,P),E===null?k=I:E.sibling=I,E=I);return t&&T.forEach(function(X){return e(g,X)}),te&&Nr(g,P),k}function y(g,h,v,_){var k=ni(v);if(typeof k!="function")throw Error(O(150));if(v=k.call(v),v==null)throw Error(O(151));for(var E=k=null,T=h,P=h=0,I=null,A=v.next();T!==null&&!A.done;P++,A=v.next()){T.index>P?(I=T,T=null):I=T.sibling;var X=f(g,T,A.value,_);if(X===null){T===null&&(T=I);break}t&&T&&X.alternate===null&&e(g,T),h=s(X,h,P),E===null?k=X:E.sibling=X,E=X,T=I}if(A.done)return r(g,T),te&&Nr(g,P),k;if(T===null){for(;!A.done;P++,A=v.next())A=d(g,A.value,_),A!==null&&(h=s(A,h,P),E===null?k=A:E.sibling=A,E=A);return te&&Nr(g,P),k}for(T=n(g,T);!A.done;P++,A=v.next())A=p(T,g,P,A.value,_),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?P:A.key),h=s(A,h,P),E===null?k=A:E.sibling=A,E=A);return t&&T.forEach(function(dt){return e(g,dt)}),te&&Nr(g,P),k}function w(g,h,v,_){if(typeof v=="object"&&v!==null&&v.type===mn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ps:e:{for(var k=v.key,E=h;E!==null;){if(E.key===k){if(k=v.type,k===mn){if(E.tag===7){r(g,E.sibling),h=i(E,v.props.children),h.return=g,g=h;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sr&&xd(k)===E.type){r(g,E.sibling),h=i(E,v.props),h.ref=li(g,E,v),h.return=g,g=h;break e}r(g,E);break}else e(g,E);E=E.sibling}v.type===mn?(h=Gr(v.props.children,g.mode,_,v.key),h.return=g,g=h):(_=eo(v.type,v.key,v.props,null,g.mode,_),_.ref=li(g,h,v),_.return=g,g=_)}return o(g);case vn:e:{for(E=v.key;h!==null;){if(h.key===E)if(h.tag===4&&h.stateNode.containerInfo===v.containerInfo&&h.stateNode.implementation===v.implementation){r(g,h.sibling),h=i(h,v.children||[]),h.return=g,g=h;break e}else{r(g,h);break}else e(g,h);h=h.sibling}h=$a(v,g.mode,_),h.return=g,g=h}return o(g);case sr:return E=v._init,w(g,h,E(v._payload),_)}if(gi(v))return m(g,h,v,_);if(ni(v))return y(g,h,v,_);Ts(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,h!==null&&h.tag===6?(r(g,h.sibling),h=i(h,v),h.return=g,g=h):(r(g,h),h=ja(v,g.mode,_),h.return=g,g=h),o(g)):r(g,h)}return w}var Bn=bp(!0),Sp=bp(!1),yo=Tr(null),wo=null,Tn=null,Wu=null;function Vu(){Wu=Tn=wo=null}function Hu(t){var e=yo.current;ee(yo),t._currentValue=e}function Rl(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function An(t,e){wo=t,Wu=Tn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Je=!0),t.firstContext=null)}function wt(t){var e=t._currentValue;if(Wu!==t)if(t={context:t,memoizedValue:e,next:null},Tn===null){if(wo===null)throw Error(O(308));Tn=t,wo.dependencies={lanes:0,firstContext:t}}else Tn=Tn.next=t;return e}var Wr=null;function Ku(t){Wr===null?Wr=[t]:Wr.push(t)}function Ep(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Ku(e)):(r.next=i.next,i.next=r),e.interleaved=r,Zt(t,n)}function Zt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var or=!1;function qu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,W&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Zt(t,r)}return i=n.interleaved,i===null?(e.next=e,Ku(n)):(e.next=i.next,i.next=e),n.interleaved=e,Zt(t,r)}function Gs(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Au(t,r)}}function Rd(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function _o(t,e,r,n){var i=t.updateQueue;or=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(f=e,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=ae({},d,f);break e;case 2:or=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xr|=o,t.lanes=o,t.memoizedState=d}}function Ad(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(O(191,i));i.call(n)}}}var as={},Ft=Tr(as),Ki=Tr(as),qi=Tr(as);function Vr(t){if(t===as)throw Error(O(174));return t}function Gu(t,e){switch(Y(qi,e),Y(Ki,t),Y(Ft,as),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dl(e,t)}ee(Ft),Y(Ft,e)}function Mn(){ee(Ft),ee(Ki),ee(qi)}function Tp(t){Vr(qi.current);var e=Vr(Ft.current),r=dl(e,t.type);e!==r&&(Y(Ki,t),Y(Ft,r))}function Ju(t){Ki.current===t&&(ee(Ft),ee(Ki))}var ie=Tr(0);function bo(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ca=[];function Qu(){for(var t=0;t<Ca.length;t++)Ca[t]._workInProgressVersionPrimary=null;Ca.length=0}var Js=rr.ReactCurrentDispatcher,Ia=rr.ReactCurrentBatchConfig,Yr=0,oe=null,we=null,ke=null,So=!1,ki=!1,Gi=0,Ww=0;function je(){throw Error(O(321))}function Yu(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Rt(t[r],e[r]))return!1;return!0}function Xu(t,e,r,n,i,s){if(Yr=s,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Js.current=t===null||t.memoizedState===null?qw:Gw,t=r(n,i),ki){s=0;do{if(ki=!1,Gi=0,25<=s)throw Error(O(301));s+=1,ke=we=null,e.updateQueue=null,Js.current=Jw,t=r(n,i)}while(ki)}if(Js.current=Eo,e=we!==null&&we.next!==null,Yr=0,ke=we=oe=null,So=!1,e)throw Error(O(300));return t}function Zu(){var t=Gi!==0;return Gi=0,t}function $t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?oe.memoizedState=ke=t:ke=ke.next=t,ke}function _t(){if(we===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=ke===null?oe.memoizedState:ke.next;if(e!==null)ke=e,we=t;else{if(t===null)throw Error(O(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},ke===null?oe.memoizedState=ke=t:ke=ke.next=t}return ke}function Ji(t,e){return typeof e=="function"?e(t):e}function Pa(t){var e=_t(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var n=we,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Yr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,oe.lanes|=c,Xr|=c}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,Rt(n,e.memoizedState)||(Je=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,oe.lanes|=s,Xr|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function xa(t){var e=_t(),r=e.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rt(s,e.memoizedState)||(Je=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Op(){}function Cp(t,e){var r=oe,n=_t(),i=e(),s=!Rt(n.memoizedState,i);if(s&&(n.memoizedState=i,Je=!0),n=n.queue,ec(xp.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(r.flags|=2048,Qi(9,Pp.bind(null,r,n,i,e),void 0,null),Te===null)throw Error(O(349));Yr&30||Ip(r,e,i)}return i}function Ip(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Pp(t,e,r,n){e.value=r,e.getSnapshot=n,Rp(e)&&Ap(t)}function xp(t,e,r){return r(function(){Rp(e)&&Ap(t)})}function Rp(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Rt(t,r)}catch{return!0}}function Ap(t){var e=Zt(t,1);e!==null&&xt(e,t,1,-1)}function jd(t){var e=$t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:t},e.queue=t,t=t.dispatch=Kw.bind(null,oe,t),[e.memoizedState,t]}function Qi(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function jp(){return _t().memoizedState}function Qs(t,e,r,n){var i=$t();oe.flags|=t,i.memoizedState=Qi(1|e,r,void 0,n===void 0?null:n)}function Wo(t,e,r,n){var i=_t();n=n===void 0?null:n;var s=void 0;if(we!==null){var o=we.memoizedState;if(s=o.destroy,n!==null&&Yu(n,o.deps)){i.memoizedState=Qi(e,r,s,n);return}}oe.flags|=t,i.memoizedState=Qi(1|e,r,s,n)}function $d(t,e){return Qs(8390656,8,t,e)}function ec(t,e){return Wo(2048,8,t,e)}function $p(t,e){return Wo(4,2,t,e)}function Np(t,e){return Wo(4,4,t,e)}function Lp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Up(t,e,r){return r=r!=null?r.concat([t]):null,Wo(4,4,Lp.bind(null,e,t),r)}function tc(){}function Dp(t,e){var r=_t();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yu(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Fp(t,e){var r=_t();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yu(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Bp(t,e,r){return Yr&21?(Rt(r,e)||(r=Hh(),oe.lanes|=r,Xr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Je=!0),t.memoizedState=r)}function Vw(t,e){var r=q;q=r!==0&&4>r?r:4,t(!0);var n=Ia.transition;Ia.transition={};try{t(!1),e()}finally{q=r,Ia.transition=n}}function Mp(){return _t().memoizedState}function Hw(t,e,r){var n=wr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},zp(t))Wp(e,r);else if(r=Ep(t,e,r,n),r!==null){var i=Ve();xt(r,t,n,i),Vp(r,e,n)}}function Kw(t,e,r){var n=wr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(zp(t))Wp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Rt(a,o)){var l=e.interleaved;l===null?(i.next=i,Ku(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=Ep(t,e,i,n),r!==null&&(i=Ve(),xt(r,t,n,i),Vp(r,e,n))}}function zp(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function Wp(t,e){ki=So=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Vp(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Au(t,r)}}var Eo={readContext:wt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},qw={readContext:wt,useCallback:function(t,e){return $t().memoizedState=[t,e===void 0?null:e],t},useContext:wt,useEffect:$d,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Qs(4194308,4,Lp.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Qs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qs(4,2,t,e)},useMemo:function(t,e){var r=$t();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=$t();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Hw.bind(null,oe,t),[n.memoizedState,t]},useRef:function(t){var e=$t();return t={current:t},e.memoizedState=t},useState:jd,useDebugValue:tc,useDeferredValue:function(t){return $t().memoizedState=t},useTransition:function(){var t=jd(!1),e=t[0];return t=Vw.bind(null,t[1]),$t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=oe,i=$t();if(te){if(r===void 0)throw Error(O(407));r=r()}else{if(r=e(),Te===null)throw Error(O(349));Yr&30||Ip(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,$d(xp.bind(null,n,s,t),[t]),n.flags|=2048,Qi(9,Pp.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=$t(),e=Te.identifierPrefix;if(te){var r=Gt,n=qt;r=(n&~(1<<32-Pt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gi++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ww++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gw={readContext:wt,useCallback:Dp,useContext:wt,useEffect:ec,useImperativeHandle:Up,useInsertionEffect:$p,useLayoutEffect:Np,useMemo:Fp,useReducer:Pa,useRef:jp,useState:function(){return Pa(Ji)},useDebugValue:tc,useDeferredValue:function(t){var e=_t();return Bp(e,we.memoizedState,t)},useTransition:function(){var t=Pa(Ji)[0],e=_t().memoizedState;return[t,e]},useMutableSource:Op,useSyncExternalStore:Cp,useId:Mp,unstable_isNewReconciler:!1},Jw={readContext:wt,useCallback:Dp,useContext:wt,useEffect:ec,useImperativeHandle:Up,useInsertionEffect:$p,useLayoutEffect:Np,useMemo:Fp,useReducer:xa,useRef:jp,useState:function(){return xa(Ji)},useDebugValue:tc,useDeferredValue:function(t){var e=_t();return we===null?e.memoizedState=t:Bp(e,we.memoizedState,t)},useTransition:function(){var t=xa(Ji)[0],e=_t().memoizedState;return[t,e]},useMutableSource:Op,useSyncExternalStore:Cp,useId:Mp,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Al(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ae({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Vo={isMounted:function(t){return(t=t._reactInternals)?nn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ve(),i=wr(t),s=Jt(n,i);s.payload=e,r!=null&&(s.callback=r),e=mr(t,s,i),e!==null&&(xt(e,t,i,n),Gs(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ve(),i=wr(t),s=Jt(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=mr(t,s,i),e!==null&&(xt(e,t,i,n),Gs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ve(),n=wr(t),i=Jt(r,n);i.tag=2,e!=null&&(i.callback=e),e=mr(t,i,n),e!==null&&(xt(e,t,n,r),Gs(e,t,n))}};function Nd(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!zi(r,n)||!zi(i,s):!0}function Hp(t,e,r){var n=!1,i=Er,s=e.contextType;return typeof s=="object"&&s!==null?s=wt(s):(i=Ye(e)?Jr:Be.current,n=e.contextTypes,s=(n=n!=null)?Dn(t,i):Er),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ld(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Vo.enqueueReplaceState(e,e.state,null)}function jl(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},qu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wt(s):(s=Ye(e)?Jr:Be.current,i.context=Dn(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Al(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vo.enqueueReplaceState(i,i.state,null),_o(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zn(t,e){try{var r="",n=e;do r+=Ey(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ra(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function $l(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Qw=typeof WeakMap=="function"?WeakMap:Map;function Kp(t,e,r){r=Jt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){To||(To=!0,Vl=n),$l(t,e)},r}function qp(t,e,r){r=Jt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){$l(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){$l(t,e),typeof n!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Ud(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Qw;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=c0.bind(null,t,e,r),e.then(t,t))}function Dd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fd(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Jt(-1,1),e.tag=2,mr(r,e,1))),r.lanes|=1),t)}var Yw=rr.ReactCurrentOwner,Je=!1;function ze(t,e,r,n){e.child=t===null?Sp(e,null,r,n):Bn(e,t.child,r,n)}function Bd(t,e,r,n,i){r=r.render;var s=e.ref;return An(e,i),n=Xu(t,e,r,n,s,i),r=Zu(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,er(t,e,i)):(te&&r&&Bu(e),e.flags|=1,ze(t,e,n,i),e.child)}function Md(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!uc(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,Gp(t,e,s,n,i)):(t=eo(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:zi,r(o,n)&&t.ref===e.ref)return er(t,e,i)}return e.flags|=1,t=_r(s,n),t.ref=e.ref,t.return=e,e.child=t}function Gp(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(zi(s,n)&&t.ref===e.ref)if(Je=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,er(t,e,i)}return Nl(t,e,r,n,i)}function Jp(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Cn,tt),tt|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(Cn,tt),tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Y(Cn,tt),tt|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Y(Cn,tt),tt|=n;return ze(t,e,i,r),e.child}function Qp(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Nl(t,e,r,n,i){var s=Ye(r)?Jr:Be.current;return s=Dn(e,s),An(e,i),r=Xu(t,e,r,n,s,i),n=Zu(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,er(t,e,i)):(te&&n&&Bu(e),e.flags|=1,ze(t,e,r,i),e.child)}function zd(t,e,r,n,i){if(Ye(r)){var s=!0;go(e)}else s=!1;if(An(e,i),e.stateNode===null)Ys(t,e),Hp(e,r,n),jl(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=wt(u):(u=Ye(r)?Jr:Be.current,u=Dn(e,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Ld(e,o,n,u),or=!1;var f=e.memoizedState;o.state=f,_o(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Qe.current||or?(typeof c=="function"&&(Al(e,r,c,n),l=e.memoizedState),(a=or||Nd(e,r,a,n,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,kp(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:kt(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=wt(l):(l=Ye(r)?Jr:Be.current,l=Dn(e,l));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Ld(e,o,n,l),or=!1,f=e.memoizedState,o.state=f,_o(e,n,o,i);var m=e.memoizedState;a!==d||f!==m||Qe.current||or?(typeof p=="function"&&(Al(e,r,p,n),m=e.memoizedState),(u=or||Nd(e,r,u,n,f,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Ll(t,e,r,n,s,i)}function Ll(t,e,r,n,i,s){Qp(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Cd(e,r,!1),er(t,e,s);n=e.stateNode,Yw.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Bn(e,t.child,null,s),e.child=Bn(e,null,a,s)):ze(t,e,a,s),e.memoizedState=n.state,i&&Cd(e,r,!0),e.child}function Yp(t){var e=t.stateNode;e.pendingContext?Od(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Od(t,e.context,!1),Gu(t,e.containerInfo)}function Wd(t,e,r,n,i){return Fn(),zu(i),e.flags|=256,ze(t,e,r,n),e.child}var Ul={dehydrated:null,treeContext:null,retryLane:0};function Dl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xp(t,e,r){var n=e.pendingProps,i=ie.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Y(ie,i&1),t===null)return xl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qo(o,n,0,null),t=Gr(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dl(r),e.memoizedState=Ul,t):rc(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Xw(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=_r(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=_r(a,s):(s=Gr(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Dl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Ul,n}return s=t.child,t=s.sibling,n=_r(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function rc(t,e){return e=qo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Os(t,e,r,n){return n!==null&&zu(n),Bn(e,t.child,null,r),t=rc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xw(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Ra(Error(O(422))),Os(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=qo({mode:"visible",children:n.children},i,0,null),s=Gr(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Bn(e,t.child,null,o),e.child.memoizedState=Dl(o),e.memoizedState=Ul,s);if(!(e.mode&1))return Os(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(O(419)),n=Ra(s,n,void 0),Os(t,e,o,n)}if(a=(o&t.childLanes)!==0,Je||a){if(n=Te,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zt(t,i),xt(n,t,i,-1))}return lc(),n=Ra(Error(O(421))),Os(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=d0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,st=vr(i.nextSibling),ot=e,te=!0,It=null,t!==null&&(pt[gt++]=qt,pt[gt++]=Gt,pt[gt++]=Qr,qt=t.id,Gt=t.overflow,Qr=e),e=rc(e,n.children),e.flags|=4096,e)}function Vd(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Rl(t.return,e,r)}function Aa(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Zp(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(ze(t,e,n.children,r),n=ie.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vd(t,r,e);else if(t.tag===19)Vd(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Y(ie,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&bo(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Aa(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bo(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Aa(e,!0,r,null,s);break;case"together":Aa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ys(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function er(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Xr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,r=_r(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=_r(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Zw(t,e,r){switch(e.tag){case 3:Yp(e),Fn();break;case 5:Tp(e);break;case 1:Ye(e.type)&&go(e);break;case 4:Gu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Y(yo,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Y(ie,ie.current&1),e.flags|=128,null):r&e.child.childLanes?Xp(t,e,r):(Y(ie,ie.current&1),t=er(t,e,r),t!==null?t.sibling:null);Y(ie,ie.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Zp(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(ie,ie.current),n)break;return null;case 22:case 23:return e.lanes=0,Jp(t,e,r)}return er(t,e,r)}var eg,Fl,tg,rg;eg=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fl=function(){};tg=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Vr(Ft.current);var s=null;switch(r){case"input":i=al(t,i),n=al(t,n),s=[];break;case"select":i=ae({},i,{value:void 0}),n=ae({},n,{value:void 0}),s=[];break;case"textarea":i=cl(t,i),n=cl(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ho)}fl(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ni.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ni.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Z("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};rg=function(t,e,r,n){r!==n&&(e.flags|=4)};function ui(t,e){if(!te)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function $e(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function e0(t,e,r){var n=e.pendingProps;switch(Mu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(e),null;case 1:return Ye(e.type)&&po(),$e(e),null;case 3:return n=e.stateNode,Mn(),ee(Qe),ee(Be),Qu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ks(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,It!==null&&(ql(It),It=null))),Fl(t,e),$e(e),null;case 5:Ju(e);var i=Vr(qi.current);if(r=e.type,t!==null&&e.stateNode!=null)tg(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(O(166));return $e(e),null}if(t=Vr(Ft.current),ks(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Nt]=e,n[Hi]=s,t=(e.mode&1)!==0,r){case"dialog":Z("cancel",n),Z("close",n);break;case"iframe":case"object":case"embed":Z("load",n);break;case"video":case"audio":for(i=0;i<mi.length;i++)Z(mi[i],n);break;case"source":Z("error",n);break;case"img":case"image":case"link":Z("error",n),Z("load",n);break;case"details":Z("toggle",n);break;case"input":Zc(n,s),Z("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Z("invalid",n);break;case"textarea":td(n,s),Z("invalid",n)}fl(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Es(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Es(n.textContent,a,t),i=["children",""+a]):Ni.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Z("scroll",n)}switch(r){case"input":gs(n),ed(n,s,!0);break;case"textarea":gs(n),rd(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ho)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xh(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Nt]=e,t[Hi]=n,eg(t,e,!1,!1),e.stateNode=t;e:{switch(o=hl(r,n),r){case"dialog":Z("cancel",t),Z("close",t),i=n;break;case"iframe":case"object":case"embed":Z("load",t),i=n;break;case"video":case"audio":for(i=0;i<mi.length;i++)Z(mi[i],t);i=n;break;case"source":Z("error",t),i=n;break;case"img":case"image":case"link":Z("error",t),Z("load",t),i=n;break;case"details":Z("toggle",t),i=n;break;case"input":Zc(t,n),i=al(t,n),Z("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ae({},n,{value:void 0}),Z("invalid",t);break;case"textarea":td(t,n),i=cl(t,n),Z("invalid",t);break;default:i=n}fl(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jh(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Rh(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Li(t,l):typeof l=="number"&&Li(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ni.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Z("scroll",t):l!=null&&Ou(t,s,l,o))}switch(r){case"input":gs(t),ed(t,n,!1);break;case"textarea":gs(t),rd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Sr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?In(t,!!n.multiple,s,!1):n.defaultValue!=null&&In(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ho)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $e(e),null;case 6:if(t&&e.stateNode!=null)rg(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(O(166));if(r=Vr(qi.current),Vr(Ft.current),ks(e)){if(n=e.stateNode,r=e.memoizedProps,n[Nt]=e,(s=n.nodeValue!==r)&&(t=ot,t!==null))switch(t.tag){case 3:Es(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Es(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Nt]=e,e.stateNode=n}return $e(e),null;case 13:if(ee(ie),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(te&&st!==null&&e.mode&1&&!(e.flags&128))_p(),Fn(),e.flags|=98560,s=!1;else if(s=ks(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Nt]=e}else Fn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$e(e),s=!1}else It!==null&&(ql(It),It=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ie.current&1?be===0&&(be=3):lc())),e.updateQueue!==null&&(e.flags|=4),$e(e),null);case 4:return Mn(),Fl(t,e),t===null&&Wi(e.stateNode.containerInfo),$e(e),null;case 10:return Hu(e.type._context),$e(e),null;case 17:return Ye(e.type)&&po(),$e(e),null;case 19:if(ee(ie),s=e.memoizedState,s===null)return $e(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)ui(s,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bo(t),o!==null){for(e.flags|=128,ui(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Y(ie,ie.current&1|2),e.child}t=t.sibling}s.tail!==null&&he()>Wn&&(e.flags|=128,n=!0,ui(s,!1),e.lanes=4194304)}else{if(!n)if(t=bo(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ui(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!te)return $e(e),null}else 2*he()-s.renderingStartTime>Wn&&r!==1073741824&&(e.flags|=128,n=!0,ui(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=he(),e.sibling=null,r=ie.current,Y(ie,n?r&1|2:r&1),e):($e(e),null);case 22:case 23:return ac(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?tt&1073741824&&($e(e),e.subtreeFlags&6&&(e.flags|=8192)):$e(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function t0(t,e){switch(Mu(e),e.tag){case 1:return Ye(e.type)&&po(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mn(),ee(Qe),ee(Be),Qu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ju(e),null;case 13:if(ee(ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Fn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ee(ie),null;case 4:return Mn(),null;case 10:return Hu(e.type._context),null;case 22:case 23:return ac(),null;case 24:return null;default:return null}}var Cs=!1,Ue=!1,r0=typeof WeakSet=="function"?WeakSet:Set,x=null;function On(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){le(t,e,n)}else r.current=null}function Bl(t,e,r){try{r()}catch(n){le(t,e,n)}}var Hd=!1;function n0(t,e){if(El=uo,t=ap(),Fu(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===r&&++u===i&&(a=o),f===s&&++c===n&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(kl={focusedElem:t,selectionRange:r},uo=!1,x=e;x!==null;)if(e=x,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,x=t;else for(;x!==null;){e=x;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,g=e.stateNode,h=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:kt(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(_){le(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,x=t;break}x=e.return}return m=Hd,Hd=!1,m}function Ti(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Bl(e,r,s)}i=i.next}while(i!==n)}}function Ho(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Ml(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ng(t){var e=t.alternate;e!==null&&(t.alternate=null,ng(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nt],delete e[Hi],delete e[Cl],delete e[Fw],delete e[Bw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ig(t){return t.tag===5||t.tag===3||t.tag===4}function Kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ig(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ho));else if(n!==4&&(t=t.child,t!==null))for(zl(t,e,r),t=t.sibling;t!==null;)zl(t,e,r),t=t.sibling}function Wl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Wl(t,e,r),t=t.sibling;t!==null;)Wl(t,e,r),t=t.sibling}var Ce=null,Ot=!1;function nr(t,e,r){for(r=r.child;r!==null;)sg(t,e,r),r=r.sibling}function sg(t,e,r){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Uo,r)}catch{}switch(r.tag){case 5:Ue||On(r,e);case 6:var n=Ce,i=Ot;Ce=null,nr(t,e,r),Ce=n,Ot=i,Ce!==null&&(Ot?(t=Ce,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ce.removeChild(r.stateNode));break;case 18:Ce!==null&&(Ot?(t=Ce,r=r.stateNode,t.nodeType===8?Ta(t.parentNode,r):t.nodeType===1&&Ta(t,r),Bi(t)):Ta(Ce,r.stateNode));break;case 4:n=Ce,i=Ot,Ce=r.stateNode.containerInfo,Ot=!0,nr(t,e,r),Ce=n,Ot=i;break;case 0:case 11:case 14:case 15:if(!Ue&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Bl(r,e,o),i=i.next}while(i!==n)}nr(t,e,r);break;case 1:if(!Ue&&(On(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){le(r,e,a)}nr(t,e,r);break;case 21:nr(t,e,r);break;case 22:r.mode&1?(Ue=(n=Ue)||r.memoizedState!==null,nr(t,e,r),Ue=n):nr(t,e,r);break;default:nr(t,e,r)}}function qd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new r0),e.forEach(function(n){var i=f0.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function bt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ce=a.stateNode,Ot=!1;break e;case 3:Ce=a.stateNode.containerInfo,Ot=!0;break e;case 4:Ce=a.stateNode.containerInfo,Ot=!0;break e}a=a.return}if(Ce===null)throw Error(O(160));sg(s,o,i),Ce=null,Ot=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){le(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)og(e,t),e=e.sibling}function og(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bt(e,t),jt(t),n&4){try{Ti(3,t,t.return),Ho(3,t)}catch(y){le(t,t.return,y)}try{Ti(5,t,t.return)}catch(y){le(t,t.return,y)}}break;case 1:bt(e,t),jt(t),n&512&&r!==null&&On(r,r.return);break;case 5:if(bt(e,t),jt(t),n&512&&r!==null&&On(r,r.return),t.flags&32){var i=t.stateNode;try{Li(i,"")}catch(y){le(t,t.return,y)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ih(i,s),hl(a,o);var u=hl(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?jh(i,d):c==="dangerouslySetInnerHTML"?Rh(i,d):c==="children"?Li(i,d):Ou(i,c,d,u)}switch(a){case"input":ll(i,s);break;case"textarea":Ph(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?In(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?In(i,!!s.multiple,s.defaultValue,!0):In(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hi]=s}catch(y){le(t,t.return,y)}}break;case 6:if(bt(e,t),jt(t),n&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){le(t,t.return,y)}}break;case 3:if(bt(e,t),jt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Bi(e.containerInfo)}catch(y){le(t,t.return,y)}break;case 4:bt(e,t),jt(t);break;case 13:bt(e,t),jt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sc=he())),n&4&&qd(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(Ue=(u=Ue)||c,bt(e,t),Ue=u):bt(e,t),jt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(x=t,c=t.child;c!==null;){for(d=x=c;x!==null;){switch(f=x,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ti(4,f,f.return);break;case 1:On(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){le(n,r,y)}}break;case 5:On(f,f.return);break;case 22:if(f.memoizedState!==null){Jd(d);continue}}p!==null?(p.return=f,x=p):Jd(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ah("display",o))}catch(y){le(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){le(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bt(e,t),jt(t),n&4&&qd(t);break;case 21:break;default:bt(e,t),jt(t)}}function jt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ig(r)){var n=r;break e}r=r.return}throw Error(O(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Li(i,""),n.flags&=-33);var s=Kd(t);Wl(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Kd(t);zl(t,a,o);break;default:throw Error(O(161))}}catch(l){le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function i0(t,e,r){x=t,ag(t)}function ag(t,e,r){for(var n=(t.mode&1)!==0;x!==null;){var i=x,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Cs;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ue;a=Cs;var u=Ue;if(Cs=o,(Ue=l)&&!u)for(x=i;x!==null;)o=x,l=o.child,o.tag===22&&o.memoizedState!==null?Qd(i):l!==null?(l.return=o,x=l):Qd(i);for(;s!==null;)x=s,ag(s),s=s.sibling;x=i,Cs=a,Ue=u}Gd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,x=s):Gd(t)}}function Gd(t){for(;x!==null;){var e=x;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||Ho(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ue)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:kt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ad(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ad(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Bi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Ue||e.flags&512&&Ml(e)}catch(f){le(e,e.return,f)}}if(e===t){x=null;break}if(r=e.sibling,r!==null){r.return=e.return,x=r;break}x=e.return}}function Jd(t){for(;x!==null;){var e=x;if(e===t){x=null;break}var r=e.sibling;if(r!==null){r.return=e.return,x=r;break}x=e.return}}function Qd(t){for(;x!==null;){var e=x;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ho(4,e)}catch(l){le(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){le(e,i,l)}}var s=e.return;try{Ml(e)}catch(l){le(e,s,l)}break;case 5:var o=e.return;try{Ml(e)}catch(l){le(e,o,l)}}}catch(l){le(e,e.return,l)}if(e===t){x=null;break}var a=e.sibling;if(a!==null){a.return=e.return,x=a;break}x=e.return}}var s0=Math.ceil,ko=rr.ReactCurrentDispatcher,nc=rr.ReactCurrentOwner,mt=rr.ReactCurrentBatchConfig,W=0,Te=null,ve=null,Re=0,tt=0,Cn=Tr(0),be=0,Yi=null,Xr=0,Ko=0,ic=0,Oi=null,Ge=null,sc=0,Wn=1/0,Vt=null,To=!1,Vl=null,yr=null,Is=!1,dr=null,Oo=0,Ci=0,Hl=null,Xs=-1,Zs=0;function Ve(){return W&6?he():Xs!==-1?Xs:Xs=he()}function wr(t){return t.mode&1?W&2&&Re!==0?Re&-Re:zw.transition!==null?(Zs===0&&(Zs=Hh()),Zs):(t=q,t!==0||(t=window.event,t=t===void 0?16:Xh(t.type)),t):1}function xt(t,e,r,n){if(50<Ci)throw Ci=0,Hl=null,Error(O(185));is(t,r,n),(!(W&2)||t!==Te)&&(t===Te&&(!(W&2)&&(Ko|=r),be===4&&lr(t,Re)),Xe(t,n),r===1&&W===0&&!(e.mode&1)&&(Wn=he()+500,zo&&Or()))}function Xe(t,e){var r=t.callbackNode;zy(t,e);var n=lo(t,t===Te?Re:0);if(n===0)r!==null&&sd(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&sd(r),e===1)t.tag===0?Mw(Yd.bind(null,t)):mp(Yd.bind(null,t)),Uw(function(){!(W&6)&&Or()}),r=null;else{switch(Kh(n)){case 1:r=Ru;break;case 4:r=Wh;break;case 16:r=ao;break;case 536870912:r=Vh;break;default:r=ao}r=gg(r,lg.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function lg(t,e){if(Xs=-1,Zs=0,W&6)throw Error(O(327));var r=t.callbackNode;if(jn()&&t.callbackNode!==r)return null;var n=lo(t,t===Te?Re:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Co(t,n);else{e=n;var i=W;W|=2;var s=cg();(Te!==t||Re!==e)&&(Vt=null,Wn=he()+500,qr(t,e));do try{l0();break}catch(a){ug(t,a)}while(!0);Vu(),ko.current=s,W=i,ve!==null?e=0:(Te=null,Re=0,e=be)}if(e!==0){if(e===2&&(i=yl(t),i!==0&&(n=i,e=Kl(t,i))),e===1)throw r=Yi,qr(t,0),lr(t,n),Xe(t,he()),r;if(e===6)lr(t,n);else{if(i=t.current.alternate,!(n&30)&&!o0(i)&&(e=Co(t,n),e===2&&(s=yl(t),s!==0&&(n=s,e=Kl(t,s))),e===1))throw r=Yi,qr(t,0),lr(t,n),Xe(t,he()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(O(345));case 2:Lr(t,Ge,Vt);break;case 3:if(lr(t,n),(n&130023424)===n&&(e=sc+500-he(),10<e)){if(lo(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Ve(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ol(Lr.bind(null,t,Ge,Vt),e);break}Lr(t,Ge,Vt);break;case 4:if(lr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Pt(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=he()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*s0(n/1960))-n,10<n){t.timeoutHandle=Ol(Lr.bind(null,t,Ge,Vt),n);break}Lr(t,Ge,Vt);break;case 5:Lr(t,Ge,Vt);break;default:throw Error(O(329))}}}return Xe(t,he()),t.callbackNode===r?lg.bind(null,t):null}function Kl(t,e){var r=Oi;return t.current.memoizedState.isDehydrated&&(qr(t,e).flags|=256),t=Co(t,e),t!==2&&(e=Ge,Ge=r,e!==null&&ql(e)),t}function ql(t){Ge===null?Ge=t:Ge.push.apply(Ge,t)}function o0(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Rt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~ic,e&=~Ko,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Pt(e),n=1<<r;t[r]=-1,e&=~n}}function Yd(t){if(W&6)throw Error(O(327));jn();var e=lo(t,0);if(!(e&1))return Xe(t,he()),null;var r=Co(t,e);if(t.tag!==0&&r===2){var n=yl(t);n!==0&&(e=n,r=Kl(t,n))}if(r===1)throw r=Yi,qr(t,0),lr(t,e),Xe(t,he()),r;if(r===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lr(t,Ge,Vt),Xe(t,he()),null}function oc(t,e){var r=W;W|=1;try{return t(e)}finally{W=r,W===0&&(Wn=he()+500,zo&&Or())}}function Zr(t){dr!==null&&dr.tag===0&&!(W&6)&&jn();var e=W;W|=1;var r=mt.transition,n=q;try{if(mt.transition=null,q=1,t)return t()}finally{q=n,mt.transition=r,W=e,!(W&6)&&Or()}}function ac(){tt=Cn.current,ee(Cn)}function qr(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Lw(r)),ve!==null)for(r=ve.return;r!==null;){var n=r;switch(Mu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&po();break;case 3:Mn(),ee(Qe),ee(Be),Qu();break;case 5:Ju(n);break;case 4:Mn();break;case 13:ee(ie);break;case 19:ee(ie);break;case 10:Hu(n.type._context);break;case 22:case 23:ac()}r=r.return}if(Te=t,ve=t=_r(t.current,null),Re=tt=e,be=0,Yi=null,ic=Ko=Xr=0,Ge=Oi=null,Wr!==null){for(e=0;e<Wr.length;e++)if(r=Wr[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Wr=null}return t}function ug(t,e){do{var r=ve;try{if(Vu(),Js.current=Eo,So){for(var n=oe.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}So=!1}if(Yr=0,ke=we=oe=null,ki=!1,Gi=0,nc.current=null,r===null||r.return===null){be=1,Yi=e,ve=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=Re,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Dd(o);if(p!==null){p.flags&=-257,Fd(p,o,a,s,e),p.mode&1&&Ud(s,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){Ud(s,u,e),lc();break e}l=Error(O(426))}}else if(te&&a.mode&1){var w=Dd(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Fd(w,o,a,s,e),zu(zn(l,a));break e}}s=l=zn(l,a),be!==4&&(be=2),Oi===null?Oi=[s]:Oi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=Kp(s,l,e);Rd(s,g);break e;case 1:a=l;var h=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(yr===null||!yr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=qp(s,a,e);Rd(s,_);break e}}s=s.return}while(s!==null)}fg(r)}catch(k){e=k,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function cg(){var t=ko.current;return ko.current=Eo,t===null?Eo:t}function lc(){(be===0||be===3||be===2)&&(be=4),Te===null||!(Xr&268435455)&&!(Ko&268435455)||lr(Te,Re)}function Co(t,e){var r=W;W|=2;var n=cg();(Te!==t||Re!==e)&&(Vt=null,qr(t,e));do try{a0();break}catch(i){ug(t,i)}while(!0);if(Vu(),W=r,ko.current=n,ve!==null)throw Error(O(261));return Te=null,Re=0,be}function a0(){for(;ve!==null;)dg(ve)}function l0(){for(;ve!==null&&!jy();)dg(ve)}function dg(t){var e=pg(t.alternate,t,tt);t.memoizedProps=t.pendingProps,e===null?fg(t):ve=e,nc.current=null}function fg(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=t0(r,e),r!==null){r.flags&=32767,ve=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,ve=null;return}}else if(r=e0(r,e,tt),r!==null){ve=r;return}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);be===0&&(be=5)}function Lr(t,e,r){var n=q,i=mt.transition;try{mt.transition=null,q=1,u0(t,e,r,n)}finally{mt.transition=i,q=n}return null}function u0(t,e,r,n){do jn();while(dr!==null);if(W&6)throw Error(O(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Wy(t,s),t===Te&&(ve=Te=null,Re=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Is||(Is=!0,gg(ao,function(){return jn(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=mt.transition,mt.transition=null;var o=q;q=1;var a=W;W|=4,nc.current=null,n0(t,r),og(r,t),Pw(kl),uo=!!El,kl=El=null,t.current=r,i0(r),$y(),W=a,q=o,mt.transition=s}else t.current=r;if(Is&&(Is=!1,dr=t,Oo=i),s=t.pendingLanes,s===0&&(yr=null),Uy(r.stateNode),Xe(t,he()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(To)throw To=!1,t=Vl,Vl=null,t;return Oo&1&&t.tag!==0&&jn(),s=t.pendingLanes,s&1?t===Hl?Ci++:(Ci=0,Hl=t):Ci=0,Or(),null}function jn(){if(dr!==null){var t=Kh(Oo),e=mt.transition,r=q;try{if(mt.transition=null,q=16>t?16:t,dr===null)var n=!1;else{if(t=dr,dr=null,Oo=0,W&6)throw Error(O(331));var i=W;for(W|=4,x=t.current;x!==null;){var s=x,o=s.child;if(x.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(x=u;x!==null;){var c=x;switch(c.tag){case 0:case 11:case 15:Ti(8,c,s)}var d=c.child;if(d!==null)d.return=c,x=d;else for(;x!==null;){c=x;var f=c.sibling,p=c.return;if(ng(c),c===u){x=null;break}if(f!==null){f.return=p,x=f;break}x=p}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}x=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,x=o;else e:for(;x!==null;){if(s=x,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ti(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,x=g;break e}x=s.return}}var h=t.current;for(x=h;x!==null;){o=x;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,x=v;else e:for(o=h;x!==null;){if(a=x,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ho(9,a)}}catch(k){le(a,a.return,k)}if(a===o){x=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,x=_;break e}x=a.return}}if(W=i,Or(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Uo,t)}catch{}n=!0}return n}finally{q=r,mt.transition=e}}return!1}function Xd(t,e,r){e=zn(r,e),e=Kp(t,e,1),t=mr(t,e,1),e=Ve(),t!==null&&(is(t,1,e),Xe(t,e))}function le(t,e,r){if(t.tag===3)Xd(t,t,r);else for(;e!==null;){if(e.tag===3){Xd(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yr===null||!yr.has(n))){t=zn(r,t),t=qp(e,t,1),e=mr(e,t,1),t=Ve(),e!==null&&(is(e,1,t),Xe(e,t));break}}e=e.return}}function c0(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&r,Te===t&&(Re&r)===r&&(be===4||be===3&&(Re&130023424)===Re&&500>he()-sc?qr(t,0):ic|=r),Xe(t,e)}function hg(t,e){e===0&&(t.mode&1?(e=ys,ys<<=1,!(ys&130023424)&&(ys=4194304)):e=1);var r=Ve();t=Zt(t,e),t!==null&&(is(t,e,r),Xe(t,r))}function d0(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),hg(t,r)}function f0(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(e),hg(t,r)}var pg;pg=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qe.current)Je=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Je=!1,Zw(t,e,r);Je=!!(t.flags&131072)}else Je=!1,te&&e.flags&1048576&&yp(e,mo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ys(t,e),t=e.pendingProps;var i=Dn(e,Be.current);An(e,r),i=Xu(null,e,n,t,i,r);var s=Zu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ye(n)?(s=!0,go(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qu(e),i.updater=Vo,e.stateNode=i,i._reactInternals=e,jl(e,n,t,r),e=Ll(null,e,n,!0,s,r)):(e.tag=0,te&&s&&Bu(e),ze(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ys(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=p0(n),t=kt(n,t),i){case 0:e=Nl(null,e,n,t,r);break e;case 1:e=zd(null,e,n,t,r);break e;case 11:e=Bd(null,e,n,t,r);break e;case 14:e=Md(null,e,n,kt(n.type,t),r);break e}throw Error(O(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kt(n,i),Nl(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kt(n,i),zd(t,e,n,i,r);case 3:e:{if(Yp(e),t===null)throw Error(O(387));n=e.pendingProps,s=e.memoizedState,i=s.element,kp(t,e),_o(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zn(Error(O(423)),e),e=Wd(t,e,n,r,i);break e}else if(n!==i){i=zn(Error(O(424)),e),e=Wd(t,e,n,r,i);break e}else for(st=vr(e.stateNode.containerInfo.firstChild),ot=e,te=!0,It=null,r=Sp(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fn(),n===i){e=er(t,e,r);break e}ze(t,e,n,r)}e=e.child}return e;case 5:return Tp(e),t===null&&xl(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Tl(n,i)?o=null:s!==null&&Tl(n,s)&&(e.flags|=32),Qp(t,e),ze(t,e,o,r),e.child;case 6:return t===null&&xl(e),null;case 13:return Xp(t,e,r);case 4:return Gu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Bn(e,null,n,r):ze(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kt(n,i),Bd(t,e,n,i,r);case 7:return ze(t,e,e.pendingProps,r),e.child;case 8:return ze(t,e,e.pendingProps.children,r),e.child;case 12:return ze(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Y(yo,n._currentValue),n._currentValue=o,s!==null)if(Rt(s.value,o)){if(s.children===i.children&&!Qe.current){e=er(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Jt(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Rl(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Rl(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ze(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,An(e,r),i=wt(i),n=n(i),e.flags|=1,ze(t,e,n,r),e.child;case 14:return n=e.type,i=kt(n,e.pendingProps),i=kt(n.type,i),Md(t,e,n,i,r);case 15:return Gp(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:kt(n,i),Ys(t,e),e.tag=1,Ye(n)?(t=!0,go(e)):t=!1,An(e,r),Hp(e,n,i),jl(e,n,i,r),Ll(null,e,n,!0,t,r);case 19:return Zp(t,e,r);case 22:return Jp(t,e,r)}throw Error(O(156,e.tag))};function gg(t,e){return zh(t,e)}function h0(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,r,n){return new h0(t,e,r,n)}function uc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function p0(t){if(typeof t=="function")return uc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Iu)return 11;if(t===Pu)return 14}return 2}function _r(t,e){var r=t.alternate;return r===null?(r=vt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function eo(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")uc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mn:return Gr(r.children,i,s,e);case Cu:o=8,i|=8;break;case nl:return t=vt(12,r,e,i|2),t.elementType=nl,t.lanes=s,t;case il:return t=vt(13,r,e,i),t.elementType=il,t.lanes=s,t;case sl:return t=vt(19,r,e,i),t.elementType=sl,t.lanes=s,t;case Th:return qo(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eh:o=10;break e;case kh:o=9;break e;case Iu:o=11;break e;case Pu:o=14;break e;case sr:o=16,n=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=vt(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Gr(t,e,r,n){return t=vt(7,t,n,e),t.lanes=r,t}function qo(t,e,r,n){return t=vt(22,t,n,e),t.elementType=Th,t.lanes=r,t.stateNode={isHidden:!1},t}function ja(t,e,r){return t=vt(6,t,null,e),t.lanes=r,t}function $a(t,e,r){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g0(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cc(t,e,r,n,i,s,o,a,l){return t=new g0(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qu(s),t}function v0(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function vg(t){if(!t)return Er;t=t._reactInternals;e:{if(nn(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ye(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var r=t.type;if(Ye(r))return vp(t,r,e)}return e}function mg(t,e,r,n,i,s,o,a,l){return t=cc(r,n,!0,t,i,s,o,a,l),t.context=vg(null),r=t.current,n=Ve(),i=wr(r),s=Jt(n,i),s.callback=e??null,mr(r,s,i),t.current.lanes=i,is(t,i,n),Xe(t,n),t}function Go(t,e,r,n){var i=e.current,s=Ve(),o=wr(i);return r=vg(r),e.context===null?e.context=r:e.pendingContext=r,e=Jt(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=mr(i,e,o),t!==null&&(xt(t,i,o,s),Gs(t,i,o)),o}function Io(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function dc(t,e){Zd(t,e),(t=t.alternate)&&Zd(t,e)}function m0(){return null}var yg=typeof reportError=="function"?reportError:function(t){console.error(t)};function fc(t){this._internalRoot=t}Jo.prototype.render=fc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Go(t,e,null,null)};Jo.prototype.unmount=fc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zr(function(){Go(null,t,null,null)}),e[Xt]=null}};function Jo(t){this._internalRoot=t}Jo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jh();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ar.length&&e!==0&&e<ar[r].priority;r++);ar.splice(r,0,t),r===0&&Yh(t)}};function hc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ef(){}function y0(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Io(o);s.call(u)}}var o=mg(e,n,t,0,null,!1,!1,"",ef);return t._reactRootContainer=o,t[Xt]=o.current,Wi(t.nodeType===8?t.parentNode:t),Zr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=Io(l);a.call(u)}}var l=cc(t,0,!1,null,null,!1,!1,"",ef);return t._reactRootContainer=l,t[Xt]=l.current,Wi(t.nodeType===8?t.parentNode:t),Zr(function(){Go(e,l,r,n)}),l}function Yo(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Io(o);a.call(l)}}Go(e,o,t,i)}else o=y0(r,e,t,i,n);return Io(o)}qh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=vi(e.pendingLanes);r!==0&&(Au(e,r|1),Xe(e,he()),!(W&6)&&(Wn=he()+500,Or()))}break;case 13:Zr(function(){var n=Zt(t,1);if(n!==null){var i=Ve();xt(n,t,1,i)}}),dc(t,1)}};ju=function(t){if(t.tag===13){var e=Zt(t,134217728);if(e!==null){var r=Ve();xt(e,t,134217728,r)}dc(t,134217728)}};Gh=function(t){if(t.tag===13){var e=wr(t),r=Zt(t,e);if(r!==null){var n=Ve();xt(r,t,e,n)}dc(t,e)}};Jh=function(){return q};Qh=function(t,e){var r=q;try{return q=t,e()}finally{q=r}};gl=function(t,e,r){switch(e){case"input":if(ll(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Mo(n);if(!i)throw Error(O(90));Ch(n),ll(n,i)}}}break;case"textarea":Ph(t,r);break;case"select":e=r.value,e!=null&&In(t,!!r.multiple,e,!1)}};Lh=oc;Uh=Zr;var w0={usingClientEntryPoint:!1,Events:[os,bn,Mo,$h,Nh,oc]},ci={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_0={bundleType:ci.bundleType,version:ci.version,rendererPackageName:ci.rendererPackageName,rendererConfig:ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bh(t),t===null?null:t.stateNode},findFiberByHostInstance:ci.findFiberByHostInstance||m0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ps=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ps.isDisabled&&Ps.supportsFiber)try{Uo=Ps.inject(_0),Dt=Ps}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w0;lt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hc(e))throw Error(O(200));return v0(t,e,null,r)};lt.createRoot=function(t,e){if(!hc(t))throw Error(O(299));var r=!1,n="",i=yg;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=cc(t,1,!1,null,null,r,!1,n,i),t[Xt]=e.current,Wi(t.nodeType===8?t.parentNode:t),new fc(e)};lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Bh(e),t=t===null?null:t.stateNode,t};lt.flushSync=function(t){return Zr(t)};lt.hydrate=function(t,e,r){if(!Qo(e))throw Error(O(200));return Yo(null,t,e,!0,r)};lt.hydrateRoot=function(t,e,r){if(!hc(t))throw Error(O(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=yg;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=mg(e,null,t,1,r??null,i,!1,s,o),t[Xt]=e.current,Wi(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Jo(e)};lt.render=function(t,e,r){if(!Qo(e))throw Error(O(200));return Yo(null,t,e,!1,r)};lt.unmountComponentAtNode=function(t){if(!Qo(t))throw Error(O(40));return t._reactRootContainer?(Zr(function(){Yo(null,null,t,!1,function(){t._reactRootContainer=null,t[Xt]=null})}),!0):!1};lt.unstable_batchedUpdates=oc;lt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Qo(r))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Yo(t,e,r,!1,n)};lt.version="18.3.1-next-f1338f8080-20240426";function wg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wg)}catch(t){console.error(t)}}wg(),wh.exports=lt;var b0=wh.exports,tf=b0;tl.createRoot=tf.createRoot,tl.hydrateRoot=tf.hydrateRoot;const S0=({logoText:t="Guardian V2",navItems:e=[],rightSlot:r})=>j.jsxs("header",{className:"guardian-header",children:[j.jsx("div",{className:"guardian-logo",children:t}),e.length>0&&j.jsx("nav",{className:"guardian-nav",children:e.map(n=>j.jsx("button",{type:"button",className:`guardian-nav__item${n.active?" guardian-nav__item--active":""}`,onClick:n.onClick,children:n.label},n.label))}),r]}),Rr=({label:t,variant:e="secondary",onClick:r,disabled:n})=>j.jsx("button",{type:"button",className:`guardian-btn guardian-btn--${e}`,onClick:r,disabled:n,children:t});var Gl=function(t,e){return Gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Gl(t,e)};function U(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var J=function(){return J=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},J.apply(this,arguments)};function Qn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function _g(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function bg(t,e){return function(r,n){e(r,n,t)}}function Sg(t,e,r,n,i,s){function o(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,f=!1,p=r.length-1;p>=0;p--){var m={};for(var y in n)m[y]=y==="access"?{}:n[y];for(var y in n.access)m.access[y]=n.access[y];m.addInitializer=function(g){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(g||null))};var w=(0,r[p])(a==="accessor"?{get:c.get,set:c.set}:c[l],m);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=o(w.get))&&(c.get=d),(d=o(w.set))&&(c.set=d),(d=o(w.init))&&i.unshift(d)}else(d=o(w))&&(a==="field"?i.unshift(d):c[l]=d)}u&&Object.defineProperty(u,n.name,c),f=!0}function Eg(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function kg(t){return typeof t=="symbol"?t:"".concat(t)}function Tg(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Og(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function b(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})}function C(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(c){u=[6,c],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Xo=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function Cg(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xo(e,t,r)}function tr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Ig(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(F(arguments[e]));return t}function Pg(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function se(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Vn(t){return this instanceof Vn?(this.v=t,this):new Vn(t)}function xg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(m){return Promise.resolve(m).then(p,d)}}function a(p,m){n[p]&&(i[p]=function(y){return new Promise(function(w,g){s.push([p,y,w,g])>1||l(p,y)})},m&&(i[p]=m(i[p])))}function l(p,m){try{u(n[p](m))}catch(y){f(s[0][3],y)}}function u(p){p.value instanceof Vn?Promise.resolve(p.value.v).then(c,d):f(s[0][2],p)}function c(p){l("next",p)}function d(p){l("throw",p)}function f(p,m){p(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Rg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Vn(t[i](o)),done:!1}:s?s(o):o}:s}}function Ag(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof tr=="function"?tr(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}function pc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E0=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Jl=function(t){return Jl=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Jl(t)};function jg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Jl(t),n=0;n<r.length;n++)r[n]!=="default"&&Xo(e,t,r[n]);return E0(e,t),e}function $g(t){return t&&t.__esModule?t:{default:t}}function Ng(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Lg(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function Ug(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Dg(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var k0=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Fg(t){function e(s){t.error=t.hasError?new k0(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Bg(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):t}const T0={__extends:U,__assign:J,__rest:Qn,__decorate:_g,__param:bg,__esDecorate:Sg,__runInitializers:Eg,__propKey:kg,__setFunctionName:Tg,__metadata:Og,__awaiter:b,__generator:C,__createBinding:Xo,__exportStar:Cg,__values:tr,__read:F,__spread:Ig,__spreadArrays:Pg,__spreadArray:se,__await:Vn,__asyncGenerator:xg,__asyncDelegator:Rg,__asyncValues:Ag,__makeTemplateObject:pc,__importStar:jg,__importDefault:$g,__classPrivateFieldGet:Ng,__classPrivateFieldSet:Lg,__classPrivateFieldIn:Ug,__addDisposableResource:Dg,__disposeResources:Fg,__rewriteRelativeImportExtension:Bg},O0=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Dg,get __assign(){return J},__asyncDelegator:Rg,__asyncGenerator:xg,__asyncValues:Ag,__await:Vn,__awaiter:b,__classPrivateFieldGet:Ng,__classPrivateFieldIn:Ug,__classPrivateFieldSet:Lg,__createBinding:Xo,__decorate:_g,__disposeResources:Fg,__esDecorate:Sg,__exportStar:Cg,__extends:U,__generator:C,__importDefault:$g,__importStar:jg,__makeTemplateObject:pc,__metadata:Og,__param:bg,__propKey:kg,__read:F,__rest:Qn,__rewriteRelativeImportExtension:Bg,__runInitializers:Eg,__setFunctionName:Tg,__spread:Ig,__spreadArray:se,__spreadArrays:Pg,__values:tr,default:T0},Symbol.toStringTag,{value:"Module"})),C0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class gc extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class rf extends gc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nf extends gc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class sf extends gc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ql;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ql||(Ql={}));class I0{constructor(e,{headers:r={},customFetch:n,region:i=Ql.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=C0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return b(this,arguments,void 0,function*(r,n={}){var i;try{const{headers:s,method:o,body:a,signal:l}=n;let u={},{region:c}=n;c||(c=this.region);const d=new URL(`${this.url}/${r}`);c&&c!=="any"&&(u["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(u["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(u["Content-Type"]="application/json",f=JSON.stringify(a)):f=a;const p=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:f,signal:l}).catch(g=>{throw g.name==="AbortError"?g:new rf(g)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new nf(p);if(!p.ok)throw new sf(p);let y=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield p.json():y==="application/octet-stream"||y==="application/pdf"?w=yield p.blob():y==="text/event-stream"?w=p:y==="multipart/form-data"?w=yield p.formData():w=yield p.text(),{data:w,error:null,response:p}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new rf(s)}:{data:null,error:s,response:s instanceof sf||s instanceof nf?s.context:void 0}}})}}var We={};const Yn=Gm(O0);var xs={},Rs={},As={},js={},$s={},Ns={},of;function Mg(){if(of)return Ns;of=1,Object.defineProperty(Ns,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ns.default=t,Ns}var af;function zg(){if(af)return $s;af=1,Object.defineProperty($s,"__esModule",{value:!0});const e=Yn.__importDefault(Mg());class r{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,c,d,f;let p=null,m=null,y=null,w=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const k=await l.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?m=k:m=JSON.parse(k))}const v=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),_=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");v&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(p={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,y=null,w=406,g="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const v=await l.text();try{p=JSON.parse(v),Array.isArray(p)&&l.status===404&&(m=[],p=null,w=200,g="OK")}catch{l.status===404&&v===""?(w=204,g="No Content"):p={message:v}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,w=200,g="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:m,count:y,status:w,statusText:g}});return this.shouldThrowOnError||(a=a.catch(l=>{var u,c,d;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(c=l==null?void 0:l.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(d=l==null?void 0:l.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(i,s)}returns(){return this}overrideTypes(){return this}}return $s.default=r,$s}var lf;function Wg(){if(lf)return js;lf=1,Object.defineProperty(js,"__esModule",{value:!0});const e=Yn.__importDefault(zg());class r extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const d=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return js.default=r,js}var uf;function vc(){if(uf)return As;uf=1,Object.defineProperty(As,"__esModule",{value:!0});const e=Yn.__importDefault(Wg()),r=new RegExp("[,()]");class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&r.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${u}fts${c}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}}return As.default=n,As}var cf;function Vg(){if(cf)return Rs;cf=1,Object.defineProperty(Rs,"__esModule",{value:!0});const e=Yn.__importDefault(vc());class r{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",c),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Rs.default=r,Rs}var df;function P0(){if(df)return xs;df=1,Object.defineProperty(xs,"__esModule",{value:!0});const t=Yn,e=t.__importDefault(Vg()),r=t.__importDefault(vc());class n{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new n(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:u}={}){var c;let d;const f=new URL(`${this.url}/rpc/${s}`);let p;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{f.searchParams.append(y,w)})):(d="POST",p=o);const m=new Headers(this.headers);return u&&m.set("Prefer",`count=${u}`),new r.default({method:d,url:f,headers:m,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return xs.default=n,xs}Object.defineProperty(We,"__esModule",{value:!0});var Hg=We.PostgrestError=tv=We.PostgrestBuilder=Zg=We.PostgrestTransformBuilder=Yg=We.PostgrestFilterBuilder=Jg=We.PostgrestQueryBuilder=qg=We.PostgrestClient=void 0;const Xn=Yn,Kg=Xn.__importDefault(P0());var qg=We.PostgrestClient=Kg.default;const Gg=Xn.__importDefault(Vg());var Jg=We.PostgrestQueryBuilder=Gg.default;const Qg=Xn.__importDefault(vc());var Yg=We.PostgrestFilterBuilder=Qg.default;const Xg=Xn.__importDefault(Wg());var Zg=We.PostgrestTransformBuilder=Xg.default;const ev=Xn.__importDefault(zg());var tv=We.PostgrestBuilder=ev.default;const rv=Xn.__importDefault(Mg());Hg=We.PostgrestError=rv.default;var nv=We.default={PostgrestClient:Kg.default,PostgrestQueryBuilder:Gg.default,PostgrestFilterBuilder:Qg.default,PostgrestTransformBuilder:Xg.default,PostgrestBuilder:ev.default,PostgrestError:rv.default};const x0=Km({__proto__:null,get PostgrestBuilder(){return tv},get PostgrestClient(){return qg},get PostgrestError(){return Hg},get PostgrestFilterBuilder(){return Yg},get PostgrestQueryBuilder(){return Jg},get PostgrestTransformBuilder(){return Zg},default:nv},[We]),{PostgrestClient:R0,PostgrestQueryBuilder:Wk,PostgrestFilterBuilder:Vk,PostgrestTransformBuilder:Hk,PostgrestBuilder:Kk,PostgrestError:qk}=nv||x0;class A0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const j0="2.80.0",$0=`realtime-js/${j0}`,N0="1.0.0",Yl=1e4,L0=1e3,U0=100;var Ii;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ii||(Ii={}));var ye;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ye||(ye={}));var Ct;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ct||(Ct={}));var Xl;(function(t){t.websocket="websocket"})(Xl||(Xl={}));var Dr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Dr||(Dr={}));class D0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class iv{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Q||(Q={}));const ff=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=F0(o,t,e,i),s),{}):{}},F0=(t,e,r,n)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=r[t];return s&&!n.includes(s)?sv(s,o):Zl(o)},sv=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return W0(e,r)}switch(t){case Q.bool:return B0(e);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return M0(e);case Q.json:case Q.jsonb:return z0(e);case Q.timestamp:return V0(e);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return Zl(e);default:return Zl(e)}},Zl=t=>t,B0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},M0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},z0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},W0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>sv(e,a))}return t},V0=t=>typeof t=="string"?t.replace(" ","T"):t,ov=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Na{constructor(e,r,n={},i=Yl){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hf||(hf={}));class Pi{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pi.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Pi.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Pi.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const s=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const f=c.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),m=c.filter(w=>p.indexOf(w.presence_ref)<0),y=d.filter(w=>f.indexOf(w.presence_ref)<0);m.length>0&&(a[u]=m),y.length>0&&(l[u]=y)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(e,r,n,i){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(p=>p.presence_ref),f=c.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(pf||(pf={}));var xi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(xi||(xi={}));var Ht;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ht||(Ht={}));class mc{constructor(e,r={config:{}},n){var i,s;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Na(this,Ct.join,this.params,this.timeout),this.rejoinTimer=new iv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ye.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ct.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Pi(this),this.broadcastEndpointURL=ov(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ye.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[xi.PRESENCE]&&this.bindings[xi.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Ht.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Ht.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e(Ht.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,g=[];for(let h=0;h<w;h++){const v=y[h],{filter:{event:_,schema:k,table:E,filter:T}}=v,P=p&&p[h];if(P&&P.event===_&&P.schema===k&&P.table===E&&P.filter===T)g.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),this.state=ye.errored,e==null||e(Ht.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Ht.SUBSCRIBED);return}}).receive("error",p=>{this.state=ye.errored,e==null||e(Ht.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ht.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===ye.joined&&e===xi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ye.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ct.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Na(this,Ct.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ye.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Na(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>U0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Ct;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,y,w;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((w=(y=p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var m,y,w,g,h,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,k=(m=p.filter)===null||m===void 0?void 0:m.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(h=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||h===void 0?void 0:h.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:y,table:w,commit_timestamp:g,type:h,errors:v}=m;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:g,eventType:h,new:{},old:{},errors:v}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===ye.closed}_isJoined(){return this.state===ye.joined}_isJoining(){return this.state===ye.joining}_isLeaving(){return this.state===ye.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),s={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&mc.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ct.close,{},e)}_onError(e){this._on(Ct.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ye.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ff(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ff(e.columns,e.old_record)),r}}const La=()=>{},Ls={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},H0=[1e3,2e3,5e3,1e4],K0=1e4,q0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class G0{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yl,this.transport=null,this.heartbeatIntervalMs=Ls.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=La,this.ref=0,this.reconnectTimer=null,this.logger=La,this.conn=null,this.sendBuffer=[],this.serializer=new D0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Xl.websocket}`,this.httpEndpoint=ov(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=A0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:N0}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ii.connecting:return Dr.Connecting;case Ii.open:return Dr.Open;case Ii.closing:return Dr.Closing;default:return Dr.Closed}}isConnected(){return this.connectionState()===Dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new mc(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(L0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ls.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:s,ref:o}=r,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ct.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([q0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:$0};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ct.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new iv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ls.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,s,o,a,l,u,c;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Yl,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ls.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:La,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>H0[d-1]||K0,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(d,f)=>f(JSON.stringify(d)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class J0 extends yc{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class eu extends yc{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const wc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Q0=()=>Response,tu=t=>{if(Array.isArray(t))return t.map(r=>tu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=tu(n)}),e},Y0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ua=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},X0=(t,e,r)=>b(void 0,void 0,void 0,function*(){const n=yield Q0();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new J0(Ua(i),s,o))}).catch(i=>{e(new eu(Ua(i),i))}):e(new eu(Ua(t),t))}),Z0=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(Y0(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function ls(t,e,r,n,i,s){return b(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,Z0(e,n,i,s)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>X0(l,a,n))})})}function Xi(t,e,r,n){return b(this,void 0,void 0,function*(){return ls(t,"GET",e,r,n)})}function Tt(t,e,r,n,i){return b(this,void 0,void 0,function*(){return ls(t,"POST",e,n,i,r)})}function ru(t,e,r,n,i){return b(this,void 0,void 0,function*(){return ls(t,"PUT",e,n,i,r)})}function e_(t,e,r,n){return b(this,void 0,void 0,function*(){return ls(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function _c(t,e,r,n,i){return b(this,void 0,void 0,function*(){return ls(t,"DELETE",e,n,i,r)})}class t_{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return b(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}}var av;class r_{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[av]="BlobDownloadBuilder",this.promise=null}asStream(){return new t_(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return b(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}}av=Symbol.toStringTag;const n_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class i_{constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=wc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return b(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},gf),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(r),c=this._getFinalPath(u),d=yield(e=="PUT"?ru:Tt)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}upload(e,r,n){return b(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return b(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:gf.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield ru(this.fetch,a.toString(),l,{headers:c});return{data:{path:s,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ne(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return b(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const s=yield Tt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new yc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}update(e,r,n){return b(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return b(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}copy(e,r,n){return b(this,void 0,void 0,function*(){try{return{data:{path:(yield Tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return b(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Tt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return b(this,void 0,void 0,function*(){try{const i=yield Tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>Xi(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new r_(l,this.shouldThrowOnError)}info(e){return b(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Xi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:tu(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}exists(e){return b(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield e_(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n)&&n instanceof eu){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&i.push(s);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return b(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}list(e,r,n){return b(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},n_),r),{prefix:e||""});return{data:yield Tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}listV2(e,r){return b(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Tt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const lv="2.80.0",uv={"X-Client-Info":`storage-js/${lv}`};class s_{constructor(e,r={},n,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uv),r),this.fetch=wc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return b(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Xi(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}getBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield Xi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}createBucket(e){return b(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Tt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return b(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}emptyBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}deleteBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class o_{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uv),r),this.fetch=wc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield Tt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}listBuckets(e){return b(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Xi(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}deleteBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}}const bc={"X-Client-Info":`storage-js/${lv}`,"Content-Type":"application/json"};class cv extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function nt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Da extends cv{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class a_ extends cv{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var vf;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(vf||(vf={}));const Sc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),l_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),u_=(t,e,r)=>b(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Da(mf(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new Da(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new Da(a,i,o))}}else e(new a_(mf(t),t))}),c_=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(l_(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function d_(t,e,r,n,i,s){return b(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,c_(e,n,i,s)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>u_(l,a,n))})})}function it(t,e,r,n,i){return b(this,void 0,void 0,function*(){return d_(t,"POST",e,n,i,r)})}class f_{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bc),r),this.fetch=Sc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return b(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getIndex(e,r){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}listIndexes(e){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return b(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}})}}class h_{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bc),r),this.fetch=Sc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return b(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield it(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getVectors(e){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}listVectors(e){return b(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield it(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}queryVectors(e){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteVectors(e){return b(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield it(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}}class p_{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bc),r),this.fetch=Sc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return b(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}getBucket(e){return b(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}listBuckets(){return b(this,arguments,void 0,function*(e={}){try{return{data:yield it(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return b(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}})}}class g_ extends p_{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new v_(this.url,this.headers,e,this.fetch)}}class v_ extends f_{constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return b(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return b(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return b(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return b(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new m_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class m_ extends h_{constructor(e,r,n,i,s){super(e,r,s),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return b(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return b(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return b(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return b(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return b(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class y_ extends s_{constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new i_(this.url,this.headers,e,this.fetch)}get vectors(){return new g_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new o_(this.url+"/iceberg",this.headers,this.fetch)}}const w_="2.80.0";let yi="";typeof Deno<"u"?yi="deno":typeof document<"u"?yi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yi="react-native":yi="node";const __={"X-Client-Info":`supabase-js-${yi}/${w_}`},b_={headers:__},S_={schema:"public"},E_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},k_={},T_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),O_=()=>Headers,C_=(t,e,r)=>{const n=T_(r),i=O_();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:u}))}};function I_(t){return t.endsWith("/")?t:t+"/"}function P_(t,e){var r,n;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:d}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function x_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(I_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dv="2.80.0",fn=30*1e3,nu=3,Fa=nu*fn,R_="http://localhost:9999",A_="supabase.auth.token",j_={"X-Client-Info":`gotrue-js/${dv}`},iu="X-Supabase-Api-Version",fv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,N_=10*60*1e3;class Zi extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function $(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class L_ extends Zi{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function U_(t){return $(t)&&t.name==="AuthApiError"}class Fr extends Zi{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Cr extends Zi{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class St extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function D_(t){return $(t)&&t.name==="AuthSessionMissingError"}class an extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Us extends Cr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ds extends Cr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function F_(t){return $(t)&&t.name==="AuthImplicitGrantRedirectError"}class yf extends Cr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class su extends Cr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ba(t){return $(t)&&t.name==="AuthRetryableFetchError"}class wf extends Cr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ou extends Cr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Po="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_f=` 	
\r=`.split(""),B_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_f.length;e+=1)t[_f[e].charCodeAt(0)]=-2;for(let e=0;e<Po.length;e+=1)t[Po[e].charCodeAt(0)]=e;return t})();function bf(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Po[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Po[n]),e.queuedBits-=6}}function hv(t,e,r){const n=B_[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Sf(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{W_(o,n,r)};for(let o=0;o<t.length;o+=1)hv(t.charCodeAt(o),i,s);return e.join("")}function M_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function z_(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}M_(n,e)}}function W_(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function $n(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)hv(t.charCodeAt(i),r,n);return new Uint8Array(e)}function V_(t){const e=[];return z_(t,r=>e.push(r)),new Uint8Array(e)}function Hr(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>bf(i,r,n)),bf(null,r,n),e.join("")}function H_(t){return Math.round(Date.now()/1e3)+t}function K_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Le=()=>typeof window<"u"&&typeof document<"u",Ar={tested:!1,writable:!1},pv=()=>{if(!Le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ar.tested)return Ar.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ar.tested=!0,Ar.writable=!0}catch{Ar.tested=!0,Ar.writable=!1}return Ar.writable};function q_(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const gv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),G_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",hn=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},jr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ir=async(t,e)=>{await t.removeItem(e)};class Zo{constructor(){this.promise=new Zo.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Zo.promiseConstructor=Promise;function Ma(t){const e=t.split(".");if(e.length!==3)throw new ou("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!$_.test(e[n]))throw new ou("JWT not in base64url format");return{header:JSON.parse(Sf(e[0])),payload:JSON.parse(Sf(e[1])),signature:$n(e[2]),raw:{header:e[0],payload:e[1]}}}async function J_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Q_(t,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Y_(t){return("0"+t.toString(16)).substr(-2)}function X_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let s=0;s<56;s++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Y_).join("")}async function Z_(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function eb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Z_(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ln(t,e,r=!1){const n=X_();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await hn(t,`${e}-code-verifier`,i);const s=await eb(n);return[s,n===s?"plain":"s256"]}const tb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rb(t){const e=t.headers.get(iu);if(!e||!e.match(tb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ib(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function un(t){if(!sb.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function za(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ob(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function Ef(t){return JSON.parse(JSON.stringify(t))}const Ur=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ab=[502,503,504];async function kf(t){var e;if(!G_(t))throw new su(Ur(t),0);if(ab.includes(t.status))throw new su(Ur(t),t.status);let r;try{r=await t.json()}catch(s){throw new Fr(Ur(s),s)}let n;const i=rb(t);if(i&&i.getTime()>=fv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new wf(Ur(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new St}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new wf(Ur(r),t.status,r.weak_password.reasons);throw new L_(Ur(r),t.status||500,n)}const lb=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function N(t,e,r,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[iu]||(s[iu]=fv["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ub(t,e,r+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function ub(t,e,r,n,i,s){const o=lb(e,n,i,s);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new su(Ur(l),0)}if(a.ok||await kf(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await kf(l)}}function Et(t){var e;let r=null;fb(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=H_(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Tf(t){const e=Et(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ur(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function cb(t){return{data:t,error:null}}function db(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=t,o=Qn(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Of(t){return t}function fb(t){return t.access_token&&t.refresh_token&&t.expires_in}const Wa=["global","local","others"];class hb{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=gv(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Wa[0]){if(Wa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wa.join(", ")}`);try{return await N(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await N(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ur})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Qn(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await N(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:db,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if($(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await N(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ur})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await N(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Of});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if($(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){un(e);try{return await N(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ur})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){un(e);try{return await N(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ur})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){un(e);try{return await N(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ur})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){un(e.userId);try{const{data:r,error:n}=await N(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if($(r))return{data:null,error:r};throw r}}async _deleteFactor(e){un(e.userId),un(e.id);try{return{data:await N(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await N(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Of});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if($(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await N(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await N(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await N(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await N(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await N(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}}function Cf(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const cn={debug:!!(globalThis&&pv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pb extends vv{}async function gb(t,e,r){cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),cn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw cn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new pb(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(cn.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function vb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function mb(t){return parseInt(t,16)}function yb(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function wb(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=mv(t.address),m=c?`${c}://${n}`:n,y=t.statement?`${t.statement}
`:"",w=`${m} wants you to sign in with your Ethereum account:
${p}

${y}`;let g=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),u){let h=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);h+=`
- ${v}`}g+=h}return`${w}
${g}`}class ge extends Error{constructor({message:e,code:r,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class xo extends ge{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function _b({error:t,options:e}){var r,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ge({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(yv(o)){if(s.rp.id!==o)return new ge({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function bb({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ge({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(yv(n)){if(r.rpId!==n)return new ge({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Sb{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Eb=new Sb;function kb(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Qn(t,["challenge","user","excludeCredentials"]),s=$n(e).buffer,o=Object.assign(Object.assign({},r),{id:$n(r.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:$n(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Tb(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Qn(t,["challenge","allowCredentials"]),i=$n(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:$n(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function Ob(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Hr(new Uint8Array(t.response.attestationObject)),clientDataJSON:Hr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Cb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Hr(new Uint8Array(i.authenticatorData)),clientDataJSON:Hr(new Uint8Array(i.clientDataJSON)),signature:Hr(new Uint8Array(i.signature)),userHandle:i.userHandle?Hr(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function If(){var t,e;return!!(Le()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Ib(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xo("Browser returned unexpected credential type",e)}:{data:null,error:new xo("Empty credential response",e)}}catch(e){return{data:null,error:_b({error:e,options:t})}}}async function Pb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xo("Browser returned unexpected credential type",e)}:{data:null,error:new xo("Empty credential response",e)}}catch(e){return{data:null,error:bb({error:e,options:t})}}}const xb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Rb={userVerification:"preferred",hints:["security-key"]};function Ro(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(r(o))n[s]=o;else if(e(o)){const a=n[s];e(a)?n[s]=Ro(a,o):n[s]=Ro(o)}else n[s]=o}return n}function Ab(t,e){return Ro(xb,t,e||{})}function jb(t,e){return Ro(Rb,t,e||{})}class $b{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:a};const l=i??Eb.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Ab(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:c,error:d}=await Ib({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=jb(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:c,error:d}=await Pb(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new Fr("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!r)return{data:null,error:new Zi("rpId is required for WebAuthn authentication")};try{if(!If())return{data:null,error:new Fr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new Fr("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!r)return{data:null,error:new Zi("rpId is required for WebAuthn registration")};try{if(!If())return{data:null,error:new Fr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new Fr("Unexpected error in register",o)}}}}vb();const Nb={url:R_,storageKey:A_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:j_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Pf(t,e,r){return await r()}const dn={};class es{get jwks(){var e,r;return(r=(e=dn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){dn[this.storageKey]=Object.assign(Object.assign({},dn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=dn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){dn[this.storageKey]=Object.assign(Object.assign({},dn[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Nb),e);if(this.storageKey=s.storageKey,this.instanceID=(r=es.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,es.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Le()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new hb({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=gv(s.fetch),this.lock=s.lock||Pf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Le()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=gb:this.lock=Pf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $b(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:pv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Cf(this.memoryStorage)),Le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${dv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Le()&&(r=q_(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Le()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),F_(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return $(r)?this._returnResult({error:r}):this._returnResult({error:new Fr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Et}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if($(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,n,i;try{let s;if("email"in e){const{email:c,password:d,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await ln(this.storage,this.storageKey)),s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Et})}else if("phone"in e){const{phone:c,password:d,options:f}=e;s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Et})}else throw new Us("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if($(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:a}=e;r=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Tf})}else if("phone"in e){const{phone:s,password:o,options:a}=e;r=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Tf})}else throw new Us("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new an;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,s,o,a,l,u,c,d,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:y,wallet:w,statement:g,options:h}=e;let v;if(Le())if(typeof w=="object")v=w;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")v=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=w}const _=new URL((r=h==null?void 0:h.url)!==null&&r!==void 0?r:window.location.href),k=await v.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=mv(k[0]);let T=(n=h==null?void 0:h.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!T){const I=await v.request({method:"eth_chainId"});T=mb(I)}const P={domain:_.host,address:E,statement:g,uri:_.href,version:"1",chainId:T,nonce:(i=h==null?void 0:h.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=h==null?void 0:h.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=h==null?void 0:h.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=h==null?void 0:h.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=h==null?void 0:h.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=h==null?void 0:h.signInWithEthereum)===null||c===void 0?void 0:c.resources};p=wb(P),m=await v.request({method:"personal_sign",params:[yb(p),E]})}try{const{data:y,error:w}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Et});if(w)throw w;if(!y||!y.session||!y.user){const g=new an;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if($(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,n,i,s,o,a,l,u,c,d,f,p;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:w,wallet:g,statement:h,options:v}=e;let _;if(Le())if(typeof g=="object")_=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const k=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),h?{statement:h}:null));let T;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")T=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)T=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),y=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(c=v==null?void 0:v.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(m),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=E}}try{const{data:w,error:g}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Hr(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Et});if(g)throw g;if(!w||!w.session||!w.user){const h=new an;return this._returnResult({data:{user:null,session:null},error:h})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:g})}catch(w){if($(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const r=await jr(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:s,error:o}=await N(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Et});if(await ir(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new an;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if($(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:s,nonce:o}=e,a=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Et}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new an;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await ln(this.storage,this.storageKey));const{error:d}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Us("You must provide either an email or phone number.")}catch(a){if($(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let i,s;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await N(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Et});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if($(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i;try{let s=null,o=null;this.flowType==="pkce"&&([s,o]=await ln(this.storage,this.storageKey));const a=await N(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:cb});return this._returnResult(a)}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new St;const{error:i}=await N(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if($(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await N(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await N(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Us("You must provide either an email or phone number and a type")}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await jr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Fa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await jr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=za()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=ob(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ur}):await this._useSession(async r=>{var n,i,s;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new St}:await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:ur})})}catch(r){if($(r))return D_(r)&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new St;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ln(this.storage,this.storageKey));const{data:u,error:c}=await N(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ur});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if($(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new St;const r=Date.now()/1e3;let n=r,i=!0,s=null;const{payload:o}=Ma(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if($(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new St;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Le())throw new Ds("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ds(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new yf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ds("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yf("No code detected.");const{data:h,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:h.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Ds("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const p=f-c;p*1e3<=fn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=f-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,c);const{data:y,error:w}=await this._getUser(s);if(w)throw w;const g={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(n){if($(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await jr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({error:s});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(U_(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=K_(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await ln(this.storage,this.storageKey,!0));try{return await N(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:d,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await N(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Le()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if($(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:s}}=r;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,d=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Et}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new an}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if($(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)throw o;return await N(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Q_(async i=>(i>0&&await J_(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await N(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Et})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Ba(s)&&Date.now()+o-n<fn})}catch(n){if(this._debug(r,"error",n),$(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Le()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await jr(this.storage,this.storageKey);if(i&&this.userStorage){let o=await jr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await hn(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:za()}else if(i&&!i.user&&!i.user){const o=await jr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await ir(this.storage,this.storageKey+"-user"),await hn(this.storage,this.storageKey,i)):i.user=za()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Fa;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Fa}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Ba(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new St;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Zo;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new St;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),$(s)){const o={data:null,error:s};return Ba(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await hn(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const s=Ef(i);await hn(this.storage,this.storageKey,s)}else{const i=Ef(r);await hn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ir(this.storage,this.storageKey),await ir(this.storage,this.storageKey+"-code-verifier"),await ir(this.storage,this.storageKey+"-user"),this.userStorage&&await ir(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/fn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${fn}ms, refresh threshold is ${nu} ticks`),i<=nu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof vv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await ln(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):await N(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await N(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Ob(e.webauthn.credential_response):Cb(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:kb(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Tb(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Ma(n.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await N(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new St})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new St});const o=await N(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Le()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new St});const o=await N(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Le()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+N_>i)return n;const{data:s,error:o}=await N(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});n=p.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Ma(n);r!=null&&r.allowExpired||nb(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:s,header:i,signature:o},error:null}}const c=ib(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,V_(`${a}.${l}`)))throw new ou("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}}es.nextInstanceID={};const Lb=es;class Ub extends Lb{constructor(e){super(e)}}class Db{constructor(e,r,n){var i,s,o;this.supabaseUrl=e,this.supabaseKey=r;const a=x_(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:S_,realtime:k_,auth:Object.assign(Object.assign({},E_),{storageKey:l}),global:b_},c=P_(n??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=C_(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new R0(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new y_(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new I0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:u,throwOnError:c},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ub({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:s,flowType:a,lock:l,debug:u,throwOnError:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new G0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Fb=(t,e,r)=>new Db(t,e,r);function Bb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Bb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Ie=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},Me={searchParams:"URLSearchParams"in Ie,iterable:"Symbol"in Ie&&"iterator"in Symbol,blob:"FileReader"in Ie&&"Blob"in Ie&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Ie,arrayBuffer:"ArrayBuffer"in Ie};function Mb(t){return t&&DataView.prototype.isPrototypeOf(t)}if(Me.arrayBuffer)var zb=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Wb=ArrayBuffer.isView||function(t){return t&&zb.indexOf(Object.prototype.toString.call(t))>-1};function Zn(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function Ec(t){return typeof t!="string"&&(t=String(t)),t}function kc(t){var e={next:function(){var r=t.shift();return{done:r===void 0,value:r}}};return Me.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Se(t){this.map={},t instanceof Se?t.forEach(function(e,r){this.append(r,e)},this):Array.isArray(t)?t.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}Se.prototype.append=function(t,e){t=Zn(t),e=Ec(e);var r=this.map[t];this.map[t]=r?r+", "+e:e};Se.prototype.delete=function(t){delete this.map[Zn(t)]};Se.prototype.get=function(t){return t=Zn(t),this.has(t)?this.map[t]:null};Se.prototype.has=function(t){return this.map.hasOwnProperty(Zn(t))};Se.prototype.set=function(t,e){this.map[Zn(t)]=Ec(e)};Se.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)};Se.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),kc(t)};Se.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),kc(t)};Se.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),kc(t)};Me.iterable&&(Se.prototype[Symbol.iterator]=Se.prototype.entries);function Va(t){if(!t._noBody){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}}function wv(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function Vb(t){var e=new FileReader,r=wv(e);return e.readAsArrayBuffer(t),r}function Hb(t){var e=new FileReader,r=wv(e),n=/charset=([A-Za-z0-9_-]+)/.exec(t.type),i=n?n[1]:"utf-8";return e.readAsText(t,i),r}function Kb(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function xf(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _v(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:Me.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:Me.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:Me.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():Me.arrayBuffer&&Me.blob&&Mb(t)?(this._bodyArrayBuffer=xf(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Me.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||Wb(t))?this._bodyArrayBuffer=xf(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Me.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Me.blob&&(this.blob=function(){var t=Va(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=Va(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(Me.blob)return this.blob().then(Vb);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var t=Va(this);if(t)return t;if(this._bodyBlob)return Hb(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Kb(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Me.formData&&(this.formData=function(){return this.text().then(Jb)}),this.json=function(){return this.text().then(JSON.parse)},this}var qb=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Gb(t){var e=t.toUpperCase();return qb.indexOf(e)>-1?e:t}function en(t,e){if(!(this instanceof en))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var r=e.body;if(t instanceof en){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Se(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!r&&t._bodyInit!=null&&(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Se(e.headers)),this.method=Gb(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in Ie){var s=new AbortController;return s.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+new Date().getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}en.prototype.clone=function(){return new en(this,{body:this._bodyInit})};function Jb(t){var e=new FormData;return t.trim().split("&").forEach(function(r){if(r){var n=r.split("="),i=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(s))}}),e}function Qb(t){var e=new Se,r=t.replace(/\r?\n[\t ]+/g," ");return r.split("\r").map(function(n){return n.indexOf(`
`)===0?n.substr(1,n.length):n}).forEach(function(n){var i=n.split(":"),s=i.shift().trim();if(s){var o=i.join(":").trim();try{e.append(s,o)}catch(a){console.warn("Response "+a.message)}}}),e}_v.call(en.prototype);function Bt(t,e){if(!(this instanceof Bt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Se(e.headers),this.url=e.url||"",this._initBody(t)}_v.call(Bt.prototype);Bt.prototype.clone=function(){return new Bt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Se(this.headers),url:this.url})};Bt.error=function(){var t=new Bt(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var Yb=[301,302,303,307,308];Bt.redirect=function(t,e){if(Yb.indexOf(e)===-1)throw new RangeError("Invalid status code");return new Bt(null,{status:e,headers:{location:t}})};var Br=Ie.DOMException;try{new Br}catch{Br=function(e,r){this.message=e,this.name=r;var n=Error(e);this.stack=n.stack},Br.prototype=Object.create(Error.prototype),Br.prototype.constructor=Br}function bv(t,e){return new Promise(function(r,n){var i=new en(t,e);if(i.signal&&i.signal.aborted)return n(new Br("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var u={statusText:s.statusText,headers:Qb(s.getAllResponseHeaders()||"")};i.url.indexOf("file://")===0&&(s.status<200||s.status>599)?u.status=200:u.status=s.status,u.url="responseURL"in s?s.responseURL:u.headers.get("X-Request-URL");var c="response"in s?s.response:s.responseText;setTimeout(function(){r(new Bt(c,u))},0)},s.onerror=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){n(new TypeError("Network request timed out"))},0)},s.onabort=function(){setTimeout(function(){n(new Br("Aborted","AbortError"))},0)};function a(u){try{return u===""&&Ie.location.href?Ie.location.href:u}catch{return u}}if(s.open(i.method,a(i.url),!0),i.credentials==="include"?s.withCredentials=!0:i.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(Me.blob?s.responseType="blob":Me.arrayBuffer&&(s.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Se||Ie.Headers&&e.headers instanceof Ie.Headers)){var l=[];Object.getOwnPropertyNames(e.headers).forEach(function(u){l.push(Zn(u)),s.setRequestHeader(u,Ec(e.headers[u]))}),i.headers.forEach(function(u,c){l.indexOf(c)===-1&&s.setRequestHeader(c,u)})}else i.headers.forEach(function(u,c){s.setRequestHeader(c,u)});i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){s.readyState===4&&i.signal.removeEventListener("abort",o)}),s.send(typeof i._bodyInit>"u"?null:i._bodyInit)})}bv.polyfill=!0;Ie.fetch||(Ie.fetch=bv,Ie.Headers=Se,Ie.Request=en,Ie.Response=Bt);var Mr;(function(t){t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR"})(Mr||(Mr={}));var Xb=function(){function t(e){e===void 0&&(e=Mr.INFO),this.logLevel=e,this._debug=console.debug,this._info=console.info,this._warn=console.warn,this._error=console.error}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<=Mr.DEBUG&&(e.unshift("[DEBUG]"),this._debug.apply(this,se([],F(e),!1)))},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<=Mr.INFO&&(e.unshift("[INFO]"),this._info.apply(this,se([],F(e),!1)))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<=Mr.WARN&&(e.unshift("[WARN]"),this._warn.apply(this,se([],F(e),!1)))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<=Mr.ERROR&&(e.unshift("[ERROR]"),this._error.apply(this,se([],F(e),!1)))},t}(),z=new Xb(3),Zb=function(t,e){this._driver=t,this.liff=e,this.hooks=this._driver.hooks,this.internalHooks=this._driver.internalHooks},eS=function(t,e){this._driver=t,this.liff=e,this.hooks=this._driver.hooks},tS=function(){function t(e,r){this.pluginCtx=new eS(e,r),this.moduleCtx=new Zb(e,r)}return Object.defineProperty(t.prototype,"pluginContext",{get:function(){return this.pluginCtx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moduleContext",{get:function(){return this.moduleCtx},enumerable:!1,configurable:!0}),t}(),rS=function(){function t(){this.modules=new Map,this.hooks={},this.internalHooks={}}return t.prototype.addModule=function(e,r){this.modules.set(e,r),r.hooks&&(this.hooks[e]=Object.entries(r.hooks).reduce(function(n,i){var s,o=F(i,2),a=o[0],l=o[1];return J(J({},n),((s={})[a]=l.on.bind(l),s))},{})),"internalHooks"in r&&r.internalHooks&&(this.internalHooks[e]=Object.entries(r.internalHooks).reduce(function(n,i){var s,o=F(i,2),a=o[0],l=o[1];return J(J({},n),((s={})[a]=l.on.bind(l),s))},{}))},t.prototype.hasModule=function(e){return this.modules.has(e)},t}(),B=function(){},Rf=function(t){return t instanceof B},Sv=function(t){function e(r,n,i){var s=t.call(this)||this;return s.driver=r,s.contextHolder=n,s.option=i,s}return U(e,t),e.prototype.install=function(){return this.factory(this.driver,this.contextHolder)},Object.defineProperty(e.prototype,"name",{get:function(){return"use"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOption",{get:function(){return{namespacePrefix:"$"}},enumerable:!1,configurable:!0}),e.prototype.factory=function(r,n){var i=Object.assign({},this.defaultOption,this.option).namespacePrefix;return function(s,o){if(!s||typeof s.install!="function"||typeof s.name!="string")return z.warn("To install the plugin, you need to define the `name` property and the `install` method."),this;var a=Rf(s)?s.name:"".concat(i).concat(s.name);if(r.hasModule(a))return this;var l=Rf(s)?s.install.call(s,n.moduleContext,o):s.install.call(s,n.pluginContext,o);return this["".concat(a)]?(z.warn("There is a duplicate plugin name. `".concat(a,"` plugin namespace will be override.")),this["".concat(a)]=l):l!==void 0&&(this["".concat(a)]=l),r.addModule(a,s),this}},e}(B),Ev,nS=new Promise(function(t){Ev=t}),Pe="UNKNOWN",_e="UNAUTHORIZED",re="INVALID_ARGUMENT",pe="INIT_FAILED",K="FORBIDDEN",Mt="INVALID_CONFIG",$r="INVALID_ID_TOKEN",au="CREATE_SUBWINDOW_FAILED",lu="EXCEPTION_IN_SUBWINDOW",kv="liffEvent",At="LIFF_STORE",Ao="https://liff.".concat("line.me","/"),uu="https://miniapp.".concat("line.me","/"),V={ACCESS_TOKEN:"accessToken",ID_TOKEN:"IDToken",DECODED_ID_TOKEN:"decodedIDToken",FEATURE_TOKEN:"featureToken",LOGIN_TMP:"loginTmp",CONFIG:"config",CONTEXT:"context",EXPIRES:"expires",RAW_CONTEXT:"rawContext",CLIENT_ID:"clientId",IS_SUBSEQUENT_LIFF_APP:"isSubsequentLiffApp",MST_CHALLENGE:"mstChallenge",MSIT:"msit",MST:"mst",MST_VERIFIER:"mstVerifier",APP_DATA:"appData"},Af="isInClient",Tc=["context_token","feature_token","access_token","id_token","client_id","mst_verifier","mst_challenge","msit"],iS=5,sS=["liff.ref.source","liff.ref.medium","liff.ref.campaign","liff.ref.term","liff.ref.content"],oS="liff://subwindow",G={INIT:"init",SUBMIT:"submit",CANCEL:"cancel",CLOSE:"close",ERROR:"error"},aS=100,Tv=100,Ov="liff.subwindow",jo="healthCheck",lS=["profile","chat_message.write","openid","email"];function jf(t){return window.atob(t.replace(/-/g,"+").replace(/_/g,"/"))}var Ha={decode:jf,encode:function(t){return window.btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decodeUnicode:function(t){var e=jf(t).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join("");return decodeURIComponent(e)}};function yt(t,e){if(t===e)return 0;for(var r=t.split("."),n=e.split("."),i=Math.max(r.length,n.length),s=0;s<i;s++){r[s]||(r[s]="0"),n[s]||(n[s]="0");var o=parseInt(r[s])-parseInt(n[s]);if(o!==0)return o>0?1:-1}return 0}function $f(t){var e=t.replace("#","").match(/.{2}/g)||[];if(e.length!==4)return z.warn("convertArgbToRgba: Received invalid ARGB color"),"";var r=function(o){var a=Kr(o);return Math.round(a/255*100)/100}(e[0]),n=Kr(e[1]),i=Kr(e[2]),s=Kr(e[3]);return"rgba(".concat(n,", ").concat(i,", ").concat(s,", ").concat(r,")")}function Kr(t){return parseInt(t,16)}function Nf(t){var e=t.replace("#","").match(/.{2}/g)||[];if(e.length!==3)return z.warn("convertArgbToRgba: Received invalid hex color"),"";var r=Kr(e[0]),n=Kr(e[1]),i=Kr(e[2]);return"".concat(r,", ").concat(n,", ").concat(i)}function Lf(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),i=0;i<e;i++)n[i]=t.charCodeAt(i);return r}var Oc={get:function(t){var e=new RegExp("(?:(?:^|.*;\\s*)".concat(t,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return document.cookie.replace(e,"$1")},set:function(t,e,r){var n=t+"="+e;if(r)for(var i in r){var s=r[i]?"=".concat(r[i]):"";n+="; ".concat(i).concat(s)}z.debug("set cookie",n),document.cookie=n},remove:function(t,e){var r="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 GMT");if(e)for(var n in e)r+="; ".concat(n,"=").concat(e[n]);document.cookie=r}},uS=new Set(["400","401","403","404","429","500"]),Cv=function(t){function e(r,n,i){var s=t.call(this,n,i)||this;return s.code=r,s}return U(e,t),e}(Error);function S(t,e,r){return r!=null&&r.cause&&console.error("This is the cause of LiffError described below.",r.cause),new Cv(t,e||"",r||{})}function Cc(t){var e=t.match(/([^-]+)-[^-]+/);return e&&e[1]}function cS(t){var e="";return t.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").forEach(function(r){e+=String.fromCharCode(parseInt(r))}),window.btoa(e)}var Iv=function(){function t(){this.map={}}return t.prototype.clear=function(){this.map={}},t.prototype.getItem=function(e){var r=this.map[e];return r===void 0?null:r},t.prototype.setItem=function(e,r){this.map[e]=r},t.prototype.removeItem=function(e){delete this.map[e]},t.prototype.key=function(e){var r=Object.keys(this.map)[e];return r===void 0?null:r},Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.map).length},enumerable:!1,configurable:!0}),t}(),Ka,De={parse:function(t){return t.replace(/^\?/,"").replace(/^#\/?/,"").split(/&+/).filter(function(e){return e.length>0}).reduce(function(e,r){var n=F(r.split("=").map(decodeURIComponent),2),i=n[0],s=n[1],o=e[i];return Array.isArray(o)?o.push(s):Object.prototype.hasOwnProperty.call(e,i)?e[i]=[o,s]:e[i]=s,e},{})},stringify:function(t){return Object.keys(t).map(function(e){var r=t[e],n=function(i){return i!==void 0?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(i)):encodeURIComponent(e)};return Array.isArray(r)?r.map(function(i){return n(i)}).join("&"):n(r)}).join("&")}},Uf="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function dS(){return window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296}function Hn(t){for(var e="",r=0;r<t;r++)e+=Uf[Math.floor(dS()*Uf.length)];return e}function Pv(t){var e=new URL(t),r=e.hash.slice(1).split("&").filter(function(n){return!Tc.some(function(i){return n.startsWith("".concat(i,"="))})}).join("&");return e.hash=r,e.toString()}function fS(t){var e=new URL(t);return e.toString().replace(new RegExp(String.raw(Df||(Df=pc(["^",""],["^",""])),e.origin)),"")}var hS=function(t){var e=Pv(t);if(e!==t){var r=fS(e);window.history.replaceState(history.state,"",r)}};function ts(t,e){if(!t)throw new Error("addParamsToUrl: invalid URL");var r=new URL(t);return Object.entries(e).forEach(function(n){var i=F(n,2),s=i[0],o=i[1];r.searchParams.set(s,o)}),r.toString()}var Df,Ff=((Ka={})[Ao]=function(){var t=Bf(Ao);return new RegExp("^".concat(t,"(\\d+-\\w+)"))},Ka[uu]=function(){var t=Bf(uu);return new RegExp("^".concat(t,"((\\d+-\\w+)|(\\w+$))"))},Ka);function Ic(t){for(var e in Ff){var r=t.match(Ff[e]());if(r)return r[1]}return null}function Bf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pS(t){var e=t.match(/^(https?:\/\/.*?)\//);return e&&e[1]||""}function cu(t){return t.startsWith("line:")}function Pc(t){return t===void 0&&(t=window.navigator.userAgent),/ipad/.test(t.toLowerCase())}function xv(t){return t===void 0&&(t=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+/.test(t)}function Rv(t){return t===void 0&&(t=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+ LIFF/.test(t)}function gS(t){return t===void 0&&(t=window.navigator.userAgent),/LIFF\/SubWindow/.test(t)}var Av=function(){return typeof window>"u"},Fs=null;function H(){return Fs===null&&(Fs=Rv()||xv()&&/[#|&]access_token=/.test(location.hash)||sessionStorage.getItem("".concat(At,":").concat(Af))==="1",sessionStorage.setItem("".concat(At,":").concat(Af),Fs?"1":"0")),!!Fs}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isInClient"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return H()}},e})(B);function ce(){var t;return(t=window.__liffConfig)!==null&&t!==void 0?t:{}}function vS(t){window.__liffConfig=t}function mS(t,e){if(!e)throw S(Mt,"liffId is necessary for liff.init()");var r=(H()?sessionStorage:localStorage).getItem("".concat(At,":").concat(e,":").concat(t));try{return r===null?null:JSON.parse(r)}catch{return null}}function Ze(t){return mS(t,ce().liffId)}function ct(t,e){var r=ce().liffId;if(!r)throw S(Mt,"liffId is necessary for liff.init()");(H()?sessionStorage:localStorage).setItem("".concat(At,":").concat(r,":").concat(t),JSON.stringify(e))}function Oe(){return Ze(V.CONTEXT)}function xc(t){ct(V.CONTEXT,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getContext"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Oe()}},e})(B);function jv(){return((Oe()||{}).d||{}).aId}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAId"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return jv()}},e})(B);function $v(){return((Oe()||{}).d||{}).autoplay||!1}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getIsVideoAutoPlay"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return $v()}},e})(B);function Nv(){return(Oe()||{}).profilePlus}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getProfilePlus"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Nv()}},e})(B);function yS(){return!!Ze(V.IS_SUBSEQUENT_LIFF_APP)}function wS(t){ct(V.IS_SUBSEQUENT_LIFF_APP,t)}function _S(){return Ze(V.APP_DATA)}function du(t){ct(V.APP_DATA,t)}function bS(){return Ze(V.MST_VERIFIER)}function SS(t){ct(V.MST_VERIFIER,t)}function ES(){return Ze(V.MSIT)}function kS(t){ct(V.MSIT,t)}function ea(){return Ze(V.MST)}function TS(t){ct(V.MST,t)}function Lv(){return Ze(V.MST_CHALLENGE)}function OS(t){ct(V.MST_CHALLENGE,t)}function CS(){return Ze(V.CLIENT_ID)}function Uv(t){ct(V.CLIENT_ID,t)}function IS(){return Ze(V.RAW_CONTEXT)}function us(){return Ze(V.FEATURE_TOKEN)}function Mf(t){ct(V.FEATURE_TOKEN,t)}function ta(){return Ze(V.ID_TOKEN)}function Dv(t){ct(V.ID_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getIDToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return ta()}},e})(B);function zt(){return Ze(V.ACCESS_TOKEN)}function Rc(t){ct(V.ACCESS_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAccessToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return zt()}},e})(B);function Fv(t){var e=ce().liffId;if(!e)throw S(Mt,"liffId is necessary for liff.init()");(H()?sessionStorage:localStorage).removeItem("".concat(At,":").concat(e,":").concat(t))}function Bv(){return Ze(V.LOGIN_TMP)}function PS(t){ct(V.LOGIN_TMP,t)}function zf(){Fv(V.LOGIN_TMP)}function Mv(t){var e=ce();Oc.set("".concat(At,":").concat(V.EXPIRES,":").concat(e.liffId),t.getTime(),{expires:t.toUTCString(),path:"/",secure:null})}function xS(){var t=ce();return Oc.get("".concat(At,":").concat(V.EXPIRES,":").concat(t.liffId))}function RS(){var t=ce();Oc.remove("".concat(At,":").concat(V.EXPIRES,":").concat(t.liffId),{path:"/"})}function ra(){return Ze(V.DECODED_ID_TOKEN)}function zv(t){ct(V.DECODED_ID_TOKEN,t)}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getDecodedIDToken"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return ra()}},e})(B);function AS(){Object.keys(V).forEach(function(t){Fv(V[t])}),RS()}function xe(){return!!zt()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isLoggedIn"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return xe()}},e})(B);function na(){return"2.27.2"}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getVersion"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return"2.27.2"}},e})(B);var jS=function(){function t(){}return t.prototype.invoke=function(){return gS()},t}(),$S=function(){function t(e){this.storage=e}return Object.defineProperty(t,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),t.prototype.invoke=function(){return new URLSearchParams(window.location.search).has(Ov)&&this.setInSubWindow(!0),!(!this.getInSubWindow()&&!this.getSubWindowIdentifier())},t.prototype.getInSubWindow=function(){var e=this.storage.getItem("".concat(At,":").concat(this.getLiffId(),":").concat(t.IN_SUB_WINDOW_KEY));return e!==null&&JSON.parse(e)},t.prototype.getSubWindowIdentifier=function(){var e,r,n="liff.subwindow.identifier",i=new URLSearchParams(window.location.search);return i.get(n)||(e=n,(r=i.get("liff.state"))?new URLSearchParams(r).get(e):null)||null},t.prototype.setInSubWindow=function(e){this.storage.setItem("".concat(At,":").concat(this.getLiffId(),":").concat(t.IN_SUB_WINDOW_KEY),String(e))},t.prototype.getLiffId=function(){var e=ce().liffId;if(!e)throw S(Mt,"liffId is necessary for liff.init()");return e},t}(),NS=function(t){function e(){var r=t.call(this)||this;return Av()?r.impl={invoke:function(){return!1}}:H()?r.impl=new jS:r.impl=new $S(window.sessionStorage),r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.impl.invoke.bind(this.impl)},e}(B),Wv=new NS,Lt=Wv.install();function Wt(){var t=navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);return t?t[0].slice(5):null}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getLineVersion"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Wt()}},e})(B);var qa;function Fe(){if(!qa){var t=window.navigator.userAgent.toLowerCase();qa=/iphone|ipad|ipod/.test(t)?"ios":/android/.test(t)?"android":"web"}return qa}(function(t){function e(){return t.call(this)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getOS"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Fe()}},e})(B);function Vv(t){var e,r=Oe();return(e=r==null?void 0:r.availability)===null||e===void 0?void 0:e[t]}function ht(t,e,r){var n=Vv(t),i=r||t;if(!n)return{available:!1,error:{code:K,message:"".concat(i," is not allowed in this LIFF app")}};var s=n.minVer,o=n.unsupportedFromVer,a=!s||function(u,c){var d=Wt();return!!d&&!(c&&yt(d,c)>0)&&yt(d,u)>=0}(s,o),l=H();return l&&!a?{available:!1,error:{code:K,message:"".concat(i," is unavailable in this client version.")}}:n.permission?l&&a||e?{available:!0}:{available:!1,error:{code:K,message:"".concat(i," is not allowed in external browser")}}:{available:!1,error:{code:K,message:"".concat(i," is not allowed in this LIFF app")}}}var Wf=function(){return xe()?!Rv()&&xv()?{available:!1,error:{code:K,message:"Subwindow is not supported in this browser"}}:Lt()?{available:!1,error:{code:K,message:"this api can be only called in parent window"}}:ht("subwindowOpen",!0):{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}}},LS=["subwindowOpen","shareTargetPicker","multipleLiffTransition","scanCode","scanCodeV2","getAdvertisingId","addToHomeScreen","bluetoothLeFunction","skipChannelVerificationScreen","createShortcutOnHomeScreen","internalCreateShortcutOnHomeScreen","iap"],et={scanCode:function(){return ht("scanCode")},getAdvertisingId:function(){return ht("getAdvertisingId")},bluetoothLeFunction:function(){return ht("bluetoothLeFunction")},shareTargetPicker:function(){return Lt()?{available:!1,error:{code:K,message:"this api can be only called in parent window"}}:xe()?ht("shareTargetPicker",!0):{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}}},multipleLiffTransition:function(){var t=Vv("multipleLiffTransition");return t&&t.permission?H()?{available:!0}:{available:!1,error:{code:K,message:"multipleLiffTransition is available only in the LINE App browser"}}:{available:!1,error:{code:K,message:"multipleLiffTransition is not allowed in this LIFF app"}}},subwindowOpen:Wf,scanCodeV2:function(){if(!xe())return{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}};var t=Wf();return t.available?ht("scanCodeV2",!0):t},addToHomeScreen:function(){return Lt()?{available:!1,error:{code:K,message:"this api can be only called in parent window"}}:ht("addToHomeScreen")},skipChannelVerificationScreen:function(){var t=Oe();return t?t.type==="square_chat"?{available:!1,error:{code:K,message:"skipChannelVerificationScreen is not allowed in OpenChat"}}:ht("skipChannelVerificationScreen"):{available:!1,error:{code:K,message:"Context is not found"}}},createShortcutOnHomeScreen:function(){if(Lt())return{available:!1,error:{code:K,message:"this api can be only called in parent window"}};if(!xe())return{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}};var t=Fe();return t!=="android"&&t!=="ios"?{available:!1,error:{code:K,message:"this api can be only called in mobile device"}}:ht("addToHomeV2",!0,"createShortcutOnHomeScreen")},internalCreateShortcutOnHomeScreen:function(){if(Lt())return{available:!1,error:{code:K,message:"this api can be only called in parent window"}};if(!xe())return{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}};var t=Fe();if(t!=="android"&&t!=="ios")return{available:!1,error:{code:K,message:"this api can be only called in mobile device"}};var e=ht("addToHomeV2",!0,"internalCreateShortcutOnHomeScreen");return e.available?ht("addToHomeLineScheme",!0,"internalCreateShortcutOnHomeScreen"):e},iap:function(){return H()?xe()?Lt()?{available:!1,error:{code:K,message:"this api can be only called in parent window"}}:ht("iap",!1,"In-App Purchase"):{available:!1,error:{code:_e,message:"Need access_token for api call, Please login first"}}:{available:!1,error:{code:K,message:"In-App Purchase is not allowed in external browser"}}}},ft=function(t){return function(){var e=t();if(!e.available)throw S(e.error.code,e.error.message)}},Qt={scanCode:ft(et.scanCode),getAdvertisingId:ft(et.getAdvertisingId),bluetoothLeFunction:ft(et.bluetoothLeFunction),shareTargetPicker:ft(et.shareTargetPicker),multipleLiffTransition:ft(et.multipleLiffTransition),subwindowOpen:ft(et.subwindowOpen),scanCodeV2:ft(et.scanCodeV2),addToHomeScreen:ft(et.addToHomeScreen),skipChannelVerificationScreen:ft(et.skipChannelVerificationScreen),createShortcutOnHomeScreen:ft(et.createShortcutOnHomeScreen),internalCreateShortcutOnHomeScreen:ft(et.internalCreateShortcutOnHomeScreen),iap:ft(et.iap)};function cs(t){if(!function(r){return LS.some(function(n){return n===r})}(t))throw S(re,"Unexpected API name.");var e=et[t];return!e||e().available}(function(t){function e(){var r=t.apply(this,se([],F(arguments),!1))||this;return r.hooks={},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"isApiAvailable"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(r){return cs(r)}},e})(B);var US=function(){function t(){}return t.prototype.invoke=function(e){var r=Qt[e];return!!r&&(r(),!0)},t}(),DS=function(){function t(e){this.liff=e}return t.prototype.invoke=function(e){return this.liff.checkFeature(e)},t}(),Ga=function(){function t(e){yt(na(),t.SDK_VERSION_SUPPORTING_NEW)>=0?this.impl=new US:this.impl=new DS(e)}return Object.defineProperty(t,"SDK_VERSION_SUPPORTING_NEW",{get:function(){return"2.11.0"},enumerable:!1,configurable:!0}),t.prototype.invoke=function(e){return this.impl.invoke(e)},t}(),fu=function(t,e){return fu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},fu(t,e)};function FS(t,e,r,n){return new(r||(r=Promise))(function(i,s){function o(u){try{l(n.next(u))}catch(c){s(c)}}function a(u){try{l(n.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof r?c:new r(function(d){d(c)})).then(o,a)}l((n=n.apply(t,[])).next())})}function BS(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(d){c=[6,d],n=0}finally{r=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var Hv=!1,MS=function(){return Hv},zS=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=r}fu(r,n),r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"_legacyExtensionsEnabled"},enumerable:!1,configurable:!0}),e.prototype.install=function(){Hv=!0},e}(B);function WS(){var t;return Fe()==="ios"?(t=Wt())&&yt(t,"9.19.0")<0?"https://static.line-scdn.net/liff/edge/2/ios-918-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/ios-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/non-ios-extensions_2_22_0.js"}function VS(){return MS()?function(){return FS(this,void 0,void 0,function(){return BS(this,function(t){switch(t.label){case 0:return[3,2];case 1:return[2,t.sent().default];case 2:return[2,new Promise(function(e,r){var n=document.createElement("script"),i=WS();n.onload=function(){var s=window.liffClientExtension;s?e(s):r(S(pe,"Unable to load client features. (Extension is empty)"))},n.onerror=function(s){r(S(pe,"Unable to load client features.",{cause:s}))},n.src=i,n.type="text/javascript",document.body.appendChild(n)})]}})})}():Promise.resolve(void 0)}function Ac(){AS()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"logout"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Ac()}},e})(B);var HS=/([\x90\x9D\x81\x8D\x8F<"{|}>\\^`]|\n|.*#.*#|%(?![0-9A-Fa-f]{2})[^%]{0,2})/,Kv=function(t){if(HS.test(t))throw S(re,"invalid URL.");var e=new URL(t),r=e.username,n=e.password,i=e.hash,s=e.search;return{username:r,password:n,pathname:e.pathname,hash:i,origin:e.origin,search:s}},Vf=function(t){return t.substring(1).split("&").filter(function(e){return!/^liff\./.test(e)&&!!e})},KS=function(t,e){var r=t.substring(e.length);return r==="/"?"":(r.length>0&&r[0]!=="/"&&(r="/"+r),r)},Hf=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},qS=function(t,e){var r=function(n,i){for(var s=se([],F(n),!1),o=0;o<i.length;o++){var a=i[o],l=s.indexOf(a);l>-1&&s.splice(l,1)}return s}(function(n){var i,s,o=n.replace(/\+/g,"%2B"),a=new URLSearchParams(o),l=[];try{for(var u=tr(a.entries()),c=u.next();!c.done;c=u.next()){var d=F(c.value,2),f=d[0],p=d[1];l.push("".concat(Hf(f),"=").concat(Hf(p)))}}catch(y){i={error:y}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}if(l.length===0)return[""];var m=n.split("&");return l.map(function(y,w){return y.endsWith("=")&&!m[w].endsWith("=")?y.slice(0,-1):y})}(Vf(t).join("&")),Vf(e)).join("&");return r!==""?"?".concat(r):""},GS=function(t){var e=new RegExp("^".concat(Tc.join("|"))),r=t.substring(1).split("&").filter(function(n){return!e.test(n)&&!!n}).join("&");return r?"#".concat(r):""},qv=function(t,e){return e.indexOf(t)===0&&(t.endsWith("/")&&(t=t.substring(0,t.length-1)),e[t.length]===void 0||e[t.length]==="/")},jc=function(t,e){var r=Kv(t),n=new URL(e);if(r.username!==n.username||r.password!==n.password||n.origin!==r.origin||!qv(n.pathname,r.pathname))throw S(re,"invalid URL.")},JS=function(t){function e(){var r=t.apply(this,se([],F(arguments),!1))||this;return r.extraParams="",r.getAndValidateContext=function(){var n=Oe();if(!n)throw S(pe,"Could not get Context from server.");if(!n.endpointUrl)throw S(pe,"Could not get endpointUrl from server.");if(!n.permanentLinkPattern)throw S(pe,"Could not get permanentLinkPattern from server.");return n},r.createUrl=function(){var n=r.getAndValidateContext(),i=window.location,s=i.pathname,o=i.search,a=i.hash,l=i.origin,u=new URL(n.endpointUrl);if(u.origin!==l||!qv(u.pathname,s))throw S(Mt,"Current page is not under entrypoint.");var c=s.substring(u.pathname.length);c.length>0&&c[0]!=="/"&&(c="/"+c);var d=new RegExp("^".concat(Tc.join("|"))),f=a.substring(1).split("&").filter(function(E){return!d.test(E)&&!!E}).join("&"),p=f===u.hash.substring(1)?"":f,m=function(E){return E.substring(1).split("&").filter(function(T){return!/liff\.state/.test(T)&&!!T})},y=m(o),w=m(u.search);r.extraParams&&y.push(r.extraParams);for(var g=0;g<w.length;g++){var h=w[g],v=y.indexOf(h);v>-1&&y.splice(v,1)}var _=y.join("&"),k="".concat(c).concat(_!==""?"?".concat(_):"").concat(p?"#".concat(p):"");return"".concat(Ao).concat(ce().liffId).concat(k)},r.createUrlBy=function(n){return b(r,void 0,void 0,function(){var i,s,o,a,l,u;return C(this,function(c){if(!(i=ce().liffId))throw S(pe,"Should run after liff init.");return s=this.getAndValidateContext(),jc(n,s.endpointUrl),o=Kv(n),a=new URL(s.endpointUrl),l=s.miniDomainAllowed?uu:Ao,u=s.miniDomainAllowed&&s.miniAppId?s.miniAppId:i,[2,l.concat(u,KS(o.pathname,a.pathname),qS(o.search,a.search),GS(o.hash))]})})},r.setExtraQueryParam=function(n){r.extraParams=n},r.install=function(){return{createUrl:r.createUrl,createUrlBy:r.createUrlBy,setExtraQueryParam:r.setExtraQueryParam}},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"permanentLink"},enumerable:!1,configurable:!0}),e}(B),QS=new JS;function YS(t){return b(this,void 0,void 0,function(){var e,r,n;return C(this,function(i){switch(i.label){case 0:if(!t.ok)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.json()];case 2:return[2,i.sent()];case 3:return i.sent(),[2,t];case 4:return e=String(t.status),r=uS.has(e)?e:Pe,[4,t.json().catch(function(){throw S(r,t.statusText)})];case 5:throw n=i.sent(),S(n.error||r,n.error_description||n.message)}})})}function Gv(t){var e=function(r){if(r)return r;var n=zt();if(!n)throw S(_e,"Need access_token for api call, Please login first");return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(n)}}(t&&t.headers);return J(J({},t),{headers:e})}function me(t,e){var r;try{r=Gv(e)}catch(n){return Promise.reject(n)}return fetch(t,r).then(YS)}function XS(t,e){var r;try{r=Gv(e)}catch(n){return Promise.reject(n)}return fetch(t,r)}function fe(t){var e=t.subdomain,r=e===void 0?"api":e,n=t.pathname;return"https://".concat(r,".").concat("line.me","/").concat(n)}var ZS={token:fe({pathname:"oauth2/v2.1/token"}),certs:fe({pathname:"oauth2/v2.1/certs"}),"openid-configuration":fe({subdomain:"access",pathname:".well-known/openid-configuration"}),authorize:fe({subdomain:"access",pathname:"liff/v1/authorize"}),profile:fe({pathname:"v2/profile"}),message:fe({pathname:"message/v3/share"}),friendship:fe({pathname:"friendship/v1/status"}),shareTargetPicker:fe({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker"}),shareTargetPickerOtt:fe({pathname:"liff/v2/apps"}),shareTargetPickerResult:fe({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker/result"}),apps:fe({pathname:"liff/v2/apps"}),subWindowGetMSIT:fe({pathname:"liff/v2/sub/msit"}),subWindowGetMSTByMSIT:fe({pathname:"liff/v2/sub/mst"}),subWindowSubscribe:fe({subdomain:"liff",pathname:"liff/v2/sub/waitResult"}),subWindowPost:fe({pathname:"liff/v2/sub/result"}),subWindowGetAppData:fe({pathname:"liff/v2/sub/appData"}),subWindowGetOrigin:function(t){return fe({pathname:"liff/v2/sub/".concat(t,"/origin")})},accessTokenVerify:fe({pathname:"oauth2/v2.1/verify"}),unauthorizedPermissions:fe({subdomain:"liff",pathname:"liff/v2/incrementalAgreement/unauthorizedPermissions"}),permanentLink:fe({subdomain:"liff",pathname:"liff/v2/permanentLink"}),createShortcutOnHomeScreen:fe({subdomain:"liff-shortcut",pathname:"api/shortcut"})};function ue(t){return ZS[t]}function $c(t){return me("".concat(ue("accessTokenVerify"),"?access_token=").concat(encodeURIComponent(t)),{headers:{"Content-Type":"application/json",Accept:"application/json"}})}var Jv="liff.subwindow.identifier",hu="liff.subwindow.cryptokey",to=J(J({},G),{GET_DATA:"getData",SET_DATA:"setData",NOT_FOUND:"notFound",TEARDOWN:"teardown"}),$o={BROADCAST:"broadcast",COMMAND:"command"},Ri={MAIN:"main",SUB:"sub"},Qv=function(t){return b(void 0,void 0,void 0,function(){var e;return C(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey("jwk",{kty:"oct",k:t,alg:"A128GCM",ext:!0},{name:"AES-GCM"},!1,["encrypt","decrypt"])];case 1:return[2,r.sent()];case 2:throw e=r.sent(),S(Pe,e);case 3:return[2]}})})},eE=function(t,e,r){return b(void 0,void 0,void 0,function(){var n,i,s,o;return C(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n=new TextEncoder().encode(t),[4,Qv(e)];case 1:return i=a.sent(),[4,window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,new TextEncoder().encode(r))];case 2:return s=a.sent(),[2,btoa(new Uint8Array(s).reduce(function(l,u){return l+String.fromCharCode(u)},""))];case 3:throw o=a.sent(),S(Pe,o);case 4:return[2]}})})},tE=function(t,e,r){return b(void 0,void 0,void 0,function(){var n,i,s,o,a,l,u;return C(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),n=new TextEncoder().encode(t),[4,Qv(e)];case 1:for(i=c.sent(),s=atob(r),o=new Uint8Array(s.length),a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return[4,window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},i,o.buffer)];case 2:return l=c.sent(),[2,new TextDecoder().decode(new Uint8Array(l))];case 3:throw u=c.sent(),S(Pe,u);case 4:return[2]}})})},rE=function(t,e){return Ai(t)===Ai(e)},Ai=function(t){return"".concat(t.identifier,"-").concat(t.action,"-").concat(t.timestamp)},nE=function(t){return Object.keys(G).map(function(e){return G[e]}).includes(t)?$o.BROADCAST:$o.COMMAND};function iE(){var t=document.createElement("form");t.method="POST",t.action="$MESSAGE_HANDLER_URL";var e=document.createElement("input");e.type="hidden",e.name="identifier",e.value="$IDENTIFIER",t.appendChild(e),document.body.appendChild(t),t.submit()}var sE=function(t){t===void 0&&(t=Ri.MAIN);var e=this;this.identification={identifier:"",cryptoKey:""},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return b(e,void 0,void 0,function(){var r,n,i,s,o;return C(this,function(a){switch(a.label){case 0:return r=new URLSearchParams(window.location.search),n=function(l){var u=r.get("liff.state");return u?new URLSearchParams(u).get(l):null},i=this,o={identifier:this.windowType===Ri.MAIN?Hn(12):r.get("liff.subwindow.identifier")||n("liff.subwindow.identifier")||""},this.windowType!==Ri.MAIN?[3,2]:[4,b(void 0,void 0,void 0,function(){var l,u,c;return C(this,function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])];case 1:return l=d.sent(),[4,window.crypto.subtle.exportKey("jwk",l)];case 2:if(!(u=d.sent())||!u.k)throw S(Pe,"failed to generate key");return[2,u.k];case 3:throw c=d.sent(),S(Pe,c);case 4:return[2]}})})];case 1:return s=a.sent(),[3,3];case 2:s=r.get(hu)||n(hu)||"",a.label=3;case 3:return i.identification=(o.cryptoKey=s,o),[2]}})})},this.hasIdentification=function(){var r=e.identification,n=r.identifier,i=r.cryptoKey;return typeof n=="string"&&typeof i=="string"&&n.length>0&&i.length>0},this.isReady=function(){return e.hasIdentification()&&!!e.messageHandlerInstance},this.setup=function(){return b(e,void 0,void 0,function(){var r,n,i,s,o,a=this;return C(this,function(l){switch(l.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(l.sent(),!(r=this.identification.identifier))return[2];if(n=/^[a-zA-Z0-9]+$/gm,!r.match(n))throw S(Pe,"Invalid identifier");return(i=document.createElement("iframe")).style.display="none",i.src="about:blank",document.body.appendChild(i),(o=i==null?void 0:i.contentWindow)===null||o===void 0||o.window.eval("(".concat(iE.toString().replace("$MESSAGE_HANDLER_URL","".concat("https://liff-subwindow.line.me/liff/v2/sub/messageHandler")).replace("$IDENTIFIER",r.split("'")[0]),")()")),s="iframe-".concat(r,"-ready"),[4,new Promise(function(u){var c=function(d){d.data[s]&&(a.messageHandlerInstance=i,window.addEventListener("message",a.proxyToListeners),u(),document.removeEventListener("message",c))};window.addEventListener("message",c)})];case 2:return[2,l.sent()]}})})},this.teardown=function(){return b(e,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return this.isReady()?[4,this.send({eventName:to.TEARDOWN})]:[3,2];case 1:i.sent(),window.removeEventListener("message",this.proxyToListeners),this.listeners.clear(),(n=(r=this.messageHandlerInstance)===null||r===void 0?void 0:r.parentNode)===null||n===void 0||n.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,i.label=2;case 2:return[2]}})})},this.listen=function(r){e.listeners.set(r,r)},this.listenRepliedEvent=function(r,n){var i=function(s){s.replyTarget&&rE(s.replyTarget,r)&&(n(s),e.listeners.delete(i))};e.listeners.set(i,i)},this.send=function(r){return b(e,void 0,void 0,function(){var n,i,s,o,a=this;return C(this,function(l){switch(l.label){case 0:if(!this.isReady())throw S("message bus is not ready to send message");return i={action:nE(r.eventName),identifier:this.identification.identifier||"",timestamp:new Date().getTime()},[4,this.getEncryptedContext(r)];case 1:return i.context=l.sent(),n=i,(o=(s=this.messageHandlerInstance)===null||s===void 0?void 0:s.contentWindow)===null||o===void 0||o.postMessage({messageBusEvent:n},"*"),this.sentMessages.push(Ai(n)),[4,new Promise(function(u){a.listenRepliedEvent(n,function(c){u(c.context)})})];case 2:return[2,l.sent()]}})})},this.reply=function(r,n){return b(e,void 0,void 0,function(){var i,s,o,a;return C(this,function(l){switch(l.label){case 0:if(!this.isReady())throw S("message bus is not ready to send message");if(!r.identifier||!r.timestamp)throw S(Pe,"target message is not valid");return s={action:$o.BROADCAST},[4,this.getEncryptedContext(n)];case 1:return s.context=l.sent(),s.identifier=this.identification.identifier||"",s.timestamp=new Date().getTime(),s.replyTarget={action:r.action,identifier:r.identifier,timestamp:r.timestamp},i=s,(a=(o=this.messageHandlerInstance)===null||o===void 0?void 0:o.contentWindow)===null||a===void 0||a.postMessage({messageBusEvent:i},"*"),this.sentMessages.push(Ai(i)),[2]}})})},this.setData=function(r,n){r===void 0&&(r="appData"),e.send({eventName:to.SET_DATA,key:r,data:n})},this.getData=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return b(e,se([],F(r),!1),void 0,function(i){return i===void 0&&(i="appData"),C(this,function(s){switch(s.label){case 0:return[4,this.send({eventName:to.GET_DATA,key:i})];case 1:return[2,s.sent()]}})})},this.proxyToListeners=function(r){return b(e,void 0,void 0,function(){var n,i=this;return C(this,function(s){return n=r.data.messageBusEvent,r.origin!=="https://liff-subwindow.line.me"?[2]:n?(this.sentMessages.includes(Ai(n))||n.identifier!==this.identification.identifier||n.action!==$o.BROADCAST&&!n.replyTarget||this.listeners.forEach(function(o){return b(i,void 0,void 0,function(){var a,l,u;return C(this,function(c){switch(c.label){case 0:return a=o,l=[J({},n)],u={},[4,this.getDecryptedContext(n.context)];case 1:return a.apply(void 0,[J.apply(void 0,l.concat([(u.context=c.sent(),u)]))]),[2]}})})}),[2]):[2]})})},this.getEncryptedContext=function(r){return b(e,void 0,void 0,function(){var n,i,s,o,a,l,u;return C(this,function(c){switch(c.label){case 0:return n=this.identification,i=n.identifier,s=n.cryptoKey,a=(o=JSON).stringify,u={eventName:r.eventName,key:r.key?r.key:void 0},r.data?[4,eE(i,s,JSON.stringify(r.data))]:[3,2];case 1:return l=c.sent(),[3,3];case 2:l=void 0,c.label=3;case 3:return[2,a.apply(o,[(u.data=l,u)])]}})})},this.getDecryptedContext=function(r){return b(e,void 0,void 0,function(){var n,i,s,o,a,l,u,c;return C(this,function(d){switch(d.label){case 0:return n=this.identification,i=n.identifier,s=n.cryptoKey,(o=JSON.parse(r)).data&&typeof o.data=="string"?(c=(u=JSON).parse,[4,tE(i,s,o.data)]):[3,2];case 1:return l=c.apply(u,[d.sent()]),[3,3];case 2:l=void 0,d.label=3;case 3:return a=l,[2,J(J({},o),{data:a})]}})})},this.windowType=t};function oE(t){return new CustomEvent(kv,{detail:t})}(function(){if(typeof window<"u"&&typeof window.CustomEvent!="function"){let t=function(e,r){var n=r||{},i=n.bubbles,s=i!==void 0&&i,o=n.cancelable,a=o!==void 0&&o,l=n.detail,u=l===void 0?void 0:l,c=document.createEvent("CustomEvent");return c.initCustomEvent(e,s,a,u),c};t.prototype=Event.prototype,window.CustomEvent=t}})();var pn={},Kf=!1;function Nc(t,e){Kf||(Kf=!0,window.addEventListener(kv,function(r){r&&r.detail&&r.detail.type&&pn[r.detail.type]&&pn[r.detail.type].forEach(function(n){return n(r)})})),pn[t]?pn[t].push(e):pn[t]=[e]}function Lc(t,e){var r=pn[t];if(r&&Array.isArray(r)){var n=r.indexOf(e);n>=0&&r.splice(n,1)}}function aE(t){var e={};try{e=JSON.parse(t)}catch(n){throw S(re,n.message)}var r=oE(e);z.debug("[client dispatchEvent to js]",{type:r.type,detail:r.detail}),window.dispatchEvent(r)}function Yv(t,e,r){e===void 0&&(e={}),r===void 0&&(r="");var n=us();if(!n)throw S(K,"Invalid featureToken for client features");if(!window._liff||!window._liff.postMessage)throw S(re,"postMessage is not available from client");z.debug("[js postMessage to client]",t,r,e),window._liff.postMessage(t,n,r,JSON.stringify(e))}function ei(t,e,r){return e===void 0&&(e={}),r===void 0&&(r={once:!0}),us()?(r=J({callbackId:Hn(12),once:!0},r),new Promise(function(n,i){var s=function(o){if(o&&o.detail){var a=o.detail.callbackId===r.callbackId,l=typeof o.detail.callbackId!="string";(a||l)&&(r.once&&Lc(t,s),z.debug("[callback detail]",o.detail),o.detail.error?i(o.detail.error):o.detail.data?n(o.detail.data):i(o.detail))}i()};Nc(t,s),Yv(t,e,r.callbackId)})):Promise.reject(S(K,"Invalid featureToken for client features"))}function Nn(){var t=Wt();t!==null&&(Fe()==="ios"&&yt(t,"9.19")>=0||Fe()==="android"&&yt(t,"11.6.0")>=0)?location.href="liff://close":window._liff&&window._liff.postMessage?t!==null&&yt(t,"10.15.0")>=0?Fe()==="ios"?window._liff.postMessage("closeWindow",""):window._liff.postMessage("closeWindow","","",""):ei("closeWindow"):window.close()}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"closeWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Nn()}},e})(B);function Xv(t){var e=ue("subWindowGetOrigin");return me(e(t))}var br={};function Kn(t,e){t&&br[t]&&br[t].forEach(function(r){r(e)})}function Zv(t,e){br[t]||(br[t]=[]),br[t].push(e)}function em(t,e){if(br[t]){var r=br[t].indexOf(e);r>=0&&br[t].splice(r,1)}}var tm,rm,nm,im,pu,sm=function(){function t(e){this.storage=e}return t.prototype.getItem=function(e){return this.storage.getItem("".concat(this.getKeyPrefix(),":").concat(e))},t.prototype.setItem=function(e,r){this.storage.setItem("".concat(this.getKeyPrefix(),":").concat(e),r)},t.prototype.removeItem=function(e){this.storage.removeItem("".concat(this.getKeyPrefix(),":").concat(e))},t.prototype.clear=function(){this.storage.clear()},t.prototype.getKeyPrefix=function(){return"".concat(At,":").concat(this.getLiffId())},t.prototype.getLiffId=function(){var e=ce().liffId;if(!e)throw S(Mt,"liffId is necessary for liff.init()");return e},t}(),om=new sm(new Iv);function No(){var t=om.getItem("subWindowStatusUpdated");return t!==null&&JSON.parse(t)}function tn(t){om.setItem("subWindowStatusUpdated",String(t))}function gu(t){tm=t}function ji(){return tm}function vu(){return nm}function qf(){return im}function am(){return b(this,arguments,void 0,function(t){return t===void 0&&(t=Ri.MAIN),C(this,function(e){switch(e.label){case 0:return[4,(pu=new sE(t)).setup()];case 1:return e.sent(),[2,pu]}})})}function ti(){return pu}var lE=new Iv,lm=new sm(Av()?lE:window.sessionStorage);function uE(t){lm.setItem("mainWindowOrigin",t)}function um(){return lm.getItem("mainWindowOrigin")}function cm(t){return b(this,arguments,void 0,function(e,r){var n,i,s,o,a,l,u,c;return r===void 0&&(r={}),C(this,function(d){switch(d.label){case 0:if((n=ti())!=null&&n.isReady())return[3,5];if(i=JSON.stringify(r),s=ce().liffId,o=um(),!window.opener||!o||!s)throw S(lu);a=!1,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Xv(s)];case 2:return l=d.sent(),a=l.subwindowCommonModule,[3,4];case 3:throw u=d.sent(),z.debug(u),S(lu);case 4:return c=a?o:location.origin,[2,new Promise(function(f){window.addEventListener("message",function p(m){cE(m)&&(window.removeEventListener("message",p),f({status:e,result:i}))}),window.opener.postMessage({status:e,result:i},c)})];case 5:return n.send({eventName:e,data:r}),[4,new Promise(function(f){setTimeout(f,500)})];case 6:return d.sent(),[2,{status:e,result:JSON.stringify(r)}]}})})}function cE(t){return!(!t.data||typeof t.data.type!="string"||![G.SUBMIT,G.CANCEL].includes(t.data.type))}function Uc(t){var e,r=qf();if(t.origin===r){var n=t.data;if(n){var i,s=n.status,o=n.result;try{i=JSON.parse(o||"{}")}catch{i={}}switch(s){case jo:window.clearInterval(vu()),Dc();break;case G.CANCEL:case G.SUBMIT:tn(!0),window.clearInterval(vu()),window.removeEventListener("message",Uc),Kn(s,i),(e=ji())===null||e===void 0||e.postMessage({type:s},qf());break;default:z.debug("unexpected message")}}}}var dE=function(t){return b(void 0,void 0,void 0,function(){var e,r,n,i;return C(this,function(s){if(No())return[2];switch(e=t.context,r=e.eventName,n=e.data,i=ti(),r){case G.INIT:fm(!n.hasOpener);break;case G.CANCEL:case G.SUBMIT:tn(!0),Kn(r,n),i==null||i.reply(t,{eventName:r});break;case G.CLOSE:No()===!1&&(tn(!0),Kn(G.CLOSE,{})),Dc()}return[2]})})};function dm(){window.clearInterval(rm),window.clearInterval(vu()),window.removeEventListener("message",Uc)}function fm(t){if(t===void 0&&(t=!1),dm(),tn(!1),t){var e=ji();e&&(e.close(),gu(null))}}function Dc(){return b(this,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return(t=ti())?[4,t.teardown()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}function fE(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a,l,u,c,d,f;return C(this,function(p){switch(p.label){case 0:return(e=Ic(t.url))?(fm(!0),[4,Dc()]):[2,Promise.reject(S(re,"params.url must be liff url or mini url"))];case 1:return p.sent(),gu(Fe()!=="ios"||Pc()?window.open("","liffsubwindow","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):window.open()),r=t.url,n=t.appData,(i=new URL(r)).searchParams.append(Ov,"true"),[4,am()];case 2:return s=p.sent(),i.searchParams.append(Jv,s.identification.identifier),i.searchParams.append(hu,s.identification.cryptoKey),i.hostname=function(y){var w=F(y.split(".")),g=w[0],h=w.slice(1);return se(["".concat(g,"-ext")],F(h),!1).join(".")}(i.hostname),o=i.toString(),[4,Xv(e)];case 3:if(a=p.sent(),l=a.origin,u=a.subwindowCommonModule,!(c=ji()))throw S(au);if(!u)return c.close(),[2];(function(y){im=y})(l),s.listen(dE),s.setData("appData",n),window.addEventListener("message",Uc),p.label=4;case 4:return p.trys.push([4,6,,7]),[4,(f=t.onBeforeTransition)===null||f===void 0?void 0:f.call(t)];case 5:return p.sent(),[3,7];case 6:throw d=p.sent(),c.close(),d;case 7:return c.location.href=o,m=function(y,w){var g=ji(),h={type:jo};return w&&(h.message=JSON.stringify(w)),window.setInterval(function(){g==null||g.postMessage(h,y)},Tv)}(l,n),nm=m,function(y){rm=y}(window.setInterval(function(){var y=ji();y&&y.closed&&(dm(),gu(null),No()===!1&&(tn(!0),Kn(G.CLOSE,{})))},aS)),[2]}var m})})}var di=null;function hm(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a,l,u,c,d,f,p,m,y=this;return C(this,function(w){switch(w.label){case 0:if(e=t.msit,r=t.mstChallenge,n=t.reconnectCount,i=n===void 0?0:n,s=function(){return b(y,void 0,void 0,function(){return C(this,function(g){switch(g.label){case 0:return[4,(h=1e3,new Promise(function(v){return setTimeout(v,h)}))];case 1:return g.sent(),[4,hm({msit:e,mstChallenge:r,onSuccess:t.onSuccess,onError:t.onError,reconnectCount:i+1})];case 2:return g.sent(),[2]}var h})})},o=function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];di=null,t.onSuccess.apply(t,se([],F(g),!1))},a=function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];di=null,t.onError.apply(t,se([],F(g),!1))},l=Date.now(),di===null&&(di=l),u=l-di,i>=10||u>6e5)return a(S(Pe,"Failed to connect")),[2];w.label=1;case 1:return w.trys.push([1,3,,5]),[4,XS(ue("subWindowSubscribe"),{method:"POST",body:JSON.stringify({msit:e,mstChallenge:r})})];case 2:return c=w.sent(),[3,5];case 3:return w.sent(),[4,s()];case 4:return w.sent(),[2];case 5:return c.status>=500?[4,s()]:[3,7];case 6:return w.sent(),[3,17];case 7:return c.status>=400&&500>c.status?[4,Gf(c)]:[3,9];case 8:return f=w.sent(),d=f?S(re,f.errorDetail):S(Pe,"Some error happened in the server"),a(d),[3,17];case 9:return c.status!==200?[3,16]:[4,Gf(c)];case 10:if(!(f=w.sent()))return a(S(Pe,"Some error happened in the server")),[2];switch(p=f.status,m=f.result,p){case G.ERROR:return[3,11];case G.CLOSE:case G.CANCEL:case G.SUBMIT:return[3,13]}return[3,14];case 11:return[4,s()];case 12:return w.sent(),[3,15];case 13:return o(p,m),[3,15];case 14:a(S(Pe,"Some error happened in the server")),w.label=15;case 15:return[3,17];case 16:a(S(Pe,"Some error happened in the server")),w.label=17;case 17:return[2]}})})}function Gf(t){return b(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t.json()];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}})})}function hE(t){var e={};return Object.keys(t).forEach(function(r){r==="closeButtonColor"?t[r]==="white"?e[r]="#ffffff":e[r]="#000000":e[r]=t[r]}),e}var pE={height:"full",closeButtonPosition:"right",closeButtonColor:"black",closeButtonLabel:""};function gE(t){var e=t.appData,r=t.native,n=ce().liffId,i=Lv(),s=Ic(t.url);if(!n)return Promise.reject(S(_e,"liffId is invalid"));if(!i)return Promise.reject(S(_e,"mst_challenge is invalid"));if(!s)return Promise.reject(S(re,"params.url must be liff url or mini url"));var o=Object.assign({},pE,r);return function(a){var l=a.mainLiffId,u=a.subLiffId,c=a.mstChallenge,d=a.appData,f=a.view;return l&&c?me(ue("subWindowGetMSIT"),{method:"POST",body:JSON.stringify({mainLiffId:l,subLiffId:u,mstChallenge:c,appData:d,view:f})}):Promise.reject(S(re,"no proper argument"))}({mainLiffId:n,subLiffId:s,mstChallenge:i,appData:e,view:hE(o)}).then(function(a){var l=a.msit;return hm({msit:l,mstChallenge:i,onSuccess:function(u,c){Kn(u,c)},onError:function(u){Kn(G.ERROR,u)}}),l}).then(function(a){return function(l,u){return b(this,void 0,void 0,function(){var c,d,f;return C(this,function(p){switch(p.label){case 0:return c=l.url,(d=new URLSearchParams).set("msit",u),[4,(f=l.onBeforeTransition)===null||f===void 0?void 0:f.call(l)];case 1:return p.sent(),location.href="".concat(oS,"?url=").concat(encodeURIComponent(c),"&").concat(d.toString()),[2]}})})}(t,a)})}function pm(t){return Qt.subwindowOpen(),H()?gE(t):fE(t)}function Fc(t){if(!t.mst||!t.status)return Promise.reject(S(re,"no proper argument"));var e=JSON.stringify(t);return me(ue("subWindowPost"),{method:"POST",body:e})}function ia(){if(!Lt())throw S(_e,"this api can be only called in child window")}function gm(t){return t===void 0&&(t={}),ia(),H()?function(){return b(this,arguments,void 0,function(e){var r,n;return e===void 0&&(e={}),C(this,function(i){switch(i.label){case 0:return(r=ea())?[4,Fc({mst:r,status:G.CANCEL,result:e})]:[2,Promise.reject(S(_e,"mst is invalid"))];case 1:return n=i.sent(),tn(!0),[2,n]}})})}(t):function(e){return e===void 0&&(e={}),cm(G.CANCEL,e)}(t)}function vm(t){return t===void 0&&(t={}),ia(),H()?function(){return b(this,arguments,void 0,function(e){var r,n;return e===void 0&&(e={}),C(this,function(i){switch(i.label){case 0:return(r=ea())?[4,Fc({mst:r,status:G.SUBMIT,result:e})]:[2,Promise.reject(S(_e,"mst is invalid"))];case 1:return n=i.sent(),tn(!0),[2,n]}})})}(t):function(e){return e===void 0&&(e={}),cm(G.SUBMIT,e)}(t)}function mm(){return ia(),H()?function(){return b(this,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return No()!==!1?[3,2]:(t=ea())?[4,Fc({mst:t,status:G.CLOSE,result:{}})]:[2,Promise.reject(S(_e,"mst is invalid"))];case 1:e.sent(),e.label=2;case 2:return Nn(),[2]}})})}():function(){return b(this,void 0,void 0,function(){var t;return C(this,function(e){return(t=ti())!=null&&t.isReady()?(t.send({eventName:G.CLOSE}),[2,new Promise(function(r){setTimeout(function(){Nn(),r()},Tv)})]):(Nn(),[2,Promise.resolve()])})})}()}function ym(){return ia(),function(){var t,e=_S();try{t=e?JSON.parse(e):{}}catch{t={}}return Promise.resolve(t)}()}function vE(t){var e=t.msit,r=t.mstVerifier;return e&&r?me(ue("subWindowGetMSTByMSIT"),{method:"POST",body:JSON.stringify({msit:e,mstVerifier:r})}):Promise.reject(S(re,"no proper argument"))}function mE(t){var e=t.mst;return e?me(ue("subWindowGetAppData"),{method:"POST",body:JSON.stringify({mst:e})}):Promise.reject(S(re,"no proper argument"))}var rt={on:Zv,off:em,open:pm,cancel:gm,submit:vm,close:mm,getAppData:ym};(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"subWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){var r=this;return{on:Zv.bind(this),off:em.bind(this),open:function(n){return pm.call(r,J(J({},n),{onBeforeTransition:void 0}))},cancel:gm.bind(this),submit:vm.bind(this),close:mm.bind(this),getAppData:ym.bind(this)}},e})(B);var wm={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.sha256=r()})(qm,function(){var e=function r(n){function i(X,dt){return X>>>dt|X<<32-dt}for(var s=Math.pow,o=s(2,32),a="length",l,u,c="",d=[],f=n[a]*8,p=r.h=r.h||[],m=r.k=r.k||[],y=m[a],w={},g=2;y<64;g++)if(!w[g]){for(l=0;l<313;l+=g)w[l]=g;p[y]=s(g,.5)*o|0,m[y++]=s(g,.3333333333333333)*o|0}for(n+="";n[a]%64-56;)n+="\0";for(l=0;l<n[a];l++){if(u=n.charCodeAt(l),u>>8)return;d[l>>2]|=u<<(3-l)%4*8}for(d[d[a]]=f/o|0,d[d[a]]=f,u=0;u<d[a];){var h=d.slice(u,u+=16),v=p;for(p=p.slice(0,8),l=0;l<64;l++){var _=h[l-15],k=h[l-2],E=p[0],T=p[4],P=p[7]+(i(T,6)^i(T,11)^i(T,25))+(T&p[5]^~T&p[6])+m[l]+(h[l]=l<16?h[l]:h[l-16]+(i(_,7)^i(_,18)^_>>>3)+h[l-7]+(i(k,17)^i(k,19)^k>>>10)|0),I=(i(E,2)^i(E,13)^i(E,22))+(E&p[1]^E&p[2]^p[1]&p[2]);p=[P+I|0].concat(p),p[4]=p[4]+P|0}for(l=0;l<8;l++)p[l]=p[l]+v[l]|0}for(l=0;l<8;l++)for(u=3;u+1;u--){var A=p[l]>>u*8&255;c+=(A<16?0:"")+A.toString(16)}return c};return e.code='var sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\\x80";b[h]%64-56;)b+="\\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};',e})})(wm);var yE=wm.exports;const wE=ah(yE);var _E=function(){var t=this;this.type="sync",this.fns=new Set,this.on=function(e){t.fns.add(e)},this.call=function(){for(var e,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var s=tr(t.fns),o=s.next();!o.done;o=s.next()){var a=o.value;a.apply(void 0,se([],F(n),!1))}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}}},fi=function(){var t=this;this.type="async",this.fns=new Set,this.on=function(e){t.fns.add(e)},this.call=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return b(t,void 0,void 0,function(){var n,i,s,o,a,l;return C(this,function(u){switch(u.label){case 0:n=[];try{for(i=tr(this.fns),s=i.next();!s.done;s=i.next())o=s.value,n.push(o.apply(void 0,se([],F(e),!1)))}catch(c){a={error:c}}finally{try{s&&!s.done&&(l=i.return)&&l.call(i)}finally{if(a)throw a.error}}return[4,Promise.all(n)];case 1:return u.sent(),[2]}})})}},$i=function(t){var e,r=Hn(43),n=cS(wE(r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),i=ce();if(!i||!i.liffId)throw S(Mt,"You need to define `liffId` for liff.login()");var s={app_id:i.liffId,state:Hn(12),response_type:"code",code_challenge_method:"S256",code_challenge:n,liff_sdk_version:na()};t&&t.redirectUri&&(s.redirect_uri=t.redirectUri),Lt()&&!H()&&(!((e=ti())===null||e===void 0)&&e.isReady()?s.redirect_uri=window.location.href:s.disable_auto_login="true"),PS({codeVerifier:r});var o=ue("authorize")+"?"+De.stringify(s);z.debug("[Redirect] ".concat(o)),window.location.href=o},bE=function(t){function e(){var r=t.apply(this,se([],F(arguments),!1))||this;return r.hooks={before:new _E},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"login"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this._login.bind(this)},e.prototype._login=function(r){this.hooks.before.call(r),$i(r)},e}(B),Ja,ro=typeof navigator>"u"?"en":(Ja=navigator.language)!==null&&Ja!==void 0?Ja:"en",mu=null;function SE(t){return b(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return ro=t,[4,_m()];case 1:return e.sent(),[2]}})})}function _m(){return b(this,void 0,void 0,function(){var t,e;return C(this,function(r){switch(r.label){case 0:return[4,me("".concat("https://liffsdk.line-scdn.net/xlt/manifest.json"),{method:"GET",headers:{Accept:"application/json"}})];case 1:return t=r.sent(),e="".concat(ro),!t.languages[e]&&ro.includes("-")&&(e=ro.split("-")[0]),t.languages[e]||(e="en"),[4,me("".concat("https://liffsdk.line-scdn.net/xlt","/").concat(t.languages[e]),{method:"GET",headers:{Accept:"application/json"}})];case 2:return mu=r.sent(),[2]}})})}function Qa(t){if(mu===null)throw S(pe,"please call xlt after liff.init");return mu[t]}var EE=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"i18n"},enumerable:!1,configurable:!0}),e.prototype.install=function(r){return r.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)),{setLang:SE}},e.prototype.beforeInitFinished=function(){return b(this,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return[4,_m()];case 1:return r.sent(),[2]}})})},e}(B),kE=new EE,Jf={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},Qf={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function TE(){var t;Ne("color-scheme",(((t=Oe())==null?void 0:t.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" "));var e=window.matchMedia("(prefers-color-scheme: dark)");Ya({matches:e==null?void 0:e.matches,media:e==null?void 0:e.media}),e.addEventListener?e.addEventListener("change",Ya):e.addListener&&e.addListener(Ya)}function Ya(t){var e=Oe(),r=(e==null?void 0:e.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:Jf,darkModeColor:Qf},n=r.adaptableColorSchemes,i=r.lightModeColor,s=r.darkModeColor,o=n.includes("dark");t.matches&&o?Yf(J(J({},Qf),s)):Yf(J(J({},Jf),i))}function Yf(t){var e=t.iconColor,r=t.statusBarColor,n=t.titleTextColor,i=t.titleSubtextColor,s=t.titleButtonColor,o=t.titleBackgroundColor,a=t.progressBarColor,l=t.progressBackgroundColor,u=t.titleButtonAreaBackgroundColor,c=t.titleButtonAreaBorderColor,d=t.baseBackgroundColor,f=t.baseTextColor,p=t.lightButtonBorderColor;Ne("--liff-base-background-color",d),Ne("--liff-base-text-color",f),Ne("--liff-base-background-rgb-color",Nf(d)),Ne("--liff-base-text-rgb-color",Nf(f)),Ne("--liff-light-button-border-color",p),Ne("--liff-title-text-color",n),Ne("--liff-title-background-color",o),Ne("--liff-title-button-color",s),Ne("--liff-icon-color",e),Ne("--liff-status-bar-color",r),Ne("--liff-title-subtext-color",i),Ne("--liff-progress-bar-color",a),Ne("--liff-progress-background-color",l),Ne("--liff-title-button-area-background-color",$f(u)),Ne("--liff-title-button-area-border-color",$f(c))}function Ne(t,e){document.documentElement.style.setProperty(t,e)}var OE={addToHomeScreen:function(t){if(!new Ga(t).invoke("addToHomeScreen"))throw S(K,"No permission for liff.addToHomeScreen()")},scanCode:function(t){if(!new Ga(t).invoke("scanCode"))return Promise.reject(S(K,"No permission for liff.scanCode()"))},getAdvertisingId:function(t){if(!new Ga(t).invoke("getAdvertisingId"))return Promise.reject(S(K,"No permission for liff.getAdvertisingId()"))},initPlugins:function(){}};function CE(t){return b(this,void 0,void 0,function(){var e;return C(this,function(r){switch(r.label){case 0:return[4,VS()];case 1:return(e=r.sent())?(e.install(t,OE),[2]):[2]}})})}function IE(){return b(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,me(ue("certs"))];case 1:return[2,t.sent()]}})})}function PE(t,e,r){return b(this,void 0,void 0,function(){var n;return C(this,function(i){switch(i.label){case 0:return[4,crypto.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return n=i.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},n,r,e)];case 2:return[2,i.sent()]}})})}function bm(t,e){return b(this,void 0,void 0,function(){var r,n,i,s,o,a,l,u,c,d,f,p,m,y,w,g;return C(this,function(h){switch(h.label){case 0:return r=t.split("."),n=F(r,3),i=n[0],s=n[1],o=n[2],a=JSON.parse(Ha.decode(i)),l=JSON.parse(Ha.decodeUnicode(s)),u=Lf(Ha.decode(o)),c=Lf("".concat(i,".").concat(s)),[4,IE()];case 1:if(d=h.sent(),!(f=d.keys.find(function(v){return v.kid===a.kid})))return[3,6];if(delete f.alg,a.alg!=="ES256")throw S($r,'Invalid "alg" value in ID_TOKEN');p=void 0,h.label=2;case 2:return h.trys.push([2,4,,5]),[4,PE(f,c,u)];case 3:return p=h.sent(),[3,5];case 4:throw m=h.sent(),S($r,"".concat("Failed to use Crypto API to verify ID_TOKEN",": ").concat(m));case 5:if(p){if(y=l.iss!=="https://access.".concat("line.me"),w=l.aud!==e,g=1e3*l.exp<Date.now(),y)throw S($r,'Invalid "iss" value in ID_TOKEN');if(w)throw S($r,'Invalid "aud" value in ID_TOKEN');if(g)throw S($r,'Invalid "exp" value in ID_TOKEN');return[2,l]}throw S($r,"Invalid signature in ID_TOKEN");case 6:throw S($r,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}})})}function Bc(t){var e=t.split(".");if(e[1])try{var r=e[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(r))}catch{return null}return null}function Sm(t){var e=t.pathname,r=t.query,n=r?"?".concat(De.stringify(r)):"",i="".concat("liff://").concat(e).concat(n);location.href=i}var yu=null;function xE(){typeof yu=="boolean"&&z.warn("liff.init is not expected to be called more than once"),yu=!!yS()||!(!H()||De.parse(window.location.hash).feature_token||us())&&(wS(!0),!0)}function wu(){return!!yu}function RE(t,e){return b(this,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return(r=ea())?[2,r]:t&&e?[4,vE({msit:t,mstVerifier:e})]:[3,2];case 1:return[2,n.sent().mst];case 2:return[2,null]}})})}function AE(t){return me("".concat(ue("apps"),"/").concat(t,"/featureToken"))}function jE(t){return b(this,void 0,void 0,function(){var e,r,n,i;return C(this,function(s){switch(s.label){case 0:return e=De.parse(window.location.hash),r=function(o){for(var a,l,u=[],c=1;c<arguments.length;c++)u[c-1]=arguments[c];var d=function(m){Object.keys(m).filter(function(y){return m[y]!==null&&m[y]!==void 0}).forEach(function(y){o[y]=m[y]})};try{for(var f=tr(u),p=f.next();!p.done;p=f.next())d(p.value)}catch(m){a={error:m}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}return o}({access_token:zt(),context_token:IS(),feature_token:us(),id_token:ta(),client_id:CS(),mst_challenge:Lv(),mst_verifier:bS(),msit:ES()},e),wu()?xe()?[4,AE(t)]:[3,2]:[3,3];case 1:n=s.sent().featureToken,r.feature_token||(r.feature_token=n),s.label=2;case 2:(i=Cc(t))&&(r.client_id=i),s.label=3;case 3:return[2,r]}})})}function $E(t){if(t.persisted&&cs("multipleLiffTransition"))if(Fe()==="ios")window.location.reload();else{var e=ce().liffId,r=us();if(!e)throw S(pe,"Invalid LIFF ID.");if(!r)throw S(K,"Invalid featureToken for client features");Sm({pathname:"app/".concat(e),query:{feature_token:r}})}}function NE(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a,l,u,c,d,f,p,m,y,w,g,h,v;return C(this,function(_){switch(_.label){case 0:return[4,new Promise(function(k){var E=Wt();if(!E||yt(E,"9.5.0")<0)k();else if(window._liff&&window._liff.features)k();else{z.debug("cannot find window._liff.features, listen to ready event");var T=function(){z.debug("ready event is fired"),Lc("ready",T),k()};Nc("ready",T)}})];case 1:return _.sent(),xE(),[4,jE(t.liffId)];case 2:if(e=_.sent(),r=e.access_token,n=e.context_token,i=e.feature_token,s=e.id_token,o=e.client_id,a=e.mst_verifier,l=e.mst_challenge,u=e.msit,n){if(typeof n!="string")throw S(pe,"Cannot get context token, perhaps there is an incorrect parameter in permanent link");xc(Bc(n))}if(((h=Oe())===null||h===void 0?void 0:h.liffId)!==void 0&&((v=Oe())===null||v===void 0?void 0:v.liffId)!==t.liffId)throw S(pe,"Invalid LIFF ID");return!Lt()&&i&&(function(k,E){cs("multipleLiffTransition")&&Sm({pathname:"app/".concat(k),query:{feature_token:E}})}(t.liffId,i),wu()&&Mf(i)),l&&OS(l),a&&SS(a),o&&Uv(o),u&&kS(u),window.addEventListener("pageshow",$E),xe()?[3,5]:i&&r?[3,5]:wu()?(c=ts(location.href,{"liff.hback":"2"}),$i({redirectUri:c}),[4,new Promise(function(){})]):[3,4];case 3:_.sent(),_.label=4;case 4:throw $i(),S(pe,"Failed to parse feature_token or access_token");case 5:return r&&i?[4,$c(r)]:[3,7];case 6:if(d=_.sent(),f=d.client_id,p=d.expires_in,m=Cc(t.liffId),f!==m)throw $i(),S(pe,"Failed to verify access_token");Mf(i),Mv(new Date(Date.now()+1e3*p)),Rc(r),_.label=7;case 7:return[4,RE(u,a)];case 8:return(y=_.sent())?(TS(y),[4,mE({mst:y})]):[3,10];case 9:(w=_.sent().data)&&du(JSON.stringify(w)),_.label=10;case 10:return s&&!ta()&&Dv(s),s&&o&&!ra()?[4,bm(s,o)]:[3,12];case 11:(g=_.sent())&&zv(g),_.label=12;case 12:return[2]}})})}function LE(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a;return C(this,function(l){switch(l.label){case 0:return e=ue("apps"),r="".concat(e,"/").concat(t,"/contextToken"),n=zt(),i={"Content-Type":"application/json",Accept:"application/json"},n&&(i.Authorization="Bearer ".concat(n)),[4,me(r,{headers:i})];case 1:if(s=l.sent(),!(o=s.contextToken))throw S(pe,"Can not get context from server.");if(!(a=Bc(o)))throw S(pe,"Invalid context token.");return[2,a]}})})}function Em(){return b(this,void 0,void 0,function(){var t,e;return C(this,function(r){switch(r.label){case 0:if(!(t=ce().liffId))throw S(pe,"Invalid LIFF ID.");return[4,LE(t)];case 1:return e=r.sent(),xc(e),[2]}})})}function UE(t){return b(this,void 0,void 0,function(){var e,r,n,i=this;return C(this,function(s){switch(s.label){case 0:e=function(){return b(i,void 0,void 0,function(){var o,a,l,u,c,d;return C(this,function(f){switch(f.label){case 0:return[4,(p=ce(),m=De.parse(window.location.search),y=Bv(),w={grant_type:"authorization_code",client_id:m.liffClientId,appId:p.liffId,code:m.code,code_verifier:y.codeVerifier,redirect_uri:p.redirectUri||m.liffRedirectUri,id_token_key_type:"JWK"},g=De.stringify(w),me(ue("token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:g}))];case 1:return o=f.sent(),a=o.access_token,l=o.id_token,u=o.expires_in,Uv(t),Rc(a),Mv(new Date(Date.now()+1e3*u)),zf(),l?(Dv(l),[4,bm(l,t)]):[3,3];case 2:(c=f.sent())&&zv(c),f.label=3;case 3:return(d=De.parse(location.hash).context_token)?(xc(Bc(d)),[3,6]):[3,4];case 4:return[4,Em()];case 5:f.sent(),f.label=6;case 6:return[2]}var p,m,y,w,g})})},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e()];case 2:return s.sent(),[3,4];case 3:throw r=s.sent(),n=r,zf(),n;case 4:return[2]}})})}function km(){return b(this,void 0,void 0,function(){var t,e,r,n,i,s,o=this;return C(this,function(a){switch(a.label){case 0:return(e=ti())?[3,2]:[4,am(Ri.SUB)];case 1:e=a.sent(),a.label=2;case 2:return(t=e).isReady()?(r=Hn(8),[4,t.getData("appData")]):[3,8];case 3:return n=a.sent(),i=n.eventName,s=n.data,i!==to.NOT_FOUND?[3,6]:[4,t.teardown()];case 4:return a.sent(),[4,km()];case 5:return[2,a.sent()];case 6:s&&du(JSON.stringify(s)),a.label=7;case 7:return t.listen(function(l){return b(o,void 0,void 0,function(){var u,c;return C(this,function(d){return u=l.context,c=u.data,u.eventName===G.INIT&&(c==null?void 0:c.subWindowId)!==r&&Nn(),u.eventName!==G.CANCEL&&u.eventName!==G.SUBMIT||t.teardown(),[2]})})}),xe()&&t.send({eventName:G.INIT,data:{subWindowId:r,hasOpener:!!window.opener}}),[3,10];case 8:return um()?[3,10]:[4,new Promise(function(l){window.addEventListener("message",function(u){return function c(d){var f=d.data,p=d.source,m=d.origin;if(f){var y=f.type,w=f.message;y===jo&&(window.removeEventListener("message",c),w&&du(w),uE(m),p&&p.postMessage&&p.postMessage({status:jo},m),u())}}}(l))})];case 9:return[2,a.sent()];case 10:return[2]}})})}var DE=new(function(){function t(){var e=this;this.getAndValidateContext=function(){var r=Oe();if(!r)throw S(pe,"Could not get Context from server.");if(!r.endpointUrl)throw S(pe,"Could not get endpointUrl from server.");if(!r.permanentLinkPattern)throw S(pe,"Could not get permanentLinkPattern from server.");return r},this.decodeState=function(r){var n=e.getAndValidateContext();r=r.replace(/\n/g,"%0D%0A");var i=e.hasTrailingSlash(n.endpointUrl)||e.hasTrailingSlash(r),s=new URL(n.endpointUrl),o=s.origin,a=s.pathname,l=s.search,u=new URL("".concat(o).concat(e.attachSlashAtStart(r))),c=u.pathname,d=u.search,f=u.hash,p="".concat(l).concat(l?d.replace(/\?/g,"&"):d),m="".concat(a).concat(e.attachSlashAtStart(c)).replace("//","/");return(m=e.attachSlashAtStart("".concat(m))).endsWith("/")&&!i&&(m=m.substring(0,m.length-1)),"".concat(o).concat(m).concat(p).concat(f).replace(/%0D%0A/g,`
`)}}return t.prototype.attachSlashAtStart=function(e){return"".concat(e&&e.length>0&&!e.startsWith("/")?"/":"").concat(e)},t.prototype.hasTrailingSlash=function(e){var r=e.indexOf("?"),n=e.indexOf("#"),i=-1;return(i=r===-1&&n===-1?e.length:r===-1?n:n===-1?r:Math.min(r,n))>0&&e[i-1]==="/"},t.prototype.invoke=function(){return b(this,void 0,void 0,function(){var e,r,n,i,s;return C(this,function(o){switch(o.label){case 0:if(e=De.parse(window.location.search),typeof(r=e["liff.state"])!="string")return[2];o.label=1;case 1:return o.trys.push([1,4,,5]),n=location.href,(i=this.decodeState(r))===n?[3,3]:(e["liff.hback"]?location.replace(ts(i,{"liff.hback":e["liff.hback"]})):location.replace(i),[4,new Promise(function(){})]);case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if((s=o.sent()).code===pe)throw s;return z.debug(s),[3,5];case 5:return[2]}})})},t}());function FE(t,e){return b(this,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:if(!t.liffId)throw S(Mt,"liffId is necessary for liff.init()");return vS(t),!H()&&xe()&&(xS()||Ac()),r=De.parse(window.location.search),!Lt()||H()?[3,2]:[4,km()];case 1:i.sent(),i.label=2;case 2:if(r.error&&r.liffOAuth2Error)throw a=r.error,l=r.error_description,u=l.replace(/\+/g," "),c="".concat(a,": ").concat(u),S(pe,c);return s=r.code,o=Bv(),s&&!xe()&&o&&o.codeVerifier?[4,UE(r.liffClientId)]:[3,4];case 3:i.sent(),i.label=4;case 4:return H()?[4,NE(t)]:[3,6];case 5:return i.sent(),[3,8];case 6:return xe()?[3,8]:[4,Em()];case 7:i.sent(),i.label=8;case 8:return[4,DE.invoke()];case 9:if(i.sent(),n=Oe())try{jc(location.href,n.endpointUrl)}catch{z.warn(`liff.init() was called with a current URL that is not related to the endpoint URL.
`.concat(location.href," is not under ").concat(n.endpointUrl))}return[4,e()];case 10:return i.sent(),hS(window.location.href),[2]}var s,o,a,l,u,c})})}var Tm=function(t,e){return new Promise(function(r,n){if(t){var i=document.createElement("script");i.type="module",i.onload=function(){r()},i.src=t,document.head.appendChild(i)}else n(S(Mt,e))})},BE=function(t){var e="https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js";return e&&t&&(e=e.replace(/\d{1,2}\.\d{1,2}\.\d{1,3}/,t)),Tm(e,"LUI_ALERT_URL is not defined")},Xa=function(){return b(void 0,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return t=function(){var n,i=document.querySelector('script[src*="luivendor.js"]');if(i&&(!((n=i.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g))===null||n===void 0)&&n.length))return i.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)[0]}(),t?[3,2]:[4,Tm("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js","LUI_VENDOR_URL is not defined")];case 1:e.sent(),e.label=2;case 2:return[4,BE(t)];case 3:return e.sent(),[4,(r=Hn(6),new Promise(function(){var n=document.createElement("div");n.innerHTML='<lui-alert id="'.concat("liffAlert","-").concat(r,'" shown title="').concat(Qa("alert.android.extBrowser.autoLoginWorkaround.title"),'" message="').concat(Qa("alert.android.extBrowser.autoLoginWorkaround.desc"),'" button="').concat(Qa("alert.android.extBrowser.autoLoginWorkaround.button.text"),'"></lui-alert>'),document.body.appendChild(n);var i=document.getElementById("".concat("liffAlert","-").concat(r));i&&i.addEventListener("lui-button-click",function(){var s=window.open(ts(window.location.href,{liffIsEscapedFromApp:"true"}),"_blank");s&&(s.location.href=ts(window.location.href,{liffIsEscapedFromApp:"true"}),window.close())})}))];case 4:return e.sent(),[2]}var r})})},Xf=function(t){try{return new URL(t).searchParams.get("lineAppVersion")}catch{return null}};function ME(){return b(this,void 0,void 0,function(){var t,e,r;return C(this,function(n){switch(n.label){case 0:return t=(r=Xf(window.location.href))!==null&&r!==void 0?r:Xf(window.document.referrer),t&&yt(t,"13.10.0")>=0?[2]:H()||Fe()!=="android"||(e=De.parse(window.location.search))[Jv]||e.liffIsEscapedFromApp?[2]:e.liffClientId&&document.referrer.includes("access.".concat("line.me"))?(window.location.href=ts(window.location.href,{liffIsEscapedFromApp:"true"}),[2]):e.liffClientId&&document.referrer.includes("android-app://")?[4,Xa()]:[3,2];case 1:n.sent(),n.label=2;case 2:return e.liffClientId&&document.referrer===""&&window.history.length===1?[4,Xa()]:[3,4];case 3:n.sent(),n.label=4;case 4:return!document.referrer.includes("liffClientId")||document.referrer.includes("liffIsEscapedFromApp")?[3,6]:[4,Xa()];case 5:n.sent(),n.label=6;case 6:return[2]}})})}var zE=function(t){function e(){var r=t.apply(this,se([],F(arguments),!1))||this;return r.hooks={before:new fi,after:new fi},r.internalHooks={beforeFinished:new fi,beforeSuccess:new fi,error:new fi},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),e.prototype.install=function(r){var n=r.liff;return this.liffForWindow=n,this.init.bind(this)},e.prototype.init=function(r,n,i){return b(this,void 0,void 0,function(){var s;return C(this,function(o){switch(o.label){case 0:return[4,this.hooks.before.call()];case 1:o.sent(),a=this.liffForWindow,window&&!window.liff&&(window.liff=a),o.label=2;case 2:return o.trys.push([2,9,,11]),[4,Promise.all([CE(this.liffForWindow),FE(r,this.internalHooks.beforeFinished.call)])];case 3:return o.sent(),TE(),[4,this.internalHooks.beforeSuccess.call()];case 4:return o.sent(),!r.withLoginOnExternalBrowser||xe()?[3,6]:($i(),[4,new Promise(function(){})]);case 5:o.sent(),o.label=6;case 6:return[4,ME()];case 7:return o.sent(),[4,this.hooks.after.call()];case 8:return o.sent(),typeof n=="function"&&n(),Ev(),[3,11];case 9:return s=o.sent(),[4,this.internalHooks.error.call(s)];case 10:throw o.sent(),typeof i=="function"&&i(s),s;case 11:return[2]}var a})})},e}(B);function Om(){return{liffApp:"https://liff.".concat("line.me"),liffServer:"https://api.".concat("line.me"),miniApp:"https://miniapp.".concat("line.me")}}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getOrigins"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Om()}},e})(B);function Cm(){return navigator.language}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getLanguage"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Cm()}},e})(B);function Im(){var t=Wt();if(!t||!H()||Fe()!=="ios")return navigator.language;if(yt(t,"14.11.0")>=0){var e=window.prompt("LIFF:GET_APP_LANGUAGE");if(e)return e}return navigator.language}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getAppLanguage"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(){return Im()}},e})(B);function Pm(t){return b(this,void 0,void 0,function(){var e,r,n,i,s,o,a;return C(this,function(l){switch(l.label){case 0:return function(u){if(!lS.includes(u))throw S(re,"Unexpected permission name.");var c=Oe();return!!(c!=null&&c.scope.includes(u))}(t)?(e=zt())?[4,$c(e)]:[3,2]:[2,{state:"unavailable"}];case 1:r=l.sent(),n=unescape(r.scope).split(" ");try{for(i=tr(n),s=i.next();!s.done;s=i.next())if(s.value.includes(t))return[2,{state:"granted"}]}catch(u){o={error:u}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}return[2,{state:"prompt"}];case 2:throw S(_e,"Need access_token for api call, Please login first")}})})}function xm(){var t,e,r=Oe();return!!r&&r.type!=="square_chat"&&(cs("skipChannelVerificationScreen")||!H()&&((e=(t=r.availability)===null||t===void 0?void 0:t.skipChannelVerificationScreen)===null||e===void 0?void 0:e.permission))}function WE(){var t=ce().liffId;if(t)return me("".concat(ue("unauthorizedPermissions"),"?liffId=").concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(zt())}});throw S(_e,"liffId is required")}var no,Bs=rt.on,Ms=rt.off,VE=rt.open,HE=function(){function t(e,r){var n=this;this.onSubmit=function(i){return b(n,[i],void 0,function(s){var o=s.newAccessToken,a=s.ICA_ERROR;return C(this,function(l){return o?this.resolve({newAccessToken:o}):a&&this.reject(S(Pe,a)),this.teardown(),[2]})})},this.onClose=function(){return b(n,void 0,void 0,function(){return C(this,function(i){return this.reject(S(_e,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onCancel=function(){return b(n,void 0,void 0,function(){return C(this,function(i){return this.reject(S(_e,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onError=function(i){return b(n,void 0,void 0,function(){return C(this,function(s){return this.reject(i),this.teardown(),[2]})})},this.resolve=e,this.reject=r,this.setup()}return t.prototype.setup=function(){Bs("submit",this.onSubmit),Bs("close",this.onClose),Bs("cancel",this.onCancel),Bs("error",this.onError)},t.prototype.teardown=function(){Ms("submit",this.onSubmit),Ms("close",this.onClose),Ms("cancel",this.onCancel),Ms("error",this.onError),no=void 0},t.prototype.open=function(e){var r=ce().liffId;r?VE({url:"".concat("https://liff.line.me/1656032314-Xgrw5Pmk"),appData:{liffId:r,channelId:Cc(r),accessToken:zt()},onBeforeTransition:e}).catch(this.reject):this.reject(S(_e,"liffId is required"))},t}();function Rm(){return b(this,void 0,void 0,function(){var t,e,r=this;return C(this,function(n){switch(n.label){case 0:if(!xm())throw S(K,"SkipChannelVerificationScreen is unavailable.");return no&&no.teardown(),t=function(){return b(r,void 0,void 0,function(){var i;return C(this,function(s){switch(s.label){case 0:return[4,WE()];case 1:if(i=s.sent(),(H()?i:i.filter(function(o){return o!=="chat_message.write"})).length<=0)throw S(K,"All permissions have already been approved.");return[2]}})})},[4,new Promise(function(i,s){(no=new HE(i,s)).open(t)})];case 1:return e=n.sent().newAccessToken,Rc(e),[2]}})})}function KE(){return b(this,void 0,void 0,function(){var t,e;return C(this,function(r){switch(r.label){case 0:if(!(t=zt()))throw S(_e,"Need access_token for api call, Please login first");return[4,$c(t)];case 1:return e=r.sent(),[2,decodeURIComponent(e.scope).split(" ").filter(function(n){return n!==""})]}})})}function Ln(t,e){var r=this;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return b(r,void 0,void 0,function(){var s,o,a;return C(this,function(l){switch(l.label){case 0:return s=(n.length>0?n[n.length-1]:{}).ignorePermissionCheck,o=s!==void 0&&s,[4,Pm(e)];case 1:if((a=l.sent().state)!=="unavailable")return[3,2];throw S(K,"The permission is not in LIFF app scope.");case 2:return a!=="prompt"||!xm()||o||!H()&&e==="chat_message.write"?[3,4]:[4,Rm()];case 3:return l.sent(),[3,5];case 4:o&&n.pop(),l.label=5;case 5:return[4,t.apply(void 0,se([],F(n),!1))];case 6:return[2,l.sent()]}})})}}var qE=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"permission"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return{query:Pm,requestAll:Rm,getGrantedAll:KE}},e}(B),GE=new qE;function Mc(){return me(ue("profile"))}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getProfile"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return Ln(Mc,"profile")},e})(B);var JE=function(t,e){return t?"&".concat(t.split("&").filter(function(r){return r.indexOf("is_liff_external_open_window")===-1}).join("&").concat("".concat(e?"#".concat(e):""))):"".concat(e?"#".concat(e):"")};function sa(t){if(!function(s){if(!s||typeof s!="object")return!1;var o=s,a=o.url,l=o.external,u=F([typeof a,typeof l],2),c=u[0],d=u[1];return c==="string"&&a!==""&&(d==="undefined"||d==="boolean")}(t))throw S(re,"Invalid parameters for liff.openWindow()");var e=Wt();if(H())if(e!==null&&Fe()==="ios"&&yt(e,"9.19")>=0||!window._liff.postMessage){var r=t.url,n=t.external,i=n!==void 0&&n;window.open(function(s,o){var a,l,u,c,d,f,p,m,y;(function(g){return g.indexOf("#")!==-1&&g.indexOf("?")!==-1&&g.indexOf("#")<g.indexOf("?")})(s)||function(g){return g.indexOf("?")===-1&&g.indexOf("#")!==-1}(s)?(p=(a=F(s.split("#"),2))[0],l=a[1],m=(u=F((l===void 0?"":l).split("?"),2))[0],y=u[1]):(p=(c=F(s.split("?"),2))[0],d=c[1],y=(f=F((d===void 0?"":d).split("#"),2))[0],m=f[1]);var w=JE(y,m);return"".concat(p,"?").concat("is_liff_external_open_window","=").concat(!!o).concat(w)}(r,i))}else ei("openWindow",t);else window.open(t.url,"_blank")}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"openWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(r){return sa(r)}},e})(B);var QE=function(t){return typeof t=="object"&&t!==null&&function(e){return typeof e=="string"||e instanceof String}(t.type)};function Zf(t){return Promise.reject(S(re,t))}function Am(t){if(!function(r){return Array.isArray(r)&&r.every(QE)}(t))return Zf("Parameter 'messages' must be an array of { type, ... }");var e=t.length;return e<1||e>5?Zf("Number of messages should be in range 1 to ".concat(5,".")):me(ue("message"),{method:"POST",body:JSON.stringify({messages:t})}).catch(YE)}var YE=function(t){if(t.code==="403"){var e=Wt()==="12.0.0",r=Fe()==="ios",n=Pc();e&&(r||n)&&window.alert(`LINELINE 12.0.1
Please update your LINE app to LINE 12.0.1 or later.`)}throw t};(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"sendMessages"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return Ln(Am,"chat_message.write")},e})(B);function jm(){return me(ue("friendship"))}(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"getFriendship"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return Ln(jm,"profile")},e})(B);function XE(){return b(this,void 0,void 0,function(){var t,e;return C(this,function(r){switch(r.label){case 0:if(!xe())return[3,6];r.label=1;case 1:return r.trys.push([1,5,,6]),(t=ra())&&t.sub?[2,t.sub]:[3,2];case 2:return[4,Mc()];case 3:if((e=r.sent())&&e.userId)return[2,e.userId];r.label=4;case 4:return[3,6];case 5:return r.sent(),z.debug("can't retrieve Mid/Uid because of something wrong"),[3,6];case 6:return[2]}})})}function ZE(){return b(this,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return[4,XE()];case 1:return(t=e.sent())&&t.substring(0,1)==="u"?[2,t]:[2]}})})}var ek=function(t){function e(){var r=t.apply(this,se([],F(arguments),!1))||this;return r.utsExtra={isLiffSuccessful:!1,isLoggedIn:!1,id:"",version:""},r.injected=!1,r}return U(e,t),Object.defineProperty(e,"CUSTOMPLACEID_INIT",{get:function(){return"liff.init"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CUSTOMTYPE",{get:function(){return"liffSdk"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LiffUtsLoginStatus",{get:function(){return{isLoggedIn:1,isLiffSuccessful:2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"analytics"},enumerable:!1,configurable:!0}),e.prototype.install=function(r){var n=r.liff,i=r.internalHooks;this.liffCore=n,i.init.beforeFinished(this.beforeInitFinished.bind(this)),i.init.beforeSuccess(this.beforeInitSuccess.bind(this)),i.init.error(this.initError.bind(this))},e.prototype.createDeprecatedUtsProxy=function(r){var n="LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions.";return new Proxy(r,{get:function(i,s){var o=i[s];return typeof o=="function"?function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return z.warn("[LIFF Analytics] ".concat(n," Called method: ").concat(String(s))),o.apply(i,a)}:o}})},e.prototype.changeRatioToUTSFormat=function(r){if(r&&Number.isFinite(r))return Math.round(100*r)},e.prototype.setExtra=function(){var r,n=this.utsExtra,i=n.isLiffSuccessful,s=n.isLoggedIn,o=n.id,a=n.version,l=(s?e.LiffUtsLoginStatus.isLoggedIn:0)|(i?e.LiffUtsLoginStatus.isLiffSuccessful:0);(r=this.uts)===null||r===void 0||r.setExtra("liff",{id:o,loginStatus:l,version:a})},e.prototype.assignUtsExtra=function(r){Object.assign(this.utsExtra,r)},e.prototype.setVersion=function(r){this.assignUtsExtra({version:r}),z.debug("[LIFFUTS][SDK version] ".concat(r)),this.setExtra()},e.prototype.setLiffId=function(r){this.assignUtsExtra({id:r}),z.debug("[LIFFUTS][LIFFID] ".concat(r)),this.setExtra()},e.prototype.setIsLoggedIn=function(r){this.assignUtsExtra({isLoggedIn:r}),z.debug("[LIFFUTS][isLoggedIn] ".concat(r)),this.setExtra()},e.prototype.sendLiffInit=function(){var r;z.debug("[LIFFUTS][sendCustom] liff.init"),(r=this.uts)===null||r===void 0||r.sendCustom({type:e.CUSTOMTYPE,params:{placeId:e.CUSTOMPLACEID_INIT}})},e.prototype.setIsLiffSuccessful=function(r){this.assignUtsExtra({isLiffSuccessful:r}),z.debug("[LIFFUTS][isLiffInitSuccessful] ".concat(r)),this.setExtra()},e.prototype.prepareReferrer=function(r){var n={};Object.keys(r).forEach(function(i){if(sS.includes(i)){var s=r[i];typeof s=="string"&&s&&(n[i.replace(/^liff\.ref\./,"")]=s)}}),Object.keys(n).length>0&&(this.referrer=n)},e.prototype.beforeInitFinished=function(){return b(this,void 0,void 0,function(){var r,n,i,s,o,a,l,u,c,d,f,p;return C(this,function(m){switch(m.label){case 0:if(r=De.parse(window.location.search),this.prepareReferrer(r),n=Oe(),!(i=n==null?void 0:n.utsTracking))return[2];if(s=ce(),o=s.liffId,a=s.analytics,i.mode!=="auto"||!a)return[3,6];z.warn("[LIFF Analytics] LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions."),z.debug("[LIFFUTS] ".concat(new Date().toUTCString())),m.label=1;case 1:return m.trys.push([1,3,,4]),l=this,[4,new Promise(function(y,w){var g=window.uts,h=document.createElement("script");h.type="text/javascript",h.src="https://static.line-scdn.net/uts/edge/4.1.0/uts.js",h.onload=function(){var v=window.uts;y(v),window.uts=g},h.onerror=function(v){w(v)},document.getElementsByTagName("head")[0].appendChild(h)})];case 2:return l.uts=m.sent(),[3,4];case 3:return u=m.sent(),z.debug("[LIFFUTS] cannot load UTS, reason: ".concat(u)),[2];case 4:return c=J(J({},a.context),{utsId:a.context.utsId,appName:a.context.appName,appEnv:a.context.appEnv||"release"}),d=J(J({endpoint:"https://uts-front.line-apps.com"},a.options),{sampleRate:this.changeRatioToUTSFormat(i.sendRatio),version:"current"}),this.uts.init(c,d),[4,ZE()];case 5:(f=m.sent())&&(z.debug("[LIFFUTS][mid] ".concat(f)),this.uts.setMid(f)),n!=null&&n.tid&&(z.debug("[LIFFUTS][tid] ".concat(n.tid)),this.uts.setTid(n.tid)),this.referrer&&(z.debug("liff.ref.referrer",this.referrer),this.uts.setSessionParams(this.referrer)),o&&this.setLiffId(o),this.setIsLoggedIn(xe()),this.setVersion(na()),p=Pv(location.href),z.debug("[LIFFUTS][url] ".concat(p)),this.uts.setUrl(p),this.liffCore.analytics=this.createDeprecatedUtsProxy(this.uts),this.injected=!0,m.label=6;case 6:return[2]}})})},e.prototype.beforeInitSuccess=function(){return this.injected&&(this.setIsLiffSuccessful(!0),this.sendLiffInit()),Promise.resolve()},e.prototype.initError=function(){return this.injected&&(this.setIsLiffSuccessful(!1),this.sendLiffInit()),Promise.resolve()},e}(B),tk=function(t){z.warn("[LIFF Analytics] LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions. Called function: sendShareTargetPicker"),z.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"),t.sendCustom({type:"liffSdk",params:{placeId:"liff.shareTargetPicker"}})},gn,rk=function(){function t(e,r){var n=this;this.resolve=e,this.reject=r,this.onSubmit=function(i){var s=i.message;n.resolve({value:s}),n.destroy()},this.onClose=function(){n.resolve({value:null}),n.destroy()},this.onCancel=function(){n.resolve({value:null}),n.destroy()},this.onError=function(i){n.reject(i),n.destroy()},this.start()}return t.prototype.start=function(){rt.on("submit",this.onSubmit),rt.on("close",this.onClose),rt.on("cancel",this.onCancel),rt.on("error",this.onError)},t.prototype.destroy=function(){rt.off("submit",this.onSubmit),rt.off("close",this.onClose),rt.off("cancel",this.onCancel),rt.off("error",this.onError),gn=void 0},t}();function nk(){return b(this,void 0,void 0,function(){return C(this,function(t){return Qt.scanCodeV2(),gn&&gn.destroy(),[2,new Promise(function(e,r){gn=new rk(e,r),rt.open({url:"https://liff.line.me/1656359117-jxmx5e11"}).catch(function(n){gn==null||gn.destroy(),r(n)})})]})})}var ik=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"scanCodeV2"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return nk},e}(B),sk=new ik,$m={};function ok(){return $m}function ak(t,e){var r=ok(),n=F(e.split("."),1)[0],i=r[e];i&&t.removeEventListener(n,i),r[e]=null}var eh=!1,th=!1;function lk(t,e,r,n){eh||(th=function(){var s=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return s=!0,!1}});window.addEventListener("test",o,o),window.removeEventListener("test",o,o)}catch{s=!1}return s}(),eh=!0);var i=F(e.split("."),1)[0];return new Promise(function(s){var o=function(a){s(a),r&&r(a)};(function(a,l){$m[a]=l})(e,o),t.addEventListener(i,o,!!th&&n)})}function rh(t,e,r,n){if(r===void 0&&(r={}),typeof t!="object"||!t.postMessage)throw S(re,"target must be window object");if(typeof e!="string")throw S(re,"keyname must be string");if(typeof r!="object")throw S(re,"incorrect body format. It should be Object or Array comprised of Object");if(!n)throw S(re,"serverEndPointUrl isn't passed. please fill up with proper url");if(n==="*")throw new Error("serverEndPointUrl doesn't allow to set '*'");var i={name:e,body:r};t.postMessage(i,n)}function uk(t,e,r,n){lk(t,"message.".concat(e),function(i,s,o){return function(a){z.debug("messageReceive",a),a.origin===o&&a.data.name===i&&s(a)}}(e,r,n))}var ck=function(){function t(){this.payloadToShareTargetPicker=null,this.popupWindow=null,this.doesWaitForSubwindowResult=!1}return t.getInstance=function(){return t.instance?t.instance.reset():t.instance=new t,t.instance},t.prototype.init=function(e){return b(this,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),this.liffId=e.referrer.liffId,this.doesWaitForSubwindowResult=!(!e.options||!e.options.waitForSubwindowResult),this.allowPostMessageOrigin=this.initAllowPostMessageOrigin(),this.payloadToShareTargetPicker=this.buildPayloadToShareTargetPicker(e),window.AbortController&&(this.abortController=new window.AbortController),this.prepareAnotherWindow(),[4,this.initOtt()];case 1:return i.sent(),this.initListener(),this.openAnotherWindow(),this.doesWaitForSubwindowResult?[4,this.pollingShareResult()]:[3,3];case 2:return r=i.sent(),this.finalize(),[2,r];case 3:case 6:return[2];case 4:return[3,6];case 5:if(n=i.sent(),this.finalize(),n.name!=="AbortError")throw n;return[3,6]}})})},t.prototype.resetAllVariables=function(){this.liffId="",this.allowPostMessageOrigin="",this.payloadToShareTargetPicker=null,this.ott="",this.popupWindow=null,this.timeoutIDForHealthCheck=null,this.abortController=null,this.internalError=null,this.doesWaitForSubwindowResult=!1},t.prototype.reset=function(){this.finalize(),this.resetAllVariables()},t.prototype.finalize=function(){var e,r;this.abortController&&this.abortController.abort(),H()||(e=this.timeoutIDForHealthCheck,r=this.popupWindow,ak(window,"message.receivedHealthcheck"),e&&clearTimeout(e),r&&!r.closed&&r.close())},t.prototype.buildPayloadToShareTargetPicker=function(e){return{messages:e.messages,isMultiple:e.isMultiple,referrer:e.referrer}},t.prototype.initAllowPostMessageOrigin=function(e){return e===void 0&&(e=ue("shareTargetPicker")),pS(e)},t.prototype.initOtt=function(){return b(this,void 0,void 0,function(){var e,r,n;return C(this,function(i){switch(i.label){case 0:return this.abortController&&(e=this.abortController.signal),r="".concat(ue("shareTargetPickerOtt"),"/").concat(this.liffId,"/ott"),n=this,[4,me(r,{method:"GET",signal:e}).then(function(s){return s.ott})];case 1:return n.ott=i.sent(),[2]}})})},t.prototype.prepareAnotherWindow=function(){H()||(Fe()!=="ios"||Pc()?this.popupWindow=window.open("","liffpopup","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):this.popupWindow=window.open())},t.prototype.openAnotherWindow=function(){if(H()&&this.payloadToShareTargetPicker)e=this.liffId,r=this.ott,n=this.payloadToShareTargetPicker,i={liffId:e,ott:r,data:JSON.stringify(n),closeModals:!1},location.href="".concat("line://picker","?").concat(De.stringify(i));else{if(this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),!this.popupWindow)throw S(au);(function(s,o,a){var l={liffId:o,ott:a};s.location.href="".concat(ue("shareTargetPicker"),"?").concat(De.stringify(l))})(this.popupWindow,this.liffId,this.ott)}var e,r,n,i},t.prototype.initListener=function(){var e,r;H()||(e=this.onReceivedHealthcheck.bind(this),r=this.allowPostMessageOrigin,uk(window,"receivedHealthcheck",e,r))},t.prototype.healthCheck=function(){return b(this,void 0,void 0,function(){var e;return C(this,function(r){switch(r.label){case 0:if(this.popupWindow&&!this.popupWindow.closed)return[3,7];if(!this.doesWaitForSubwindowResult)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.onCanceled()];case 2:return r.sent(),[3,4];case 3:return e=r.sent(),this.internalError=e,[3,4];case 4:return[3,6];case 5:this.finalize(),r.label=6;case 6:return[3,8];case 7:n=this.popupWindow,i=this.allowPostMessageOrigin,rh(n,"healthcheck",void 0,i),this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),r.label=8;case 8:return[2]}var n,i})})},t.prototype.onReceivedHealthcheck=function(){if(!this.popupWindow||!this.payloadToShareTargetPicker)throw S(au);var e,r,n;e=this.popupWindow,r=this.payloadToShareTargetPicker,n=this.allowPostMessageOrigin,rh(e,"ready",r,n)},t.prototype.onCanceled=function(){return b(this,void 0,void 0,function(){var e,r;return C(this,function(n){switch(n.label){case 0:if(H()||!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),r={liffId:this.liffId,ott:this.ott},[4,me("".concat(ue("shareTargetPickerResult"),"?").concat(De.stringify(r)),{method:"POST",signal:e,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:"result=CANCEL"})];case 1:return[2,n.sent().status==="ok"]}})})},t.prototype.getShareResult=function(){return b(this,void 0,void 0,function(){var e,r;return C(this,function(n){if(!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),r={liffId:this.liffId,ott:this.ott},z.debug("fetch: getShareResult"),[2,me("".concat(ue("shareTargetPickerResult"),"?").concat(De.stringify(r)),{method:"GET",headers:{Accept:"application/json"},signal:e})]})})},t.isPollingTimeOut=function(e,r){return(r-e)/6e4>=10},t.prototype.pollingShareResult=function(){return b(this,void 0,void 0,function(){var e,r;return C(this,function(n){switch(n.label){case 0:e=Date.now(),n.label=1;case 1:if(t.isPollingTimeOut(e,Date.now()))return[3,4];if(this.internalError)throw this.internalError;return[4,this.getShareResult()];case 2:if((r=n.sent())&&r.result)switch(r.result){case"SUCCESS":return[2,{status:"success"}];case"CANCEL":return[2];default:throw new Error(r.resultDescription)}return[4,new Promise(function(i){setTimeout(i,500)})];case 3:return n.sent(),[3,1];case 4:throw new Error("Timeout: not finished within ".concat(10,"min"))}})})},t}(),dk=function(t){function e(){var r=t.apply(this,se([],F(arguments),!1))||this;return r.shareTargetPicker=function(n){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return b(r,se([n],F(i),!1),void 0,function(o,a){var l,u,c,d,f,p,m;return a===void 0&&(a={}),C(this,function(y){switch(y.label){case 0:if(Qt.shareTargetPicker(),!o||!Array.isArray(o)||o.length===0)throw S(re,"no proper argument");if(o.length>iS)throw S(re,"exceed the limit of num of messages");if(!(l=ce().liffId))throw S(Mt);window.liff&&(u=window.liff).analytics&&tk(u.analytics),c=a.isMultiple===void 0||a.isMultiple,y.label=1;case 1:return y.trys.push([1,3,,4]),d=ck.getInstance(),f=Wt(),p={waitForSubwindowResult:!0},H()&&f&&yt(f,"10.11.0")<0&&(p.waitForSubwindowResult=!1),[4,d.init({messages:o,isMultiple:c,referrer:{liffId:l,url:location.origin},options:p})];case 2:return[2,y.sent()];case 3:throw(m=y.sent())instanceof Cv?m:S(lu,m.message);case 4:return[2]}})})},r}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"shareTargetPicker"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.shareTargetPicker},e}(B),fk=new dk;function Nm(t,e){return b(this,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return r=ue("createShortcutOnHomeScreen"),(n=new URL(r)).searchParams.append("liffId",t),n.searchParams.append("url",e.url),e.description&&n.searchParams.append("description",e.description),[4,me(n.toString())];case 1:return[2,i.sent().shortcutPageUrl]}})})}function Lm(t){if(cu(t))throw S(re,"LINE URL scheme are not supported in the current environment.")}function hk(t,e){return b(this,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return H()?[2]:[4,new Promise(function(i){setTimeout(i,1e3)})];case 1:return n.sent(),document.visibilityState==="hidden"?[2]:(Lm(e.url),[4,Nm(t,e)]);case 2:return r=n.sent(),sa({url:r,external:!0}),[2]}})})}function pk(t,e){return b(this,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return r={liffId:t,targetUrl:e.url,description:e.description},n="".concat("line://shortcut/liff","?").concat(De.stringify(r)),location.href=n,[4,hk(t,e)];case 1:return i.sent(),[2]}})})}function gk(t,e){return b(this,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return Lm(e.url),[4,Nm(t,e)];case 1:return r=n.sent(),sa({url:r,external:!0}),[2]}})})}function Um(t){var e;if(t.url===void 0||t.url===null||t.url==="")throw S(re,"no proper argument");var r=Oe();if(!(!((e=r==null?void 0:r.availability.addToHomeLineScheme)===null||e===void 0)&&e.permission)){if(cu(t.url))throw S(K,"No permission to specify line schema in url.");if(t.description)throw S(K,"No permission to specify description.")}if(!cu(t.url)){if(!r)throw S(K,"Could not get Context from server.");r.liffId!==Ic(t.url)&&jc(t.url,r.endpointUrl)}}function vk(t){return b(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return Um(t),Qt.internalCreateShortcutOnHomeScreen(),[4,Dm(t)];case 1:return e.sent(),[2]}})})}function mk(t){return b(this,void 0,void 0,function(){return C(this,function(e){switch(e.label){case 0:return Um(t),Qt.createShortcutOnHomeScreen(),[4,Dm(t)];case 1:return e.sent(),[2]}})})}function Dm(t){return b(this,void 0,void 0,function(){var e;return C(this,function(r){switch(r.label){case 0:if(!(e=ce().liffId))throw S(pe,"Invalid LIFF ID.");return Fe()==="ios"?[4,gk(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,pk(e,t)];case 3:r.sent(),r.label=4;case 4:return[2]}})})}var yk=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"createShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(r){return mk(r)}},e}(B),wk=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"internalCreateShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return function(r){return vk(r)}},e}(B);function _k(t){return b(this,arguments,void 0,function(e){var r=e.productIds;return C(this,function(n){switch(n.label){case 0:return[4,ei("iap.getPlatformProducts",{productIds:r}).catch(function(i){throw i.code&&i.description?S(i.code,i.description):S(Pe,"Failed to get platform products",{cause:i})})];case 1:return[2,n.sent().products]}})})}var bk=function(t){return b(void 0,[t],void 0,function(e){var r=e.productId,n=e.orderId;return C(this,function(i){switch(i.label){case 0:return[4,ei("iap.createPayment",{productId:r,orderId:n}).catch(function(s){throw s.code&&s.description?S(s.code,s.description):S(Pe,"Failed to get platform products",{cause:s})})];case 1:return i.sent(),[2]}})})},Sk=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return U(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"iap"},enumerable:!1,configurable:!0}),e.prototype.install=function(){var r=this;return{getPlatformProducts:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return b(r,void 0,void 0,function(){return C(this,function(s){return Qt.iap(),[2,_k.apply(void 0,se([],F(n),!1))]})})},createPayment:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return b(r,void 0,void 0,function(){return C(this,function(s){return Qt.iap(),[2,bk.apply(void 0,se([],F(n),!1))]})})},requestConsentAgreement:function(){return b(r,void 0,void 0,function(){return C(this,function(n){return Qt.iap(),[2,b(void 0,void 0,void 0,function(){return C(this,function(i){switch(i.label){case 0:return[4,ei("iap.requestConsentAgreement").catch(function(s){throw s.code&&s.description?S(s.code,s.description):S(Pe,"Failed to request consent agreement",{cause:s})})];case 1:return i.sent(),[2]}})})]})})}}},e}(B),Ek={},zc=Object.defineProperties(Ek,{getOS:{value:Fe,enumerable:!0,writable:!0},getVersion:{value:na,enumerable:!0,writable:!0},getLanguage:{value:Cm,enumerable:!0,writable:!0},getAppLanguage:{value:Im,enumerable:!0,writable:!0},getOrigins:{value:Om,enumerable:!0,writable:!0},isInClient:{value:H,enumerable:!0,writable:!0},isLoggedIn:{value:xe,enumerable:!0,writable:!0},logout:{value:Ac,enumerable:!0,writable:!0},getAccessToken:{value:zt,enumerable:!0,writable:!0},getIDToken:{value:ta,enumerable:!0,writable:!0},getDecodedIDToken:{value:ra,enumerable:!0,writable:!0},getContext:{value:Oe,enumerable:!0,writable:!0},openWindow:{value:sa,enumerable:!0,writable:!0},closeWindow:{value:Nn,enumerable:!0,writable:!0},getFriendship:{value:Ln(jm,"profile"),enumerable:!0,writable:!0},getAId:{value:jv,enumerable:!0,writable:!0},getProfilePlus:{value:Nv,enumerable:!0,writable:!0},getIsVideoAutoPlay:{value:$v,enumerable:!0,writable:!0},getLineVersion:{value:Wt,enumerable:!0,writable:!0},isApiAvailable:{value:cs,enumerable:!0,writable:!0},getProfile:{value:Ln(Mc,"profile"),enumerable:!0,writable:!0},sendMessages:{value:Ln(Am,"chat_message.write"),enumerable:!0,writable:!0},subWindow:{value:rt,enumerable:!0,writable:!0},ready:{value:nS,enumerable:!0,writable:!0},id:{get:function(){return ce().liffId||null},enumerable:!0},_dispatchEvent:{value:aE,enumerable:!0,writable:!0},_call:{value:ei,enumerable:!0,writable:!0},_addListener:{value:Nc,enumerable:!0,writable:!0},_removeListener:{value:Lc,enumerable:!0,writable:!0},_postMessage:{value:Yv,enumerable:!0,writable:!0}}),Wc=new rS,Fm=new tS(Wc,zc),kk=new Sv(Wc,Fm).install();function Tk(t){kk.call(zc,t)}[new Sv(Wc,Fm),new bE,new zE,new ek,sk,QS,Wv,GE,fk,kE,new zS,new yk,new wk,new Sk].forEach(Tk);var rs=zc;const Ok={BASE_URL:"/star-engine-liff-v2/apps/v2-admin/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Za={};const nh=typeof import.meta<"u"?Ok??{}:{},Ut=t=>nh[t]??nh[`VITE_${t}`]??(Za==null?void 0:Za[t]),sn=typeof window<"u",ri=()=>sn?window.__GUARDIAN_RUNTIME_CONFIG__??{}:{},Vc=()=>{const t=ri();return{supabaseUrl:Ut("V2_SUPABASE_URL")??t.supabaseUrl??"",supabaseAnonKey:Ut("V2_SUPABASE_ANON_KEY")??t.supabaseAnonKey??""}},Ck=()=>{const t=Ut("V2_SUPABASE_JWT");if(t)return t;const e=ri().supabaseJwt;return e||(Ut("V2_SUPABASE_SERVICE_KEY")??null)};let el=null,fr=null,zs=null;class Bm extends Error{constructor(){super("LIFF login redirect triggered"),this.name="GuardianLiffRedirectError"}}const Mm=()=>{if(!el){const{supabaseUrl:t,supabaseAnonKey:e}=Vc();if(!t||!e)throw new Error(" Supabase V2_SUPABASE_URL / V2_SUPABASE_ANON_KEY");el=Fb(t,e,{auth:{persistSession:!1,detectSessionInUrl:!1}})}return el},Ik=()=>{const t=(Ut("V2_LIFF_ID")??"").trim();if(t)return t;const e=(ri().liffId??"").trim();if(e)return e;if(sn){const r=new URLSearchParams(window.location.search),n=r.get("liffId")??r.get("liff_id");if(n)return n;const i=window.__GUARDIAN_LIFF_ID__;if(typeof i=="string"&&i.trim())return i.trim()}return"2008215846-5LwXlWVN"},Pk=async()=>{if(sn){if(!zs){const t=Ik();if(!t)throw new Error(" LIFF V2_LIFF_ID");zs=rs.init({liffId:t}).catch(e=>{throw zs=null,e})}await zs}},zm=async()=>{if(!sn)return!1;if(await Pk(),!rs.isLoggedIn()){const t=Ut("V2_LIFF_REDIRECT_URL")||ri().liffRedirectUrl||(typeof window<"u"?window.location.href:void 0);throw rs.login({redirectUri:t}),new Bm}return!0},xk=async()=>{if(!sn)return null;await zm();const t=rs.getIDToken();if(!t)throw new Error("LIFF  ID Token");const e=Mm(),{data:r,error:n}=await e.auth.signInWithIdToken({provider:"line",token:t});if(n)throw n;const i=r.session??(await e.auth.getSession()).data.session??null;return fr=i,i},Hc=async()=>{if(!sn)return Ck();if(fr!=null&&fr.access_token)return fr.access_token;const t=await xk();return(t==null?void 0:t.access_token)??null},Rk=async()=>{var l,u,c,d,f,p;const t=ri();if(!sn)return{session:null,user:null,roles:t.hasAdminRole===!1?[]:["guardian.admin","guardian.ops"],defaultLeadId:Ut("V2_DEFAULT_LEAD_ID")??t.defaultLeadId??null,defaultAccountId:Ut("V2_DEFAULT_ACCOUNT_ID")??t.defaultAccountId??null,profile:null};await zm();const e=Mm();await Hc();const[{data:r,error:n},i]=await Promise.all([e.auth.getUser(),rs.getProfile()]);if(n)throw n;const s=t.hasAdminRole===!0?["guardian.admin"]:t.hasAdminRole===!1?[]:((u=(l=r.user)==null?void 0:l.user_metadata)==null?void 0:u.guardianRoles)??[],o=((d=(c=r.user)==null?void 0:c.user_metadata)==null?void 0:d.guardianDefaultLeadId)??Ut("V2_DEFAULT_LEAD_ID")??t.defaultLeadId??null,a=((p=(f=r.user)==null?void 0:f.user_metadata)==null?void 0:p.guardianDefaultAccountId)??Ut("V2_DEFAULT_ACCOUNT_ID")??t.defaultAccountId??null;return fr||(fr=(await e.auth.getSession()).data.session??null),{session:fr,user:r.user??null,roles:s,defaultLeadId:o,defaultAccountId:a,profile:i}},Ak=async()=>{const{supabaseAnonKey:t}=Vc(),e={"Content-Type":"application/json"};t&&(e.apikey=t);const r=await Hc();return r&&(e.Authorization=`Bearer ${r}`),e},jk=t=>{const e=ri();return e.hasAdminRole===!0?!0:e.hasAdminRole===!1?!1:t.includes("guardian.admin")||t.includes("guardian.ops")},{supabaseUrl:ih}=Vc(),Wm=async(t,e)=>{const r=await Hc();if(!ih||!r)throw new Error(" Supabase  .env.local");const n=await fetch(`${ih}/rest/v1/rpc/${t}`,{method:"POST",headers:await Ak(),body:JSON.stringify(e)});if(!n.ok){const i=await n.json().catch(()=>({})),s=(i==null?void 0:i.message)||n.statusText||"Admin RPC ";throw new Error(s)}return await n.json()},$k=async t=>Wm("api_v2_admin_set_plan",{p_account:t.accountId,p_plan_code:t.planCode,p_plan_source:t.planSource??null,p_expires_at:t.planExpiresAt??null,p_notes:t.reason??null}),Nk=async t=>Wm("api_v2_admin_flows_run",{p_flow_code:t.flow,p_payload:{accountId:t.accountId,note:t.note,testMode:t.testMode??!1,...t.payload??{}}}),Lk={loading:!0,error:null,session:null,user:null,roles:[],defaultLeadId:null,defaultAccountId:null,profile:null},Uk=()=>{const[t,e]=qe.useState(Lk);return qe.useEffect(()=>{let r=!0;return(async()=>{try{const i=await Rk();if(!r)return;e({loading:!1,error:null,...i})}catch(i){if(i instanceof Bm||!r)return;const s=i instanceof Error?i.message:"Guardian Auth ";e(o=>({...o,loading:!1,error:s}))}})(),()=>{r=!1}},[]),t},Dk={BASE_URL:"/star-engine-liff-v2/apps/v2-admin/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},hi=[{accountId:"5d71ea12-92bd-4c00-b21a-0e507ebe4a13",storeName:"Guardian ",city:"",planCode:"pro",planSource:"manual"},{accountId:"acct-guardian-demo",storeName:" ",city:"",planCode:"pro",planSource:"manual"},{accountId:"acct-guardian-002",storeName:" ",city:"",planCode:"lite",planSource:"trial"},{accountId:"acct-guardian-003",storeName:" ",city:"",planCode:"enterprise",planSource:"stripe"}],sh=typeof import.meta<"u"?Dk??{}:{},Vm=(t,e="")=>sh[t]??sh[`VITE_${t}`]??e,oh=Vm("V2_ADMIN_PLAN_REASON","frontend-demo"),Fk=Vm("V2_ADMIN_PLAN_SOURCE","manual"),Bk=["","","",""],Mk=()=>{const{loading:t,error:e,roles:r,profile:n,defaultAccountId:i}=Uk(),s=jk(r),[o,a]=qe.useState(""),[l,u]=qe.useState(hi[0]),[c,d]=qe.useState(null),[f,p]=qe.useState("info"),[m,y]=qe.useState(!1),[w,g]=qe.useState({}),[h,v]=qe.useState(!1);qe.useEffect(()=>{if(!i)return;const I=hi.find(A=>A.accountId===i);I&&u(I)},[i]);const _=qe.useMemo(()=>{if(!o.trim())return hi;const I=o.toLowerCase();return hi.filter(A=>A.accountId.toLowerCase().includes(I)||A.storeName.toLowerCase().includes(I)||A.city.toLowerCase().includes(I))},[o]),k=I=>{I.preventDefault(),p("info"),d(` ${_.length} `)},E=I=>{u(I),p("success"),d(`${I.storeName}`)},T=async I=>{if(l){if(!s){p("error"),d(" admin ");return}y(!0);try{const A=await $k({accountId:l.accountId,planCode:I,planSource:Fk,reason:oh}),X=A.data.planSource??l.planSource;u({...l,planCode:I,planSource:X}),p("success");const dt=A.data.planSource?` ${A.data.planSource}`:"",Ir=A.meta.eventId?`   ${A.meta.eventId.slice(0,8)}`:"";d(` ${I.toUpperCase()}${dt}${Ir}  LINE `)}catch(A){const X=A instanceof Error?A.message:"";p("error"),d(X)}finally{y(!1)}}},P=async I=>{if(!s){p("error"),d(" admin ");return}g(A=>({...A,[I]:!0}));try{if(!l)throw new Error("");const A=await Nk({flow:I,accountId:l.accountId,note:oh,testMode:h});p("info");const X=`${A.data.runId.slice(0,8)}  ${A.data.status}`;d(` ${I}${h?"":""}  run ${X}  LINE `)}catch(A){const X=A instanceof Error?A.message:"";p("error"),d(`${h?"":""}${X}`)}finally{g(A=>{const X={...A};return delete X[I],X})}};return j.jsxs("div",{className:"guardian-app guardian-admin",children:[j.jsx(S0,{logoText:"Guardian Admin",rightSlot:n?j.jsxs("div",{className:"guardian-user-chip",children:[j.jsx("span",{className:"guardian-user-chip__emoji",role:"img","aria-label":"advisor",children:""}),j.jsxs("span",{className:"guardian-user-chip__label",children:[n.displayName,j.jsxs("small",{children:["LINE   ",s?"Admin":"Viewer"]})]})]}):null}),j.jsxs("main",{className:"guardian-main",children:[t&&j.jsx("div",{className:"guardian-status",children:" LIFF ..."}),e&&j.jsx("div",{className:"guardian-alert guardian-alert--critical",children:j.jsxs("span",{className:"guardian-alert__body",children:[e,j.jsx("br",{})," LIFF / Supabase "]})}),!t&&!e&&!s&&j.jsx("div",{className:"guardian-alert guardian-alert--critical",children:j.jsx("span",{className:"guardian-alert__body",children:" viewer  guardian.admin "})}),!t&&!e&&j.jsxs("section",{className:"guardian-section",children:[j.jsx("h2",{children:"Rich Menu V2"}),j.jsxs("div",{className:"guardian-card guardian-card--menu",children:[j.jsx("p",{className:"guardian-card__highlight",children:" Rich Menu  "}),j.jsx("nav",{className:"guardian-rich-menu",children:Bk.map(I=>j.jsx("span",{className:"guardian-rich-menu__pill",children:I},I))}),j.jsx("p",{children:""})]})]}),j.jsxs("section",{className:"guardian-section",children:[j.jsx("h2",{children:" / "}),j.jsxs("form",{className:"guardian-form",onSubmit:k,children:[j.jsx("label",{htmlFor:"admin-search",className:"guardian-field__label",children:" / "}),j.jsx("input",{id:"admin-search",className:"guardian-field",placeholder:" ID",value:o,onChange:I=>a(I.target.value),list:"admin-search-suggestions"}),j.jsx("datalist",{id:"admin-search-suggestions",children:hi.map(I=>j.jsx("option",{value:I.storeName},I.accountId))}),j.jsx(Rr,{label:"",variant:"primary"})]}),j.jsx("div",{className:"guardian-list",children:_.map(I=>j.jsxs("button",{type:"button",className:`guardian-list__item${(l==null?void 0:l.accountId)===I.accountId?" is-active":""}`,onClick:()=>E(I),children:[j.jsxs("span",{children:[I.storeName,"  ",I.city]}),j.jsxs("span",{className:"guardian-card__highlight",children:["",I.planCode.toUpperCase()]})]},I.accountId))})]}),j.jsxs("section",{className:"guardian-section",children:[j.jsx("h2",{children:""}),l?j.jsxs("div",{className:"guardian-card",children:[j.jsxs("p",{children:["",j.jsx("strong",{children:l.planCode.toUpperCase()}),"  ",l.planSource]}),j.jsxs("div",{className:"guardian-hero__actions",children:[j.jsx(Rr,{label:" Enterprise",variant:"secondary",onClick:()=>T("enterprise"),disabled:m}),j.jsx(Rr,{label:" PRO",variant:"ghost",onClick:()=>T("pro"),disabled:m}),j.jsx(Rr,{label:" Lite",variant:"ghost",onClick:()=>T("lite"),disabled:m})]}),j.jsx("p",{className:"guardian-card__highlight",children:" Supabase RPC `api_v2_admin_set_plan` "})]}):j.jsx("div",{className:"guardian-empty-state",children:""})]}),j.jsxs("section",{className:"guardian-section",children:[j.jsx("h2",{children:""}),j.jsxs("div",{className:"guardian-form guardian-form--inline",children:[j.jsx("label",{className:"guardian-field__label",htmlFor:"guardian-flow-test-mode",children:" LINE"}),j.jsx("input",{id:"guardian-flow-test-mode",type:"checkbox",checked:h,onChange:I=>v(I.target.checked)})]}),j.jsxs("div",{className:"guardian-hero__actions",children:[j.jsx(Rr,{label:"",variant:"primary",onClick:()=>P("guardian_report_refresh"),disabled:!!w.guardian_report_refresh}),j.jsx(Rr,{label:"",onClick:()=>P("guardian_task_reset"),disabled:!!w.guardian_task_reset}),j.jsx(Rr,{label:"",variant:"ghost",onClick:()=>P("guardian_notification_test"),disabled:!!w.guardian_notification_test})]}),j.jsx("p",{className:"guardian-card__highlight",children:" `guardian.admin`  `guardian.ops`  LINE"})]}),c&&j.jsx("div",{className:`guardian-alert ${f==="error"?"guardian-alert--critical":"guardian-alert--info"}`,children:j.jsx("span",{className:"guardian-alert__body",children:c})})]})]})};tl.createRoot(document.getElementById("root")).render(j.jsx(cy.StrictMode,{children:j.jsx(Mk,{})}));
